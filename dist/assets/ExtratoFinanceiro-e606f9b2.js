import{r as a,h as _e,j as e,s as Y,e as Se,E as Pe,b as je,d as ve}from"./index-a2563983.js";import{c as M,D as Qe}from"./contas-75c47386.js";import{m as We}from"./ArrowsClockwise.es-cccb614c.js";import{s as Te}from"./CaretUp.es-b369da07.js";import{c as Ue}from"./CaretUpDown.es-453a995a.js";import{s as He}from"./Download.es-dafa4844.js";import{m as Z}from"./Question.es-1a269825.js";import{p as A}from"./Spinner.es-3c850cda.js";import{s as Je}from"./XCircle.es-fcbde856.js";import{C as $,a as O,b as q,c as I,d as v}from"./cards-fd94db0b.js";import{u as Ye}from"./useApiClient-0bf86fc1.js";const Ge=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm40.49-84.49a12,12,0,0,1,0,17l-32,32a12,12,0,0,1-17,0l-32-32a12,12,0,1,1,17-17L116,139V88a12,12,0,0,1,24,0v51l11.51-11.52A12,12,0,0,1,168.49,127.51Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm37.66-85.66a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L120,148.69V88a8,8,0,0,1,16,0v60.69l18.34-18.35A8,8,0,0,1,165.66,130.34Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,117.66-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L120,148.69V88a8,8,0,0,1,16,0v60.69l18.34-18.35a8,8,0,0,1,11.32,11.32Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm36.24-86.24a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48,0l-32-32a6,6,0,0,1,8.48-8.48L122,153.51V88a6,6,0,0,1,12,0v65.51l21.76-21.75A6,6,0,0,1,164.24,131.76Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm37.66-85.66a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L120,148.69V88a8,8,0,0,1,16,0v60.69l18.34-18.35A8,8,0,0,1,165.66,130.34Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm34.83-86.83a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66,0l-32-32a4,4,0,0,1,5.66-5.66L124,158.34V88a4,4,0,0,1,8,0v70.34l25.17-25.17A4,4,0,0,1,162.83,133.17Z"}))]]),Ke=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm40.49-100.49a12,12,0,0,1-17,17L140,117v51a12,12,0,0,1-24,0V117l-11.51,11.52a12,12,0,0,1-17-17l32-32a12,12,0,0,1,17,0Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm37.66-101.66a8,8,0,0,1-11.32,11.32L136,107.31V168a8,8,0,0,1-16,0V107.31l-18.34,18.35a8,8,0,0,1-11.32-11.32l32-32a8,8,0,0,1,11.32,0Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,101.66a8,8,0,0,1-11.32,0L136,107.31V168a8,8,0,0,1-16,0V107.31l-18.34,18.35a8,8,0,0,1-11.32-11.32l32-32a8,8,0,0,1,11.32,0l32,32A8,8,0,0,1,165.66,125.66Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm36.24-102.24a6,6,0,1,1-8.48,8.48L134,102.49V168a6,6,0,0,1-12,0V102.49l-21.76,21.75a6,6,0,0,1-8.48-8.48l32-32a6,6,0,0,1,8.48,0Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm37.66-101.66a8,8,0,0,1-11.32,11.32L136,107.31V168a8,8,0,0,1-16,0V107.31l-18.34,18.35a8,8,0,0,1-11.32-11.32l32-32a8,8,0,0,1,11.32,0Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm34.83-102.83a4,4,0,0,1-5.66,5.66L132,97.66V168a4,4,0,0,1-8,0V97.66L98.83,122.83a4,4,0,0,1-5.66-5.66l32-32a4,4,0,0,1,5.66,0Z"}))]]),De=a.forwardRef((g,b)=>a.createElement(_e,{ref:b,...g,weights:Ge}));De.displayName="ArrowCircleDownIcon";const Ne=De,Ee=a.forwardRef((g,b)=>a.createElement(_e,{ref:b,...g,weights:Ke}));Ee.displayName="ArrowCircleUpIcon";const we=Ee;function Ce(g){if(!g)return"-";const b=new Date(g);return isNaN(b)?"-":b.toLocaleDateString("pt-BR")}const Xe=({dados:g,dadosCompletos:b,loading:T,erro:re,expandTabela:P,setExpandTabela:m,contas:Q,corConta:G,currentPage:f,totalPages:C,totalRegistros:W,onPageChange:p,pageSize:U})=>{const[N,K]=a.useState({key:"dt_movim",direction:"asc"}),H=n=>{let D="asc";N.key===n&&N.direction==="asc"&&(D="desc"),K({key:n,direction:D})},R=n=>N.key!==n?e.jsx(Y,{size:12,className:"ml-1 opacity-50"}):N.direction==="asc"?e.jsx(Te,{size:12,className:"ml-1"}):e.jsx(Y,{size:12,className:"ml-1"}),X=a.useMemo(()=>(Array.isArray(g)?[...g]:[]).sort((D,u)=>{let i=D[N.key],d=u[N.key];return N.key.startsWith("dt_")?(i=i?new Date(i):new Date(0),d=d?new Date(d):new Date(0)):N.key==="vl_lancto"?(i=parseFloat(i)||0,d=parseFloat(d)||0):typeof i=="string"&&typeof d=="string"&&(i=i.toLowerCase(),d=d.toLowerCase()),N.direction==="asc"?i>d?1:i<d?-1:0:i<d?1:i>d?-1:0}),[g,N]);return e.jsxs("div",{className:"rounded-2xl shadow-lg bg-white mt-8 border border-[#000638]/10",children:[e.jsxs("div",{className:"p-4 border-b border-[#000638]/10 cursor-pointer select-none flex items-center justify-between",onClick:()=>m(n=>!n),children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#000638]",children:"Extrato TOTVS"}),W>0&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[W," registros encontrados",C>1&&` - Página ${f} de ${C} (${U} por página)`]})]}),e.jsx("span",{className:"flex items-center",children:P?e.jsx(Y,{size:20,color:"#9ca3af"}):e.jsx(Se,{size:20,color:"#9ca3af"})})]}),re&&e.jsx("div",{className:"mt-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded text-center",children:re}),P&&e.jsxs("div",{className:"varejo-table-container overflow-x-auto",children:[T?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{size:32,className:"animate-spin text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]})}):e.jsxs("table",{className:"varejo-table w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#000638] text-white",children:[e.jsx("th",{className:"px-3 py-2 font-semibold",children:"Conta"}),e.jsx("th",{onClick:()=>H("dt_movim"),className:"px-3 py-2 font-semibold cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Data Lançamento ",R("dt_movim")]})}),e.jsx("th",{className:"px-3 py-2 font-semibold",children:"Documento"}),e.jsx("th",{className:"px-3 py-2 font-semibold",children:"Estorno"}),e.jsx("th",{className:"px-3 py-2 font-semibold",children:"Operação"}),e.jsx("th",{className:"px-3 py-2 font-semibold",children:"Auxiliar"}),e.jsx("th",{onClick:()=>H("vl_lancto"),className:"px-3 py-2 font-semibold cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Valor ",R("vl_lancto")]})}),e.jsx("th",{onClick:()=>H("dt_liq"),className:"px-3 py-2 font-semibold cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:["Data Liquidação ",R("dt_liq")]})})]})}),e.jsx("tbody",{children:X.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-8",children:"Nenhum dado encontrado."})}):X.map((n,D)=>e.jsxs("tr",{className:"border-b hover:bg-[#f8f9fb]",children:[e.jsx("td",{className:`px-3 py-2 text-center text-xs ${(()=>{const u=Q.find(i=>i.numero===String(n.nr_ctapes));return u?G(u.nome):""})()}`,children:(()=>{const u=Q.find(i=>i.numero===String(n.nr_ctapes));return u?`${u.numero} - ${u.nome}`:n.nr_ctapes})()}),e.jsx("td",{className:"px-3 py-2 text-center text-[#000638]",children:Ce(n.dt_movim)}),e.jsx("td",{className:"px-3 py-2 text-[#000000]",children:n.ds_doc}),e.jsx("td",{className:"px-3 py-2 text-center text-[#000000]",children:n.in_estorno}),e.jsx("td",{className:"px-3 py-2 text-center text-[#000000]",children:n.tp_operacao}),e.jsx("td",{className:"px-3 py-2 text-[#000000]",children:n.ds_aux}),e.jsx("td",{className:`px-3 py-2 text-right font-bold ${n.tp_operacao==="D"?"text-[#fe0000]":n.tp_operacao==="C"?"text-green-600":""}`,children:n.vl_lancto!==null&&n.vl_lancto!==void 0?Number(n.vl_lancto).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"-"}),e.jsx("td",{className:"px-3 py-2 text-center text-[#000638]",children:Ce(n.dt_liq)})]},D))})]}),C>1&&e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:["Página ",f," de ",C]}),e.jsxs("span",{className:"text-gray-500",children:[W," registros • ",U," por página"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(1),disabled:f===1||T,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Primeira"}),e.jsx("button",{onClick:()=>p(f-1),disabled:f===1||T,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const n=[];let u=Math.max(1,f-Math.floor(2.5)),i=Math.min(C,u+5-1);i-u+1<5&&(u=Math.max(1,i-5+1));for(let d=u;d<=i;d++)n.push(e.jsx("button",{onClick:()=>p(d),disabled:T,className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${f===d?"bg-[#000638] text-white border border-[#000638]":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:d},d));return n})()}),e.jsx("button",{onClick:()=>p(f+1),disabled:f===C||T,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Próxima"}),e.jsx("button",{onClick:()=>p(C),disabled:f===C||T,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Última"})]})]})})]})]})},S=20,xt=()=>{const g=Ye(),[b,T]=a.useState([]),[re,P]=a.useState(0),[m,Q]=a.useState(!1),[G,f]=a.useState(""),[C,W]=a.useState(!1),[p,U]=a.useState([]),[N,K]=a.useState(0),[H,R]=a.useState(!1),[X,n]=a.useState(""),[D,u]=a.useState(!0),[i,d]=a.useState({nr_ctapes:[],dt_movim_ini:"",dt_movim_fim:""}),[oe,ke]=a.useState(!0),[Le,xe]=a.useState(!1),[le,Ae]=a.useState({title:"",description:"",calculation:""}),[me,Fe]=a.useState(new Date().getFullYear()),[pe,Me]=a.useState(""),[y,ne]=a.useState(1),[ie,he]=a.useState(1),[w,Re]=a.useState({campo:null,direcao:"asc"}),[E,ee]=a.useState(new Set);a.useEffect(()=>{const t=document.createElement("style");return t.textContent=`
      .table-container {
        overflow-x: auto;
        position: relative;
        max-width: 100%;
      }
      .extrato-table {
        border-collapse: collapse;
        width: 100%;
      }
      .extrato-table th,
      .extrato-table td {
        padding: 6px 8px !important;
        border-right: 1px solid #f3f4f6;
        word-wrap: break-word;
        white-space: normal;
        font-size: 11px;
        line-height: 1.3;
      }
      .extrato-table th:last-child,
      .extrato-table td:last-child {
        border-right: none;
      }
      .extrato-table th {
        background-color: #000638;
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 10px;
        letter-spacing: 0.05em;
      }
      .extrato-table tbody tr:nth-child(odd) {
        background-color: white;
      }
      .extrato-table tbody tr:nth-child(even) {
        background-color: #fafafa;
      }
      .extrato-table tbody tr:hover {
        background-color: #f0f9ff;
        transition: background-color 0.2s ease;
      }
      /* CSS para coluna fixa */
      .extrato-table thead th:first-child,
      .extrato-table tbody td:first-child {
        position: sticky !important;
        left: 0 !important;
        z-index: 10 !important;
        border-right: 2px solid #e5e7eb !important;
        box-shadow: 2px 0 4px rgba(0,0,0,0.1) !important;
      }
      .extrato-table thead th:first-child {
        background: #000638 !important;
        z-index: 20 !important;
        border-right: 2px solid #374151 !important;
      }
      .extrato-table tbody tr:nth-child(even) td:first-child {
        background: #fafafa !important;
      }
      .extrato-table tbody tr:nth-child(odd) td:first-child {
        background: #ffffff !important;
      }
      .extrato-table tbody tr:hover td:first-child {
        background: #f0f9ff !important;
      }
      .extrato-table tbody tr.bg-blue-100 td:first-child {
        background: #dbeafe !important;
      }
      .extrato-table tbody tr.bg-blue-100:hover td:first-child {
        background: #bfdbfe !important;
      }
      .extrato-table th:first-child input[type="checkbox"] {
        transform: scale(1.1);
      }
      .extrato-table td:first-child input[type="checkbox"] {
        transform: scale(1.1);
      }
    `,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const V=a.useCallback(t=>{Re(s=>({campo:t,direcao:s.campo===t&&s.direcao==="asc"?"desc":"asc"}))},[]),z=a.useCallback(t=>w.campo!==t?e.jsx(Ue,{size:12,className:"opacity-50"}):w.direcao==="asc"?e.jsx(Te,{size:12}):e.jsx(Y,{size:12}),[w]),Ve=a.useCallback(t=>{ee(s=>{const r=new Set(s);return r.has(t)?r.delete(t):r.add(t),r})},[]),c=a.useMemo(()=>{let t=[...b];return w.campo&&t.sort((s,r)=>{let l=s[w.campo],o=r[w.campo];return w.campo.includes("dt_")&&(l=l?new Date(l):new Date(0),o=o?new Date(o):new Date(0)),w.campo==="vl_lancto"&&(l=parseFloat(l)||0,o=parseFloat(o)||0),typeof l=="string"&&(l=l.toLowerCase(),o=o.toLowerCase()),l<o?w.direcao==="asc"?-1:1:l>o?w.direcao==="asc"?1:-1:0}),t},[b,w]),be=a.useMemo(()=>{const t=(y-1)*S,s=t+S;return c.slice(t,s)},[c,y]),k=Math.ceil(c.length/S),ze=a.useCallback(()=>{const t=c.map((s,r)=>r);ee(new Set(t))},[c]),ue=a.useCallback(()=>{ee(new Set)},[]);a.useEffect(()=>{ee(new Set)},[b]),a.useEffect(()=>{ne(1)},[b]),a.useEffect(()=>{he(1)},[p]);const Be=async(t=i)=>{Q(!0),f("");try{const s={nr_ctapes:t.nr_ctapes,dt_movim_ini:t.dt_movim_ini,dt_movim_fim:t.dt_movim_fim,limit:1e6,offset:0},r=await g.financial.extrato(s);if(r.success)T(r.data||[]),P(r.total||0);else throw new Error(r.message||"Erro ao buscar dados")}catch(s){console.error("Erro ao buscar extrato:",s),f("Erro ao buscar dados do servidor."),T([]),P(0)}finally{Q(!1),W(!0)}R(!0),n("");try{const s={nr_ctapes:t.nr_ctapes,dt_movim_ini:t.dt_movim_ini,dt_movim_fim:t.dt_movim_fim,limit:1e6,offset:0},r=await g.financial.extratoTotvs(s);if(r.success)U(r.data||[]),K(r.total||0);else throw new Error(r.message||"Erro ao buscar dados TOTVS")}catch(s){console.error("Erro ao buscar extrato TOTVS:",s),n("Erro ao buscar dados do servidor TOTVS."),U([]),K(0)}finally{R(!1)}},ge=t=>{d({...i,[t.target.name]:t.target.value})},fe=(t,s)=>{if(t){if(s==="ANO"){const r=new Date(t,0,1).toISOString().split("T")[0],l=new Date(t,12,0).toISOString().split("T")[0];d(o=>({...o,dt_movim_ini:r,dt_movim_fim:l}));return}if(s!==""&&!Number.isNaN(Number(s))){const r=Number(s),l=new Date(t,r,1).toISOString().split("T")[0],o=new Date(t,r+1,0).toISOString().split("T")[0];d(h=>({...h,dt_movim_ini:l,dt_movim_fim:o}))}}},Ze=t=>{t.preventDefault(),ne(1),Be({...i,[t.target.name]:t.target.value})},J=t=>{ne(t)},$e=t=>{he(t)},B=(t,s,r)=>{Ae({title:t,description:s,calculation:r}),xe(!0)},ye=()=>{xe(!1)};function te(t){if(!t)return"-";const s=new Date(t);return isNaN(s)?"-":s.toLocaleDateString("pt-BR")}function Oe(){if(!b||b.length===0)return;const t=["Conta","Data Lançamento","Histórico","Operação","Valor","Data Conciliação"],s=b.map(j=>[j.nr_ctapes,te(j.dt_lancto),j.ds_histbco,j.tp_operbco,j.vl_lancto!==null&&j.vl_lancto!==void 0?Number(j.vl_lancto).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"-",te(j.dt_conciliacao)]),r=[t,...s].map(j=>j.map(de=>`"${String(de).replace(/"/g,'""')}"`).join(",")).join(`
`),l=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(l),h=document.createElement("a");h.href=o,h.setAttribute("download","extrato_financeiro.csv"),document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(o)}function ce(t){return t?t.includes("CROSBY")?"text-blue-500":t.includes("FABIO")?"text-yellow-600":t.includes("IRMÃOS CR")?"text-orange-500":t.includes("FLAVIO")?"text-green-500":"":""}const L=a.useMemo(()=>{const t=c.filter(x=>x.tp_operbco==="D").length,s=c.filter(x=>x.tp_operbco==="D").reduce((x,F)=>x+(F.vl_lancto||0),0),r=c.filter(x=>x.tp_operbco==="C").length,l=c.filter(x=>x.tp_operbco==="C").reduce((x,F)=>x+(F.vl_lancto||0),0),o=c.filter(x=>!!x.dt_conciliacao).length,h=c.filter(x=>!x.dt_conciliacao).length,j=c.filter(x=>!!x.dt_conciliacao).reduce((x,F)=>x+(F.vl_lancto||0),0),de=c.filter(x=>!x.dt_conciliacao).reduce((x,F)=>x+(F.vl_lancto||0),0);return{qtdDebitos:t,valorDebitos:s,qtdCreditos:r,valorCreditos:l,qtdConciliadas:o,qtdDesconciliadas:h,valorConciliadas:j,valorDesconciliadas:de}},[c]),se=a.useMemo(()=>[...p],[p]),qe=a.useMemo(()=>{const t=(ie-1)*S,s=t+S;return se.slice(t,s)},[se,ie]),Ie=Math.ceil(se.length/S),ae=a.useMemo(()=>{const t=p.filter(o=>o.tp_operacao==="D").length,s=p.filter(o=>o.tp_operacao==="D").reduce((o,h)=>o+(h.vl_lancto||0),0),r=p.filter(o=>o.tp_operacao==="C").length,l=p.filter(o=>o.tp_operacao==="C").reduce((o,h)=>o+(h.vl_lancto||0),0);return{qtdDebitosTotvs:t,valorDebitosTotvs:s,qtdCreditosTotvs:r,valorCreditosTotvs:l}},[p]),_=a.useMemo(()=>{const t={};return c.forEach(s=>{var l;const r=String(s.nr_ctapes);t[r]||(t[r]={numero:r,nome:((l=M.find(o=>o.numero===r))==null?void 0:l.nome)||r,creditos:0,debitos:0,saldo:0,creditosTotvs:0,debitosTotvs:0,saldoExtrato:0}),s.tp_operbco==="C"?t[r].creditos+=parseFloat(s.vl_lancto)||0:s.tp_operbco==="D"&&(t[r].debitos+=parseFloat(s.vl_lancto)||0),t[r].saldo=t[r].creditos-t[r].debitos}),p.forEach(s=>{var l;const r=String(s.nr_ctapes);t[r]||(t[r]={numero:r,nome:((l=M.find(o=>o.numero===r))==null?void 0:l.nome)||r,creditos:0,debitos:0,saldo:0,creditosTotvs:0,debitosTotvs:0,saldoExtrato:0}),s.tp_operacao==="C"?t[r].creditosTotvs+=parseFloat(s.vl_lancto)||0:s.tp_operacao==="D"&&(t[r].debitosTotvs+=parseFloat(s.vl_lancto)||0),t[r].saldoExtrato=t[r].creditosTotvs-t[r].debitosTotvs}),Object.values(t).sort((s,r)=>s.numero.localeCompare(r.numero))},[c,p,M]);return e.jsxs(Pe,{message:"Erro ao carregar a página de Extrato Financeiro",onError:(t,s)=>{console.error("ExtratoFinanceiro Error:",t,s)},children:[e.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col items-stretch justify-start py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-[#000638]",children:"Extrato Financeiro"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("form",{onSubmit:Ze,className:"flex flex-col bg-white p-8 rounded-2xl shadow-lg w-full max-w-5xl mx-auto border border-[#000638]/10",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("span",{className:"text-lg font-bold text-[#000638] flex items-center gap-2",children:[e.jsx(je,{size:22,weight:"bold"}),"Filtros"]}),e.jsx("span",{className:"text-sm text-gray-500 mt-1",children:"Selecione o período e as contas para análise"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-3 gap-y-2 w-full mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Contas"}),e.jsx(Qe,{contas:M,contasSelecionadas:Array.isArray(i.nr_ctapes)?i.nr_ctapes:[],setContasSelecionadas:t=>d(s=>({...s,nr_ctapes:typeof t=="function"?t(Array.isArray(s.nr_ctapes)?s.nr_ctapes:[]):t})),minWidth:200,maxWidth:400,placeholder:"Selecione as contas",hideLabel:!0,className:"!bg-[#f8f9fb] !text-[#000638] !placeholder:text-gray-400 !px-3 !py-2 !w-full !rounded-lg !border !border-[#000638]/30 focus:!outline-none focus:!ring-2 focus:!ring-[#000638] !h-[42px] !text-base"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Ano"}),e.jsx("select",{value:me,onChange:t=>{const s=Number(t.target.value);Fe(s),fe(s,pe)},className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400",children:Array.from({length:6}).map((t,s)=>{const r=new Date().getFullYear()-s;return e.jsx("option",{value:r,children:r},r)})})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Mês"}),e.jsxs("select",{value:pe,onChange:t=>{const s=t.target.value;Me(s),fe(me,s)},className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400",children:[e.jsx("option",{value:"",children:"— Selecionar —"}),e.jsx("option",{value:"ANO",children:"Ano inteiro"}),e.jsx("option",{value:"0",children:"Jan"}),e.jsx("option",{value:"1",children:"Fev"}),e.jsx("option",{value:"2",children:"Mar"}),e.jsx("option",{value:"3",children:"Abr"}),e.jsx("option",{value:"4",children:"Mai"}),e.jsx("option",{value:"5",children:"Jun"}),e.jsx("option",{value:"6",children:"Jul"}),e.jsx("option",{value:"7",children:"Ago"}),e.jsx("option",{value:"8",children:"Set"}),e.jsx("option",{value:"9",children:"Out"}),e.jsx("option",{value:"10",children:"Nov"}),e.jsx("option",{value:"11",children:"Dez"})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Inicial"}),e.jsx("input",{type:"date",name:"dt_movim_ini",value:i.dt_movim_ini,onChange:ge,className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Final"}),e.jsx("input",{type:"date",name:"dt_movim_fim",value:i.dt_movim_fim,onChange:ge,className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400"})]})]}),e.jsx("div",{className:"flex justify-end w-full mt-1",children:e.jsxs("button",{type:"submit",className:"flex items-center gap-1 bg-[#000638] text-white px-5 py-2 rounded-lg hover:bg-[#fe0000] transition h-9 text-sm font-bold shadow tracking-wide uppercase min-w-[90px] disabled:opacity-50 disabled:cursor-not-allowed",disabled:m,children:[m?e.jsx(A,{size:18,className:"animate-spin"}):e.jsx(We,{size:18,weight:"bold"}),m?"Carregando...":"Filtrar"]})})]}),G&&e.jsx("div",{className:"mt-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded text-center",children:G})]}),e.jsxs("div",{className:"flex flex-row gap-2 mb-8 max-w-full justify-center items-stretch flex-wrap",children:[e.jsxs($,{className:"min-w-[140px] max-w-[160px] shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-1 rounded-lg bg-white cursor-pointer p-1",children:[e.jsx(O,{className:"pb-0 px-1 pt-1",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(Ne,{size:15,className:"text-[#fe0000]"}),e.jsx(q,{className:"text-xs font-bold text-[#fe0000]",children:"Déb. Fin. (D)"})]})}),e.jsxs(I,{className:"pt-1 pl-2",children:[e.jsx("div",{className:"text-lg font-extrabold text-[#fe0000] mb-0.5",children:m?e.jsx(A,{size:18,className:"animate-spin text-[#fe0000]"}):L.qtdDebitos}),e.jsx(v,{className:"text-[10px] text-gray-500",children:"Qtd"}),e.jsx("div",{className:"text-xs font-bold text-[#fe0000] mt-0.5",children:m?"...":L.valorDebitos.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx(v,{className:"text-[10px] text-gray-500",children:"Soma"}),e.jsx("button",{onClick:()=>B("Débitos Financeiros","Mostra a quantidade e valor total de todas as movimentações de débito (D) no extrato financeiro.","Dados referentes ao componente FCCFP023"),className:"w-5 h-5 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:e.jsx(Z,{size:10,className:"text-gray-600"})})]})]})]}),e.jsxs($,{className:"min-w-[140px] max-w-[160px] shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-1 rounded-lg bg-white cursor-pointer p-1",children:[e.jsx(O,{className:"pb-0 px-1 pt-1",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(we,{size:15,className:"text-green-600"}),e.jsx(q,{className:"text-xs font-bold text-green-600",children:"Créd. Fin. (C)"})]})}),e.jsxs(I,{className:"pt-1 pl-2",children:[e.jsx("div",{className:"text-lg font-extrabold text-green-600 mb-0.5",children:m?e.jsx(A,{size:18,className:"animate-spin text-green-600"}):L.qtdCreditos}),e.jsx(v,{className:"text-[10px] text-gray-500",children:"Qtd"}),e.jsx("div",{className:"text-xs font-bold text-green-600 mt-0.5",children:m?"...":L.valorCreditos.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx(v,{className:"text-[10px] text-gray-500",children:"Soma"}),e.jsx("button",{onClick:()=>B("Créditos Financeiros","Mostra a quantidade e valor total de todas as movimentações de crédito (C) no extrato financeiro.","Dados referentes ao componente FCCFP023"),className:"w-5 h-5 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:e.jsx(Z,{size:10,className:"text-gray-600"})})]})]})]}),e.jsxs($,{className:"min-w-[140px] max-w-[160px] shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-1 rounded-lg bg-white cursor-pointer p-1",children:[e.jsx(O,{className:"pb-0 px-1 pt-1",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(ve,{size:15,className:"text-green-600"}),e.jsx(q,{className:"text-xs font-bold text-green-600",children:"Conciliadas"})]})}),e.jsxs(I,{className:"pt-1 pl-2",children:[e.jsx("div",{className:"text-lg font-extrabold text-green-600 mb-0.5",children:m?e.jsx(A,{size:18,className:"animate-spin text-green-600"}):L.qtdConciliadas}),e.jsx(v,{className:"text-[10px] text-gray-500",children:"Qtd"}),e.jsx("div",{className:"text-xs font-bold text-green-600 mt-0.5",children:m?"...":L.valorConciliadas.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx(v,{className:"text-[10px] text-gray-500",children:"Soma"}),e.jsx("button",{onClick:()=>B("Transações Conciliadas","Mostra a quantidade e valor total de todas as movimentações que já foram conciliadas com o sistema TOTVS.","Dados referentes ao componente FCCFP023"),className:"w-5 h-5 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:e.jsx(Z,{size:10,className:"text-gray-600"})})]})]})]}),e.jsxs($,{className:"min-w-[140px] max-w-[160px] shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-1 rounded-lg bg-white cursor-pointer p-1",children:[e.jsx(O,{className:"pb-0 px-1 pt-1",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(Je,{size:15,className:"text-[#fe0000]"}),e.jsx(q,{className:"text-xs font-bold text-[#fe0000]",children:"Desconciliadas"})]})}),e.jsxs(I,{className:"pt-1 pl-2",children:[e.jsx("div",{className:"text-lg font-extrabold text-[#fe0000] mb-0.5",children:m?e.jsx(A,{size:18,className:"animate-spin text-[#fe0000]"}):L.qtdDesconciliadas}),e.jsx(v,{className:"text-[10px] text-gray-500",children:"Qtd"}),e.jsx("div",{className:"text-xs font-bold text-[#fe0000] mt-0.5",children:m?"...":L.valorDesconciliadas.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx(v,{className:"text-[10px] text-gray-500",children:"Soma"}),e.jsx("button",{onClick:()=>B("Transações Desconciliadas","Mostra a quantidade e valor total de todas as movimentações que estão pendentes de conciliação com o sistema TOTVS.","Dados referentes ao componente FCCFP023"),className:"w-5 h-5 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:e.jsx(Z,{size:10,className:"text-gray-600"})})]})]})]}),e.jsxs($,{className:"min-w-[140px] max-w-[160px] shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-1 rounded-lg bg-blue-100 cursor-pointer p-1",children:[e.jsx(O,{className:"pb-0 px-1 pt-1",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(Ne,{size:15,className:"text-[#fe0000]"}),e.jsx(q,{className:"text-xs font-bold text-[#fe0000]",children:"Déb. TOTVs (D)"})]})}),e.jsxs(I,{className:"pt-1 pl-2",children:[e.jsx("div",{className:"text-lg font-extrabold text-[#fe0000] mb-0.5",children:ae.qtdDebitosTotvs}),e.jsx(v,{className:"text-[10px] text-gray-500",children:"Qtd"}),e.jsx("div",{className:"text-xs font-bold text-[#fe0000] mt-0.5",children:ae.valorDebitosTotvs.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx(v,{className:"text-[10px] text-gray-500",children:"Soma"}),e.jsx("button",{onClick:()=>B("Débitos TOTVS","Mostra a quantidade e valor total de todas as movimentações de débito (D) no sistema TOTVS.","Dados referentes ao componente FCCFL004"),className:"w-5 h-5 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:e.jsx(Z,{size:10,className:"text-gray-600"})})]})]})]}),e.jsxs($,{className:"min-w-[140px] max-w-[160px] shadow-md transition-all duration-200 hover:shadow-lg hover:-translate-y-1 rounded-lg bg-blue-100 cursor-pointer p-1",children:[e.jsx(O,{className:"pb-0 px-1 pt-1",children:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(we,{size:15,className:"text-green-600"}),e.jsx(q,{className:"text-xs font-bold text-green-600",children:"Créd. TOTVs (C)"})]})}),e.jsxs(I,{className:"pt-1 pl-2",children:[e.jsx("div",{className:"text-lg font-extrabold text-green-600 mb-0.5",children:ae.qtdCreditosTotvs}),e.jsx(v,{className:"text-[10px] text-gray-500",children:"Qtd"}),e.jsx("div",{className:"text-xs font-bold text-green-600 mt-0.5",children:ae.valorCreditosTotvs.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx(v,{className:"text-[10px] text-gray-500",children:"Soma"}),e.jsx("button",{onClick:()=>B("Créditos TOTVS","Mostra a quantidade e valor total de todas as movimentações de crédito (C) no sistema TOTVS.","Dados referentes ao componente FCCFL004"),className:"w-5 h-5 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:e.jsx(Z,{size:10,className:"text-gray-600"})})]})]})]})]}),e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("button",{onClick:Oe,className:"flex items-center gap-2 bg-[#000638] text-white px-4 py-2 rounded-lg hover:bg-[#fe0000] transition-all duration-200 text-sm font-medium shadow-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:m||c.length===0,children:[m?e.jsx(A,{size:18,className:"animate-spin"}):e.jsx(He,{size:18}),m?"Carregando...":"Baixar Excel"]})}),_.length>0&&e.jsxs("div",{className:"rounded-2xl shadow-lg bg-white border border-[#000638]/10 mb-6",children:[e.jsxs("div",{className:"p-4 border-b border-[#000638]/10",children:[e.jsx("h2",{className:"text-xl font-bold text-[#000638]",children:"Saldo por Conta"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Resumo financeiro por conta (Créditos - Débitos) e Saldo do Extrato TOTVS"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{className:"bg-[#000638] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Conta"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Créditos"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Débitos"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Saldo"}),e.jsx("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"Saldo Extrato"})]})}),e.jsx("tbody",{children:_.map((t,s)=>e.jsxs("tr",{className:`border-b ${s%2===0?"bg-white":"bg-gray-50"} hover:bg-gray-100 transition-colors`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:`font-medium ${ce(t.nome)}`,children:[t.numero," - ",t.nome]})}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-green-600",children:t.creditos.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-4 py-3 text-right font-medium text-red-600",children:t.debitos.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:`px-4 py-3 text-right font-bold ${t.saldo>0?"text-green-600":t.saldo<0?"text-red-600":"text-gray-600"}`,children:t.saldo.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:`px-4 py-3 text-right font-bold ${t.saldoExtrato>0?"text-green-600":t.saldoExtrato<0?"text-red-600":"text-gray-600"}`,children:t.saldoExtrato.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},t.numero))}),e.jsx("tfoot",{className:"bg-gray-100 border-t-2 border-[#000638]",children:e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-bold text-[#000638]",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-right font-bold text-green-600",children:_.reduce((t,s)=>t+s.creditos,0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-4 py-3 text-right font-bold text-red-600",children:_.reduce((t,s)=>t+s.debitos,0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:`px-4 py-3 text-right font-bold ${_.reduce((t,s)=>t+s.saldo,0)>0?"text-green-600":_.reduce((t,s)=>t+s.saldo,0)<0?"text-red-600":"text-gray-600"}`,children:_.reduce((t,s)=>t+s.saldo,0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:`px-4 py-3 text-right font-bold ${_.reduce((t,s)=>t+s.saldoExtrato,0)>0?"text-green-600":_.reduce((t,s)=>t+s.saldoExtrato,0)<0?"text-red-600":"text-gray-600"}`,children:_.reduce((t,s)=>t+s.saldoExtrato,0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})})]})})]}),e.jsxs("div",{className:"rounded-2xl shadow-lg bg-white border border-[#000638]/10",children:[e.jsxs("div",{className:"p-4 border-b border-[#000638]/10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[#000638]",children:"Detalhamento do Extrato Financeiro"}),c.length>0&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[c.length," movimentação",c.length>1?"ões":""," encontrada",c.length>1?"s":"",k>1&&` - Página ${y} de ${k} (${S} por página)`]})]}),e.jsx("button",{onClick:()=>ke(!oe),className:"flex items-center text-gray-500 hover:text-gray-700",children:oe?e.jsx(Y,{size:20}):e.jsx(Se,{size:20})})]}),oe&&e.jsx(e.Fragment,{children:m?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{size:32,className:"animate-spin text-blue-600"}),e.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]})}):C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-container max-w-full mx-auto",children:e.jsxs("table",{className:"border-collapse rounded-lg overflow-hidden shadow-lg extrato-table",style:{minWidth:"1200px"},children:[e.jsx("thead",{className:"bg-[#000638] text-white text-xs uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-center text-[10px]",style:{width:"50px",minWidth:"50px",position:"sticky",left:0,zIndex:20,backgroundColor:"#000638"},children:e.jsx("input",{type:"checkbox",checked:E.size===c.length&&c.length>0,onChange:()=>{E.size===c.length?ue():ze()},className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("th",{className:"px-3 py-1 text-center text-[10px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>V("nr_ctapes"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Conta",z("nr_ctapes")]})}),e.jsx("th",{className:"px-3 py-1 text-center text-[10px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>V("dt_lancto"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Data Lançamento",z("dt_lancto")]})}),e.jsx("th",{className:"px-3 py-1 text-left text-[10px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>V("ds_histbco"),children:e.jsxs("div",{className:"flex items-center",children:["Histórico",z("ds_histbco")]})}),e.jsx("th",{className:"px-3 py-1 text-center text-[10px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>V("tp_operbco"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Operação",z("tp_operbco")]})}),e.jsx("th",{className:"px-3 py-1 text-center text-[10px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>V("vl_lancto"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Valor",z("vl_lancto")]})}),e.jsx("th",{className:"px-3 py-1 text-center text-[10px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>V("dt_conciliacao"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Data Conciliação",z("dt_conciliacao")]})})]})}),e.jsx("tbody",{children:be.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500 text-lg mb-2",children:"Nenhum dado encontrado"}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Verifique os filtros selecionados"})]})})}):be.map((t,s)=>{var l;const r=(y-1)*S+s;return e.jsxs("tr",{className:`text-[11px] border-b transition-colors cursor-pointer ${E.has(r)?"bg-blue-100 hover:bg-blue-200":s%2===0?"bg-white hover:bg-gray-100":"bg-gray-50 hover:bg-gray-100"}`,children:[e.jsx("td",{className:"px-2 py-1 text-center",style:{width:"50px",minWidth:"50px",position:"sticky",left:0,zIndex:10},onClick:o=>o.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:E.has(r),onChange:()=>Ve(r),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"})}),e.jsx("td",{className:`px-2 py-1 text-center text-xs ${(()=>{const o=M.find(h=>h.numero===String(t.nr_ctapes));return o?ce(o.nome):""})()}`,children:(()=>{const o=M.find(h=>h.numero===String(t.nr_ctapes));return o?`${o.numero} - ${o.nome}`:t.nr_ctapes})()}),e.jsx("td",{className:"px-2 py-1 text-center text-[#000638] font-medium",children:te(t.dt_lancto)}),e.jsx("td",{className:"px-2 py-1 text-gray-800",children:e.jsx("div",{className:"max-w-xs truncate",title:t.ds_histbco,children:t.ds_histbco})}),e.jsx("td",{className:"px-2 py-1 text-center",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${t.tp_operbco==="D"?"bg-red-100 text-red-800":t.tp_operbco==="C"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:t.tp_operbco})}),e.jsx("td",{className:`px-2 py-1 text-right font-bold ${t.tp_operbco==="D"?"text-red-600":t.tp_operbco==="C"?"text-green-600":"text-gray-600"}`,children:(l=t.vl_lancto)==null?void 0:l.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-2 py-1 text-center",children:t.dt_conciliacao?e.jsx("span",{className:"text-green-600 font-medium",children:te(t.dt_conciliacao)}):e.jsx("span",{className:"text-red-500 font-medium",children:"Pendente"})})]},r)})})]})}),E.size>0&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg mx-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[E.size," linha",E.size>1?"s":""," ","selecionada",E.size>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-800",children:["Total:"," ",Array.from(E).reduce((t,s)=>{var r;return t+(((r=c[s])==null?void 0:r.vl_lancto)||0)},0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})]}),e.jsx("button",{onClick:ue,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Limpar seleção"})]})})]}):e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500 text-lg mb-2",children:'Clique em "Filtrar" para carregar as informações'}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Selecione o período e as contas desejadas"})]})})}),k>1&&e.jsx("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:["Página ",y," de ",k]}),e.jsxs("span",{className:"text-gray-500",children:[c.length," registros • ",S," por página"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>J(1),disabled:y===1||m,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Primeira"}),e.jsx("button",{onClick:()=>J(y-1),disabled:y===1||m,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Anterior"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const t=[];let r=Math.max(1,y-Math.floor(2.5)),l=Math.min(k,r+5-1);l-r+1<5&&(r=Math.max(1,l-5+1));for(let o=r;o<=l;o++)t.push(e.jsx("button",{onClick:()=>J(o),disabled:m,className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${y===o?"bg-[#000638] text-white border border-[#000638]":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:o},o));return t})()}),e.jsx("button",{onClick:()=>J(y+1),disabled:y===k||m,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Próxima"}),e.jsx("button",{onClick:()=>J(k),disabled:y===k||m,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Última"})]})]})})]}),e.jsx(Xe,{dados:qe,dadosCompletos:p,loading:H,erro:X,expandTabela:D,setExpandTabela:u,contas:M,corConta:ce,currentPage:ie,totalPages:Ie,totalRegistros:se.length,onPageChange:$e,pageSize:S})]}),Le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:le.title}),e.jsx("button",{onClick:ye,className:"text-gray-500 hover:text-gray-700 text-xl font-bold",children:"×"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:le.description}),e.jsx("div",{className:"bg-gray-100 p-3 rounded",children:e.jsx("p",{className:"text-xs text-gray-700 font-mono",children:le.calculation})})]}),e.jsx("button",{onClick:ye,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors text-sm font-medium",children:"Fechar"})]})})]})};export{xt as default};
