import{r as n,j as e,S as ge,L as ze}from"./index-a2563983.js";import{F as je}from"./FiltroEmpresa-724027b5.js";import{m as Ne}from"./ArrowsClockwise.es-cccb614c.js";import{m as ye}from"./CurrencyDollar.es-0edca053.js";import{u as Ue}from"./useApiClient-0bf86fc1.js";import{M as Ze}from"./Modal-8500ef4b.js";import{R as $,P as _e,a as Se,C as we,L as J,T,B as Ae,b as Ce,X as Re,Y as Me,c as L}from"./PieChart-2e5dc4ea.js";import"./Button-3b4dd265.js";const Ke=n.memo(()=>{const S=Ue(),O=new Date,De=new Date(O.getFullYear(),O.getMonth(),1),Y=a=>a.toISOString().split("T")[0],[b,G]=n.useState(Y(De)),[p,H]=n.useState(Y(O)),[y,X]=n.useState([]),[w,W]=n.useState(!1),[F,V]=n.useState(""),[g,ee]=n.useState([]),[C,ae]=n.useState([]),[j,se]=n.useState([]),[R,te]=n.useState([]),[Qe,re]=n.useState([]),[Ee,oe]=n.useState(0),[P,de]=n.useState([]),[x,le]=n.useState({varejo:0,multimarcas:0,franquiasRevenda:0,matriz:0,diversos:0}),[v,M]=n.useState(null),[qe,Fe]=n.useState([]),h=n.useMemo(()=>{const a=t=>Array.isArray(t)?t.reduce((i,c)=>{const _=(Number(c.valor_com_desconto_saida)||0)-(Number(c.valor_com_desconto_entrada)||0);return i+_},0):0;return{varejo:a(g),franquia:a(C),multimarcas:a(j),revenda:a(R)}},[g,C,j,R]),N=n.useMemo(()=>{const a=t=>Array.isArray(t)?t.reduce((i,c)=>{const _=(Number(c.valor_sem_desconto)||0)-(Number(c.valor_com_desconto)||0);return i+_},0):0;return{varejo:a(g),franquia:a(C),multimarcas:a(j),revenda:a(R)}},[g,C,j,R]),m=n.useMemo(()=>{const a=t=>Array.isArray(t)?t.reduce((i,c)=>(i.liquidas+=Number(c.valor_com_desconto_entrada)||0,i.brutas+=Number(c.valor_sem_desconto_entrada)||0,i),{liquidas:0,brutas:0}):{liquidas:0,brutas:0};return{varejo:a(g),franquia:a(C),multimarcas:a(j),revenda:a(R)}},[g,C,j,R]),ie=n.useMemo(()=>{if(!Array.isArray(g))return[];const a=new Map;return g.forEach(t=>{const i=t.nm_grupoempresa||`Empresa ${t.cd_grupoempresa}`,c=(Number(t.valor_com_desconto_saida)||0)-(Number(t.valor_com_desconto_entrada)||0);a.has(i)||a.set(i,0),a.set(i,a.get(i)+c)}),Array.from(a.entries()).map(([t,i])=>({name:t,value:Math.max(0,i)}))},[g]),ne=n.useMemo(()=>{if(!Array.isArray(j))return[];const a=new Map;return j.forEach(t=>{const i=t.nm_grupoempresa||`Empresa ${t.cd_grupoempresa}`,c=(Number(t.valor_com_desconto_saida)||0)-(Number(t.valor_com_desconto_entrada)||0);a.has(i)||a.set(i,0),a.set(i,a.get(i)+c)}),Array.from(a.entries()).map(([t,i])=>({name:t,value:Math.max(0,i)}))},[j]),I=["#16a34a","#1d4ed8","#7e22ce","#ea580c"],d=n.useCallback(a=>(Number(a)||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),[]);n.useMemo(()=>[{name:"Varejo",value:Math.max(0,x.varejo)},{name:"Multimarcas",value:Math.max(0,x.multimarcas)},{name:"Franquias + Revenda",value:Math.max(0,x.franquiasRevenda)},{name:"Diversos",value:Math.max(0,x.diversos)}],[x]);const Ve=n.useMemo(()=>[{canal:"VAREJO",receitaLiquida:Math.max(0,h.varejo),valorBruto:Math.max(0,N.varejo),contasPagar:Math.max(0,x.varejo)},{canal:"MULTIMARCAS",receitaLiquida:Math.max(0,h.multimarcas),valorBruto:Math.max(0,N.multimarcas),contasPagar:Math.max(0,x.multimarcas)},{canal:"FRANQUIAS + REVENDA",receitaLiquida:Math.max(0,h.franquia+h.revenda),valorBruto:Math.max(0,N.franquia+N.revenda),contasPagar:Math.max(0,x.franquiasRevenda)}],[h,N,x]),ce=n.useCallback(async a=>{var i;if((i=a==null?void 0:a.preventDefault)==null||i.call(a),V(""),!b||!p){V("Selecione o período.");return}const t=(y||[]).filter(c=>c.cd_empresa).map(c=>c.cd_empresa);if(t.length===0){V("Selecione pelo menos uma empresa.");return}W(!0);try{const c={dataInicio:b,dataFim:p},_={dataInicio:b,dataFim:p},f={dataInicio:b,dataFim:p},Ie={dataInicio:b,dataFim:p},$e={dt_inicio:b,dt_fim:p,cd_empresa:t},[B,k,z,U,Z]=await Promise.all([S.sales.faturamentoVarejo(c),S.sales.faturamentoFranquias(_),S.sales.faturamentoMtm(f),S.sales.faturamentoRevenda(Ie),S.financial.contasPagar($e)]);ee((B==null?void 0:B.data)||[]),ae((k==null?void 0:k.data)||[]),se((z==null?void 0:z.data)||[]),te((U==null?void 0:U.data)||[]);const me=(Z==null?void 0:Z.data)||[];re(me);const Te=r=>{const o=new Map;return r.forEach(s=>{const u=`${s.cd_fornecedor}|${s.nm_fornecedor}|${s.nr_duplicata}|${s.nr_parcela}|${s.cd_empresa}|${s.dt_emissao}|${s.dt_vencimento}|${s.dt_entrada}|${s.dt_liq}|${s.tp_situacao}|${s.tp_previsaoreal}|${s.vl_duplicata}|${s.vl_juros}|${s.vl_acrescimo}|${s.vl_desconto}|${s.vl_pago}`;o.has(u)||o.set(u,{item:s,observacoes:[],situacoes:[],datasEmissao:[],datasVencimento:[],datasEntrada:[],datasLiquidacao:[],rateios:[],quantidade:0});const l=o.get(u);l.quantidade+=1,s.vl_rateio&&!l.rateios.includes(s.vl_rateio)&&l.rateios.push(s.vl_rateio),s.ds_observacao&&!l.observacoes.includes(s.ds_observacao)&&l.observacoes.push(s.ds_observacao),s.tp_situacao&&!l.situacoes.includes(s.tp_situacao)&&l.situacoes.push(s.tp_situacao),s.tp_previsaoreal&&!l.previsoes&&(l.previsoes=[]),s.tp_previsaoreal&&!l.previsoes.includes(s.tp_previsaoreal)&&l.previsoes.push(s.tp_previsaoreal),s.dt_emissao&&!l.datasEmissao.includes(s.dt_emissao)&&l.datasEmissao.push(s.dt_emissao),s.dt_vencimento&&!l.datasVencimento.includes(s.dt_vencimento)&&l.datasVencimento.push(s.dt_vencimento),s.dt_entrada&&!l.datasEntrada.includes(s.dt_entrada)&&l.datasEntrada.push(s.dt_entrada),s.dt_liq&&!l.datasLiquidacao.includes(s.dt_liq)&&l.datasLiquidacao.push(s.dt_liq)}),Array.from(o.values()).map(s=>{let u=s.item.tp_situacao;return s.situacoes&&s.situacoes.length>1&&(s.situacoes.includes("C")?u="C":s.situacoes.includes("N")&&(u="N")),{...s,item:{...s.item,tp_situacao:u}}})},K=r=>{if(!r)return null;try{const[o]=String(r).split("T"),[s,u,l]=o.split("-").map(A=>parseInt(A,10));return!s||!u||!l?null:new Date(s,u-1,l)}catch{return null}},Le=(me||[]).filter(r=>(r.tp_situacao||"").toUpperCase()==="N"),Oe=K(b),Pe=K(p),Be=Le.filter(r=>{const o=K(r.dt_vencimento);return o?o>=Oe&&o<=Pe:!1}),Q=Te(Be),ke=Q.reduce((r,o)=>{var s;return r+(parseFloat((s=o==null?void 0:o.item)==null?void 0:s.vl_duplicata)||0)},0);oe(ke);const D=new Map;Q.forEach(r=>{var A,q,fe;const o=((A=r==null?void 0:r.item)==null?void 0:A.cd_ccusto)||"S/CC",s=((q=r==null?void 0:r.item)==null?void 0:q.ds_ccusto)||"",u=parseFloat((fe=r==null?void 0:r.item)==null?void 0:fe.vl_duplicata)||0,l=D.get(o)||{code:o,name:s,valor:0};l.valor+=u,!l.name&&s&&(l.name=s),D.set(o,l)});try{const r=Array.from(D.keys()).filter(o=>o&&o!=="S/CC");if(r.length>0){const o=await S.financial.centrocusto({cd_ccusto:r}),s=Array.isArray(o==null?void 0:o.data)?o.data:[],u=new Map(s.map(l=>[String(l.cd_ccusto),l.ds_ccusto]));for(const[l,A]of D.entries()){const q=u.get(String(l));q&&(A.name=q,D.set(l,A))}}}catch(r){console.warn("Falha ao buscar centros de custo:",r)}const xe=Array.from(D.values()).map(r=>({code:String(r.code),name:r.name,label:r.name?`${r.code} - ${r.name}`:String(r.code),valor:r.valor})).sort((r,o)=>o.valor-r.valor);de(xe);const ue=new Set(["2","3","4","6","7","8","9","12","13","14","18"]),he=new Set(["5","15","16","19","30","31","32","33","34","35","36","37"]),ve=new Set(["17"]),be=new Set(["26","20","28","22","27","1","23","24","29","25","10"]),E={varejo:0,multimarcas:0,franquiasRevenda:0,matriz:0,diversos:0};xe.forEach(r=>{const o=(r.code||"").trim();ue.has(o)?E.franquiasRevenda+=r.valor:he.has(o)?E.varejo+=r.valor:ve.has(o)?E.multimarcas+=r.valor:be.has(o)?E.matriz+=r.valor:E.diversos+=r.valor}),le(E);const pe=Q.filter(r=>{var s;const o=(((s=r==null?void 0:r.item)==null?void 0:s.cd_ccusto)||"").trim();return!ue.has(o)&&!he.has(o)&&!ve.has(o)&&!be.has(o)}).map(r=>r.item);Fe(pe),console.log("Dados Diversos CP:",pe)}catch(c){console.error("Erro ao buscar dados por canal:",c),V("Erro ao buscar dados. Tente novamente."),ee([]),ae([]),se([]),te([]),re([]),oe(0),de([]),le({varejo:0,multimarcas:0,franquiasRevenda:0,matriz:0,diversos:0})}finally{W(!1)}},[S,b,p,y]);return w?e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[e.jsx(ge,{title:"Financeiro por Canal",description:"Dashboard Financeiro por Canal"}),e.jsx("h1",{className:"text-2xl font-bold text-[#000638] mb-4",children:"Financeiro por Canal"}),e.jsxs("form",{onSubmit:ce,className:"bg-white p-6 rounded-2xl shadow-lg border border-[#000638]/10 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ye,{size:20,className:"text-[#000638]"}),e.jsx("span",{className:"text-lg font-bold text-[#000638]",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(je,{empresasSelecionadas:y,onSelectEmpresas:X})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Inicial"}),e.jsx("input",{type:"date",value:b,onChange:a=>G(a.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Final"}),e.jsx("input",{type:"date",value:p,onChange:a=>H(a.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638]"})]}),e.jsx("div",{className:"Flex items-end",children:e.jsx("button",{type:"submit",disabled:w||(y??[]).length===0,className:`flex items-end gap-2 px-5 py-2 rounded-lg font-bold text-sm shadow-md transition-all ${w||(y??[]).length===0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-[#000638] hover:bg-[#fe0000] text-white"}`,children:w?e.jsx(e.Fragment,{children:e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{size:18})," Buscar"]})})})]}),F&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-center text-sm",children:F})]}),e.jsx("div",{className:"flex justify-center items-center py-32",children:e.jsx(ze,{size:"lg",text:"Carregando dados financeiros..."})})]}):e.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[e.jsx(ge,{title:"Financeiro por Canal",description:"Dashboard Financeiro por Canal"}),e.jsx("h1",{className:"text-2xl font-bold text-[#000638] mb-4",children:"Financeiro por Canal"}),e.jsxs("form",{onSubmit:ce,className:"bg-white p-6 rounded-2xl shadow-lg border border-[#000638]/10 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ye,{size:20,className:"text-[#000638]"}),e.jsx("span",{className:"text-lg font-bold text-[#000638]",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(je,{empresasSelecionadas:y,onSelectEmpresas:X})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Inicial"}),e.jsx("input",{type:"date",value:b,onChange:a=>G(a.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Final"}),e.jsx("input",{type:"date",value:p,onChange:a=>H(a.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638]"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{type:"submit",disabled:w||(y??[]).length===0,className:`flex items-center gap-2 px-5 py-2 rounded-lg font-bold text-sm shadow-md transition-all ${w||(y??[]).length===0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-[#000638] hover:bg-[#fe0000] text-white"}`,children:w?e.jsx(e.Fragment,{children:e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{size:18})," Buscar"]})})})]}),F&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-center text-sm",children:F})]}),e.jsx("div",{className:"mb-3",children:e.jsx("h2",{className:"text-sm font-bold tracking-wide text-gray-700",children:"RECEITA LÍQUIDA (Saída - Entrada)"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Varejo"}),e.jsx("div",{className:"text-2xl font-extrabold text-green-700 mt-2",children:d(h.varejo)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Devoluções: ",d(m.varejo.liquidas)]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Franquias"}),e.jsx("div",{className:"text-2xl font-extrabold text-blue-700 mt-2",children:d(h.franquia)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Devoluções: ",d(m.franquia.liquidas)]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Multimarcas"}),e.jsx("div",{className:"text-2xl font-extrabold text-purple-700 mt-2",children:d(h.multimarcas)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Devoluções: ",d(m.multimarcas.liquidas)]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Revenda"}),e.jsx("div",{className:"text-2xl font-extrabold text-orange-700 mt-2",children:d(h.revenda)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Devoluções: ",d(m.revenda.liquidas)]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Varejo - Receita por Empresa"}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Distribuição da receita líquida por empresa (Varejo)"}),e.jsx("div",{style:{width:"100%",height:360},children:e.jsx($,{children:e.jsxs(_e,{children:[e.jsx(Se,{data:ie,dataKey:"value",nameKey:"name",outerRadius:110,label:({name:a,value:t})=>`${a}: ${d(t)}`,children:ie.map((a,t)=>e.jsx(we,{fill:I[t%I.length]},`cell-varejo-${t}`))}),e.jsx(J,{formatter:(a,t)=>`${a}`}),e.jsx(T,{formatter:a=>d(a)})]})})})]})]}),e.jsx("div",{className:"mt-8 mb-3",children:e.jsx("h2",{className:"text-sm font-bold tracking-wide text-gray-700",children:"RESUMO CONSOLIDADO"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-blue-50 to-blue-100 border border-blue-200 p-6 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-blue-900 mb-3",children:"Total Receita Líquida"}),e.jsx("div",{className:"text-3xl font-extrabold text-blue-700",children:d(h.varejo+h.franquia+h.multimarcas+h.revenda)}),e.jsx("div",{className:"text-xs text-blue-600 mt-2",children:"Saídas - Entradas (com desconto)"})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-green-50 to-green-100 border border-green-200 p-6 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-green-900 mb-3",children:"Total Descontos Concedidos"}),e.jsx("div",{className:"text-3xl font-extrabold text-green-700",children:d(N.varejo+N.franquia+N.multimarcas+N.revenda)}),e.jsx("div",{className:"text-xs text-green-600 mt-2",children:"Valor sem desconto - Valor com desconto"})]}),e.jsxs("div",{className:"rounded-xl bg-gradient-to-br from-red-50 to-red-100 border border-red-200 p-6 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-red-900 mb-3",children:"Total Devoluções Líquidas"}),e.jsx("div",{className:"text-3xl font-extrabold text-red-700",children:d(m.varejo.liquidas+m.franquia.liquidas+m.multimarcas.liquidas+m.revenda.liquidas)}),e.jsx("div",{className:"text-xs text-red-600 mt-2",children:"Entradas com desconto (valor negativo)"})]})]}),e.jsx("div",{className:"mt-8 mb-3",children:e.jsx("h2",{className:"text-sm font-bold tracking-wide text-gray-700",children:"DEVOLUÇÕES POR CANAL"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"rounded-xl bg-white border border-red-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Varejo"}),e.jsx("div",{className:"text-xl font-bold text-red-600 mt-2",children:d(m.varejo.liquidas)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Brutas: ",d(m.varejo.brutas)]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-red-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Franquias"}),e.jsx("div",{className:"text-xl font-bold text-red-600 mt-2",children:d(m.franquia.liquidas)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Brutas: ",d(m.franquia.brutas)]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-red-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Multimarcas"}),e.jsx("div",{className:"text-xl font-bold text-red-600 mt-2",children:d(m.multimarcas.liquidas)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Brutas: ",d(m.multimarcas.brutas)]})]}),e.jsxs("div",{className:"rounded-xl bg-white border border-red-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Revenda"}),e.jsx("div",{className:"text-xl font-bold text-red-600 mt-2",children:d(m.revenda.liquidas)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Brutas: ",d(m.revenda.brutas)]})]})]}),e.jsx("div",{className:"mt-8 mb-3",children:e.jsx("h2",{className:"text-sm font-bold tracking-wide text-gray-700",children:"CONTAS A PAGAR POR CANAL"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("button",{onClick:()=>M("VAREJO"),className:"text-left rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"VAREJO"}),e.jsx("div",{className:"text-2xl font-extrabold text-green-700 mt-2",children:d(x.varejo)})]}),e.jsxs("button",{onClick:()=>M("MULTIMARCAS"),className:"text-left rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"MULTIMARCAS"}),e.jsx("div",{className:"text-2xl font-extrabold text-purple-700 mt-2",children:d(x.multimarcas)})]}),e.jsxs("button",{onClick:()=>M("FRANQUIAS_REVENDA"),className:"text-left rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"FRANQUIAS + REVENDA"}),e.jsx("div",{className:"text-2xl font-extrabold text-blue-700 mt-2",children:d(x.franquiasRevenda)})]}),e.jsxs("button",{onClick:()=>{M("MATRIZ"),console.log("Modal Aberto (Matriz):","MATRIZ")},className:"text-left rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"MATRIZ"}),e.jsx("div",{className:"text-2xl font-extrabold text-indigo-700 mt-2",children:d(x.matriz)})]}),e.jsxs("button",{onClick:()=>{M("DIVERSOS"),console.log("Modal Aberto (Diversos):","DIVERSOS")},className:"text-left rounded-xl bg-white border border-gray-200 p-4 shadow-md cursor-pointer",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"DIVERSOS"}),e.jsx("div",{className:"text-2xl font-extrabold text-orange-700 mt-2",children:d(x.diversos)})]}),e.jsxs("div",{className:"text-left rounded-xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-600",children:"Valor Total (R$)"}),e.jsx("div",{className:"text-2xl font-extrabold text-green-700 mt-2",children:d(Ee)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Mesmo cálculo e agrupamento da página Contas a Pagar"})]})]}),e.jsxs("div",{className:"rounded-2xl bg-white border border-gray-200 p-4 shadow-md",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Multimarcas - Receita por Empresa"}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Distribuição da receita líquida por empresa (Multimarcas)"}),e.jsx("div",{style:{width:"100%",height:360},children:e.jsx($,{children:e.jsxs(_e,{children:[e.jsx(Se,{data:ne,dataKey:"value",nameKey:"name",outerRadius:110,label:({name:a,value:t})=>`${a}: ${d(t)}`,children:ne.map((a,t)=>e.jsx(we,{fill:I[t%I.length]},`cell-multimarcas-${t}`))}),e.jsx(J,{formatter:(a,t)=>`${a}`}),e.jsx(T,{formatter:a=>d(a)})]})})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-gray-200 p-8 shadow-md",children:[e.jsx("div",{className:"text-base font-semibold text-gray-700 mb-4 text-center",children:"Detalhamento MATRIZ - Centros de Custo"}),e.jsx("div",{style:{width:"100%",height:400,padding:"20px"},children:e.jsx($,{children:e.jsxs(Ae,{data:P.filter(a=>new Set(["26","20","28","22","27","1","23","24","29","25","10"]).has(a.code)).sort((a,t)=>t.valor-a.valor),margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(Ce,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"label",angle:-45,textAnchor:"end",height:80,fontSize:11}),e.jsx(Me,{tickFormatter:a=>d(a),fontSize:11}),e.jsx(T,{formatter:a=>d(a)}),e.jsx(L,{dataKey:"valor",name:"Valor (R$)",fill:"#6366f1",children:P.filter(a=>new Set(["26","20","28","22","27","1","23","24","29","25","10"]).has(a.code)).map((a,t)=>e.jsx("text",{x:a.valor>0?a.valor:0,y:a.valor>0?a.valor:0,textAnchor:"middle",fill:"#6366f1",fontSize:"9",children:d(a.valor)}))})]})})})]})}),e.jsx("div",{className:"mt-8",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-gray-200 p-8 shadow-md",children:[e.jsx("div",{className:"text-base font-semibold text-gray-700 mb-4 text-center",children:"Comparativo: Receita Líquida vs Valor Bruto vs Contas a Pagar por Canal"}),e.jsx("div",{style:{width:"100%",height:400,padding:"20px"},children:e.jsx($,{children:e.jsxs(Ae,{data:Ve,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(Ce,{strokeDasharray:"3 3"}),e.jsx(Re,{dataKey:"canal",fontSize:11}),e.jsx(Me,{tickFormatter:a=>d(a),fontSize:11}),e.jsx(T,{formatter:a=>d(a)}),e.jsx(J,{fontSize:11}),e.jsx(L,{dataKey:"receitaLiquida",name:"Receita Líquida",fill:"#1d4ed8"}),e.jsx(L,{dataKey:"valorBruto",name:"Valor Bruto (Descontos)",fill:"#16a34a"}),e.jsx(L,{dataKey:"contasPagar",name:"Contas a Pagar",fill:"#dc2626"})]})})})]})}),e.jsx(Ze,{isOpen:!!v,onClose:()=>M(null),title:v==="VAREJO"?"Varejo":v==="MULTIMARCAS"?"Multimarcas":v==="FRANQUIAS_REVENDA"?"Franquias + Revenda":v==="MATRIZ"?"Matriz":v==="DIVERSOS"?"Diversos":"",size:"4xl",children:e.jsx("div",{className:"overflow-x-auto",children:v==="DIVERSOS"?e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#000638] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Duplicata"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Fornecedor"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Valor"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Vencimento"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Situação"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:qe.map((a,t)=>e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900",children:a.nr_duplicata}),e.jsx("td",{className:"px-3 py-2 text-gray-900",children:a.nm_fornecedor}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:d(a.vl_duplicata)}),e.jsx("td",{className:"px-3 py-2 text-gray-900",children:new Date(a.dt_vencimento).toLocaleDateString("pt-BR")}),e.jsx("td",{className:"px-3 py-2 text-gray-900",children:a.tp_situacao})]},`${a.nr_duplicata}-${t}`))})]}):e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-[#000638] text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Código CC"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Centro de Custo"}),e.jsx("th",{className:"px-3 py-2 text-right",children:"Valor"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:P.filter(a=>{const t=new Set(["2","3","4","6","7","8","9","12","13","14","18"]),i=new Set(["5","15","16","19","30","31","32","33","34","35","36","37"]),c=new Set(["17"]),_=new Set(["26","20","28","22","27","1","23","24","29","25","10"]),f=(a.code||"").trim();return v==="FRANQUIAS_REVENDA"?t.has(f):v==="VAREJO"?i.has(f):v==="MULTIMARCAS"?c.has(f):v==="MATRIZ"?_.has(f):v==="DIVERSOS"?!t.has(f)&&!i.has(f)&&!c.has(f)&&!_.has(f):!0}).map((a,t)=>e.jsxs("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 text-gray-900",children:a.code}),e.jsx("td",{className:"px-3 py-2 text-gray-900",children:a.name||"-"}),e.jsx("td",{className:"px-3 py-2 text-right font-semibold",children:d(a.valor)})]},`${a.code}-${t}`))})]})})})]})});Ke.displayName="FinanceiroPorCanal";export{Ke as default};
