import{r as s,h as $,f as Z,u as ea,j as e,P as ta,v as se,q as Ie,g as aa,k as Re,d as sa,b as la,L as ra}from"./index-a2563983.js";import{F as oa,a as na,p as ca}from"./FiltroClientes-5e02171e.js";import{u as ia}from"./useApiClient-0bf86fc1.js";import{N as da}from"./Notification-120d2688.js";import{C as b,a as j,b as v,c as f,d as y}from"./cards-fd94db0b.js";import{C as xa,a as ma,L as ha,B as ua,p as pa,b as ga,c as Aa,A as Na,d as ke}from"./index-d0e9a633.js";import{s as qe}from"./CircleNotch.es-295869f9.js";import{n as ze}from"./Clock.es-5bd0a93a.js";import{m as Je}from"./CurrencyDollar.es-0edca053.js";import{c as Ve}from"./Handshake.es-48d6d235.js";import{c as le}from"./Warning.es-51a03ee6.js";import"./Info.es-1c589a57.js";import"./XCircle.es-fcbde856.js";const ba=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M120,128a16,16,0,1,1-16-16A16,16,0,0,1,120,128Zm32-16a16,16,0,1,0,16,16A16,16,0,0,0,152,112Zm84,16A108,108,0,0,1,78.77,224.15L46.34,235A20,20,0,0,1,21,209.66l10.81-32.43A108,108,0,1,1,236,128Zm-24,0A84,84,0,1,0,55.27,170.06a12,12,0,0,1,1,9.81l-9.93,29.79,29.79-9.93a12.1,12.1,0,0,1,3.8-.62,12,12,0,0,1,6,1.62A84,84,0,0,0,212,128Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M224,128A96,96,0,0,1,79.93,211.11h0L42.54,223.58a8,8,0,0,1-10.12-10.12l12.47-37.39h0A96,96,0,1,1,224,128Z",opacity:"0.2"}),s.createElement("path",{d:"M128,24A104,104,0,0,0,36.18,176.88L24.83,210.93a16,16,0,0,0,20.24,20.24l34.05-11.35A104,104,0,1,0,128,24Zm0,192a87.87,87.87,0,0,1-44.06-11.81,8,8,0,0,0-4-1.08,7.85,7.85,0,0,0-2.53.42L40,216,52.47,178.6a8,8,0,0,0-.66-6.54A88,88,0,1,1,128,216Zm12-88a12,12,0,1,1-12-12A12,12,0,0,1,140,128Zm-44,0a12,12,0,1,1-12-12A12,12,0,0,1,96,128Zm88,0a12,12,0,1,1-12-12A12,12,0,0,1,184,128Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,24A104,104,0,0,0,36.18,176.88L24.83,210.93a16,16,0,0,0,20.24,20.24l34.05-11.35A104,104,0,1,0,128,24ZM84,140a12,12,0,1,1,12-12A12,12,0,0,1,84,140Zm44,0a12,12,0,1,1,12-12A12,12,0,0,1,128,140Zm44,0a12,12,0,1,1,12-12A12,12,0,0,1,172,140Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M138,128a10,10,0,1,1-10-10A10,10,0,0,1,138,128ZM84,118a10,10,0,1,0,10,10A10,10,0,0,0,84,118Zm88,0a10,10,0,1,0,10,10A10,10,0,0,0,172,118Zm58,10A102,102,0,0,1,79.31,217.65L44.44,229.27a14,14,0,0,1-17.71-17.71l11.62-34.87A102,102,0,1,1,230,128Zm-12,0A90,90,0,1,0,50.08,173.06a6,6,0,0,1,.5,4.91L38.12,215.35a2,2,0,0,0,2.53,2.53L78,205.42a6.2,6.2,0,0,1,1.9-.31,6.09,6.09,0,0,1,3,.81A90,90,0,0,0,218,128Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM84,116a12,12,0,1,0,12,12A12,12,0,0,0,84,116Zm88,0a12,12,0,1,0,12,12A12,12,0,0,0,172,116Zm60,12A104,104,0,0,1,79.12,219.82L45.07,231.17a16,16,0,0,1-20.24-20.24l11.35-34.05A104,104,0,1,1,232,128Zm-16,0A88,88,0,1,0,51.81,172.06a8,8,0,0,1,.66,6.54L40,216,77.4,203.53a7.85,7.85,0,0,1,2.53-.42,8,8,0,0,1,4,1.08A88,88,0,0,0,216,128Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M136,128a8,8,0,1,1-8-8A8,8,0,0,1,136,128Zm-52-8a8,8,0,1,0,8,8A8,8,0,0,0,84,120Zm88,0a8,8,0,1,0,8,8A8,8,0,0,0,172,120Zm56,8A100,100,0,0,1,79.5,215.47l-35.69,11.9a12,12,0,0,1-15.18-15.18l11.9-35.69A100,100,0,1,1,228,128Zm-8,0A92,92,0,1,0,48.35,174.07a4,4,0,0,1,.33,3.27L36.22,214.72a4,4,0,0,0,5.06,5.06l37.38-12.46a3.93,3.93,0,0,1,1.27-.21,4.05,4.05,0,0,1,2,.54A92,92,0,0,0,220,128Z"}))]]),fa=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M140,80v41.21l34.17,20.5a12,12,0,1,1-12.34,20.58l-40-24A12,12,0,0,1,116,128V80a12,12,0,0,1,24,0Zm84-28a12,12,0,0,0-12,12v7.37c-4.21-4.67-8.58-9.31-13.29-14.08a100,100,0,1,0-2.07,143.44,12,12,0,0,0-16.48-17.46,76,76,0,1,1,1.53-109.06C187.61,80.2,193,86,198.23,92H184a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V64A12,12,0,0,0,224,52Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"}),s.createElement("path",{d:"M136,80v43.47l36.12,21.67a8,8,0,0,1-8.24,13.72l-40-24A8,8,0,0,1,120,128V80a8,8,0,0,1,16,0Zm88-24a8,8,0,0,0-8,8V82c-6.35-7.36-12.83-14.45-20.12-21.83a96,96,0,1,0-2,137.7,8,8,0,0,0-11-11.64A80,80,0,1,1,184.54,71.4C192.68,79.64,199.81,87.58,207,96H184a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V64A8,8,0,0,0,224,56Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M136,80v43.47l36.12,21.67a8,8,0,0,1-8.24,13.72l-40-24A8,8,0,0,1,120,128V80a8,8,0,0,1,16,0Zm91.06-23.39a8,8,0,0,0-8.72,1.73L206,70.71c-3.23-3.51-6.56-7-10.1-10.59a96,96,0,1,0-2,137.7,8,8,0,0,0-11-11.64A80,80,0,1,1,184.54,71.4c3.54,3.58,6.87,7.1,10.11,10.63L178.34,98.34A8,8,0,0,0,184,112h40a8,8,0,0,0,8-8V64A8,8,0,0,0,227.06,56.61Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M134,80v44.6l37.09,22.25a6,6,0,0,1-6.18,10.3l-40-24A6,6,0,0,1,122,128V80a6,6,0,0,1,12,0Zm90-22a6,6,0,0,0-6,6V87.36c-7.48-8.83-14.94-17.13-23.53-25.83a94,94,0,1,0-1.95,134.83,6,6,0,0,0-8.24-8.72A82,82,0,1,1,186,70c9.24,9.36,17.18,18.3,25.31,28H184a6,6,0,0,0,0,12h40a6,6,0,0,0,6-6V64A6,6,0,0,0,224,58Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M136,80v43.47l36.12,21.67a8,8,0,0,1-8.24,13.72l-40-24A8,8,0,0,1,120,128V80a8,8,0,0,1,16,0Zm88-24a8,8,0,0,0-8,8V82c-6.35-7.36-12.83-14.45-20.12-21.83a96,96,0,1,0-2,137.7,8,8,0,0,0-11-11.64A80,80,0,1,1,184.54,71.4C192.68,79.64,199.81,87.58,207,96H184a8,8,0,0,0,0,16h40a8,8,0,0,0,8-8V64A8,8,0,0,0,224,56Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M132,80v45.74l38.06,22.83a4,4,0,0,1-4.12,6.86l-40-24A4,4,0,0,1,124,128V80a4,4,0,0,1,8,0Zm92-20a4,4,0,0,0-4,4V92.85C211.33,82.46,203,73,193.05,63a92,92,0,1,0-1.9,132,4,4,0,0,0-5.5-5.82,84,84,0,1,1,1.73-120.5C197.7,79,206.39,89,215.53,100H184a4,4,0,0,0,0,8h40a4,4,0,0,0,4-4V64A4,4,0,0,0,224,60Z"}))]]),ja=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M246.14,113.86l-16-16a20,20,0,0,0-23.06-3.75l-45.2-45.2a20,20,0,0,0-3.74-23.06l-16-16a20,20,0,0,0-28.28,0l-64,64a20,20,0,0,0,0,28.28l16,16a20,20,0,0,0,23,3.79L29.36,181.38a32,32,0,0,0,45.26,45.26L134,167.21a20,20,0,0,0,3.81,22.94l16,16a20,20,0,0,0,28.29,0l64-64a20,20,0,0,0,0-28.29ZM80,98.34,69.64,88,128,29.65,138.34,40ZM57.64,209.67a8,8,0,0,1-11.31-11.32l59.52-59.52,11.31,11.32Zm92.7-60.29-43.72-43.72,39-39,43.72,43.72Zm17.65,37L157.65,176,216,117.66,226.34,128Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M149.66,45.66l-64,64a8,8,0,0,1-11.32,0l-16-16a8,8,0,0,1,0-11.32l64-64a8,8,0,0,1,11.32,0l16,16A8,8,0,0,1,149.66,45.66Zm88,76.68-16-16a8,8,0,0,0-11.32,0l-64,64a8,8,0,0,0,0,11.32l16,16a8,8,0,0,0,11.32,0l64-64A8,8,0,0,0,237.66,122.34Z",opacity:"0.2"}),s.createElement("path",{d:"M243.32,116.69l-16-16a16,16,0,0,0-20.84-1.53L156.84,49.52a16,16,0,0,0-1.52-20.84l-16-16a16,16,0,0,0-22.63,0l-64,64a16,16,0,0,0,0,22.63l16,16a16,16,0,0,0,20.83,1.52L96.69,124,31.31,189.38A25,25,0,0,0,66.63,224.7L132,159.32l7.17,7.16a16,16,0,0,0,1.52,20.84l16,16a16,16,0,0,0,22.63,0l64-64A16,16,0,0,0,243.32,116.69ZM80,104,64,88l64-64,16,16ZM55.32,213.38a9,9,0,0,1-12.69,0,9,9,0,0,1,0-12.68L108,135.32,120.69,148ZM101,105.66,145.66,61,195,110.34,150.35,155ZM168,192l-16-16,4-4h0l56-56h0l4-4,16,16Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M52.69,99.31a16,16,0,0,1,0-22.63l64-64a16,16,0,0,1,22.63,22.63l-64,64a16,16,0,0,1-22.63,0Zm190.63,17.37a16,16,0,0,0-22.63,0l-64,64a16,16,0,0,0,0,22.63h0a16,16,0,0,0,22.63,0l64-64A16,16,0,0,0,243.32,116.68Zm-35.11-15.8L155.12,47.79a4,4,0,0,0-5.66,0L87.8,109.45a4,4,0,0,0,0,5.66L103,130.34,28.69,204.69a16,16,0,0,0,22.62,22.62L125.66,153l15.23,15.23a4,4,0,0,0,5.66,0l61.66-61.66A4,4,0,0,0,208.21,100.88Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M241.91,118.1l-16-16a14,14,0,0,0-19.55-.23L154.13,49.64a14,14,0,0,0-.23-19.55l-16-16a14,14,0,0,0-19.8,0l-64,64a14,14,0,0,0,0,19.8l16,16a14,14,0,0,0,19.55.23L99.52,124,32.73,190.79a23,23,0,0,0,32.48,32.49L132,156.49l9.87,9.87a14,14,0,0,0,.23,19.55l16,16a14,14,0,0,0,19.8,0l64-64A14,14,0,0,0,241.91,118.1Zm-91.56,39.76-52.21-52.2,47.52-47.52,52.2,52.2ZM78.59,105.41l-16-16a2,2,0,0,1,0-2.83l64-64a2,2,0,0,1,2.83,0l16,16a2,2,0,0,1,0,2.83l-64,64A2,2,0,0,1,78.59,105.41ZM56.73,214.8a11,11,0,0,1-15.52-15.52L108,132.49,123.52,148Zm176.69-85.38-64,64a2,2,0,0,1-2.83,0l-16-16a2,2,0,0,1,0-2.83l64-64a2,2,0,0,1,2.83,0l16,16A2,2,0,0,1,233.42,129.42Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M243.32,116.69l-16-16a16,16,0,0,0-20.84-1.53L156.84,49.52a16,16,0,0,0-1.52-20.84l-16-16a16,16,0,0,0-22.63,0l-64,64a16,16,0,0,0,0,22.63l16,16a16,16,0,0,0,20.83,1.52L96.69,124,31.31,189.38A25,25,0,0,0,66.63,224.7L132,159.32l7.17,7.16a16,16,0,0,0,1.52,20.84l16,16a16,16,0,0,0,22.63,0l64-64A16,16,0,0,0,243.32,116.69ZM80,104,64,88l64-64,16,16ZM55.32,213.38a9,9,0,0,1-12.69,0,9,9,0,0,1,0-12.68L108,135.32,120.69,148ZM101,105.66,145.66,61,195,110.34,150.35,155ZM168,192l-16-16,4-4h0l56-56h0l4-4,16,16Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M240.49,119.52l-16-16a12,12,0,0,0-17,0l-1.17,1.17-55-55,1.18-1.17a12,12,0,0,0,0-17l-16-16a12,12,0,0,0-17,0l-64,64a12,12,0,0,0,0,17l16,16a12,12,0,0,0,17,0l1.17-1.18L102.34,124l-68.2,68.21A21,21,0,0,0,63.8,221.87L132,153.66l12.69,12.69-1.18,1.17a12,12,0,0,0,0,17l16,16a12,12,0,0,0,17,0l64-64a12,12,0,0,0,0-17ZM77.17,106.83l-16-16a4,4,0,0,1,0-5.66l64-64a4,4,0,0,1,5.66,0l16,16a4,4,0,0,1,0,5.65l-64,64A4,4,0,0,1,77.17,106.83Zm-19,109.38A13,13,0,1,1,39.8,197.87L108,129.66,126.34,148ZM95.31,105.66l50.35-50.35,55,55-50.35,50.35Zm139.52,25.17-64,64a4,4,0,0,1-5.66,0l-16-16a4,4,0,0,1,0-5.65l64-64a4,4,0,0,1,5.66,0l16,16a4,4,0,0,1,0,5.66Z"}))]]),va=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M178.39,158c-11,19.06-29.39,30-50.39,30s-39.36-10.93-50.39-30a12,12,0,0,1,20.78-12c3.89,6.73,12.91,18,29.61,18s25.72-11.28,29.61-18a12,12,0,1,1,20.78,12ZM236,128A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128ZM92,124a16,16,0,1,0-16-16A16,16,0,0,0,92,124Zm72-32a16,16,0,1,0,16,16A16,16,0,0,0,164,92Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),s.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM80,108a12,12,0,1,1,12,12A12,12,0,0,1,80,108Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,176,108Zm-1.08,48c-10.29,17.79-27.39,28-46.92,28s-36.63-10.2-46.92-28a8,8,0,1,1,13.84-8c7.47,12.91,19.21,20,33.08,20s25.61-7.1,33.08-20a8,8,0,1,1,13.84,8Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM92,96a12,12,0,1,1-12,12A12,12,0,0,1,92,96Zm82.92,60c-10.29,17.79-27.39,28-46.92,28s-36.63-10.2-46.92-28a8,8,0,1,1,13.84-8c7.47,12.91,19.21,20,33.08,20s25.61-7.1,33.08-20a8,8,0,1,1,13.84,8ZM164,120a12,12,0,1,1,12-12A12,12,0,0,1,164,120Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M173.19,155c-9.92,17.16-26.39,27-45.19,27s-35.27-9.84-45.19-27a6,6,0,0,1,10.38-6c7.84,13.54,20.2,21,34.81,21s27-7.46,34.81-21a6,6,0,1,1,10.38,6ZM230,128A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128ZM92,118a10,10,0,1,0-10-10A10,10,0,0,0,92,118Zm72-20a10,10,0,1,0,10,10A10,10,0,0,0,164,98Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM80,108a12,12,0,1,1,12,12A12,12,0,0,1,80,108Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,176,108Zm-1.07,48c-10.29,17.79-27.4,28-46.93,28s-36.63-10.2-46.92-28a8,8,0,1,1,13.84-8c7.47,12.91,19.21,20,33.08,20s25.61-7.1,33.07-20a8,8,0,0,1,13.86,8Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M171.46,154c-9.55,16.52-25.39,26-43.46,26s-33.91-9.48-43.46-26a4,4,0,0,1,6.92-4c8.21,14.19,21.19,22,36.54,22s28.33-7.81,36.54-22a4,4,0,1,1,6.92,4ZM228,128A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128ZM92,116a8,8,0,1,0-8-8A8,8,0,0,0,92,116Zm72-16a8,8,0,1,0,8,8A8,8,0,0,0,164,100Z"}))]]),$e=s.forwardRef((M,h)=>s.createElement($,{ref:h,...M,weights:ba}));$e.displayName="ChatCircleDotsIcon";const ya=$e,He=s.forwardRef((M,h)=>s.createElement($,{ref:h,...M,weights:fa}));He.displayName="ClockClockwiseIcon";const re=He,Ue=s.forwardRef((M,h)=>s.createElement($,{ref:h,...M,weights:ja}));Ue.displayName="GavelIcon";const Be=Ue,Ge=s.forwardRef((M,h)=>s.createElement($,{ref:h,...M,weights:va}));Ge.displayName="SmileyIcon";const Ca=Ge,Ea=()=>{const[M,h]=s.useState(!1),[F,C]=s.useState(null);return{loading:M,error:F,salvarClassificacao:async u=>{h(!0),C(null);try{const n={cd_cliente:u.cd_cliente,nm_cliente:u.nm_cliente,valor_total:u.valor_total,ds_siglaest:u.ds_siglaest,situacao:u.situacao,feeling:u.feeling||null,status:u.status||null,usuario:u.usuario,data_alteracao:new Date().toISOString()},{data:w,error:O}=await Z.from("classificacoes_inadimplentes").upsert(n,{onConflict:"cd_cliente",ignoreDuplicates:!1}).select();if(O)throw O;return{success:!0,data:w}}catch(n){return console.error("Erro ao salvar classificação:",n),C(n.message),{success:!1,error:n.message}}finally{h(!1)}},buscarClassificacoes:async()=>{h(!0),C(null);try{const{data:u,error:n}=await Z.from("classificacoes_inadimplentes").select("*").order("data_alteracao",{ascending:!1});if(n)throw n;return{success:!0,data:u}}catch(u){return console.error("Erro ao buscar classificações:",u),C(u.message),{success:!1,error:u.message,data:[]}}finally{h(!1)}},buscarClassificacaoPorCliente:async u=>{h(!0),C(null);try{const{data:n,error:w}=await Z.from("classificacoes_inadimplentes").select("*").eq("cd_cliente",u).maybeSingle();if(w)throw w;return{success:!0,data:n}}catch(n){return console.error("Erro ao buscar classificação do cliente:",n),C(n.message),{success:!1,error:n.message,data:null}}finally{h(!1)}},deletarClassificacao:async u=>{h(!0),C(null);try{const{error:n}=await Z.from("classificacoes_inadimplentes").delete().eq("cd_cliente",u);if(n)throw n;return{success:!0}}catch(n){return console.error("Erro ao deletar classificação:",n),C(n.message),{success:!1,error:n.message}}finally{h(!1)}},salvarClassificacoesEmLote:async u=>{h(!0),C(null);try{const n=u.map(S=>({cd_cliente:S.cd_cliente,nm_cliente:S.nm_cliente,valor_total:S.valor_total,ds_siglaest:S.ds_siglaest,situacao:S.situacao,feeling:S.feeling||null,status:S.status||null,usuario:S.usuario,data_alteracao:new Date().toISOString()})),{data:w,error:O}=await Z.from("classificacoes_inadimplentes").upsert(n,{onConflict:"cd_cliente",ignoreDuplicates:!1}).select();if(O)throw O;return{success:!0,data:w}}catch(n){return console.error("Erro ao salvar classificações em lote:",n),C(n.message),{success:!1,error:n.message}}finally{h(!1)}},buscarHistorico:async(u=null)=>{h(!0),C(null);try{let n=Z.from("classificacoes_inadimplentes").select("*").order("data_alteracao",{ascending:!1});u&&(n=n.eq("cd_cliente",u));const{data:w,error:O}=await n;if(O)throw O;return{success:!0,data:w}}catch(n){return console.error("Erro ao buscar histórico:",n),C(n.message),{success:!1,error:n.message,data:[]}}finally{h(!1)}}}};xa.register(ma,ha,ua,pa,ga,Aa,Na);const ka=()=>{const M=ia(),{user:h}=ea(),{salvarClassificacao:F,buscarClassificacoes:C,deletarClassificacao:We,buscarHistorico:oe}=Ea(),[P,H]=s.useState([]),[T,U]=s.useState(!1),[u,n]=s.useState(null),[w,O]=s.useState("2024-04-01"),S=new Date().toISOString().slice(0,10),[G,Xe]=s.useState(S),[I,Ke]=s.useState([]),[R,Qe]=s.useState([]),[Ye,ne]=s.useState(!1),[W,ce]=s.useState(null),[et,ie]=s.useState([]),[tt,de]=s.useState(!1),[at,xe]=s.useState(""),[me,he]=s.useState([]),[st,ue]=s.useState(!1),[pe,X]=s.useState([]),[lt,ge]=s.useState(!1),[D,Ae]=s.useState({}),[x,Ne]=s.useState({}),[rt,K]=s.useState(null),[ot,Q]=s.useState(null),[k,q]=s.useState(""),[z,J]=s.useState(""),nt=(t,a)=>{a.stopPropagation(),K(t),q(D[t]||"")},ct=(t,a)=>{a.stopPropagation(),Q(t),J(x[t]||"")},it=async(t,a)=>{var o;if(a.stopPropagation(),!k)return;Ae(d=>({...d,[t]:k})),K(null),q("");const l=c.find(d=>d.cd_cliente===t);if(l&&h){const d={cd_cliente:l.cd_cliente,nm_cliente:l.nm_cliente,valor_total:l.valor_total,ds_siglaest:((o=l.ds_siglaest)==null?void 0:o.trim())||null,situacao:l.situacao,feeling:k,status:x[t]||null,usuario:h.email||h.id},{success:g,error:N}=await F(d);g?(n({type:"success",message:"Feeling salvo com sucesso!"}),setTimeout(()=>n(null),3e3)):n({type:"error",message:`Erro ao salvar: ${N}`})}},dt=async(t,a)=>{var o;if(a.stopPropagation(),!z)return;Ne(d=>({...d,[t]:z})),Q(null),J("");const l=c.find(d=>d.cd_cliente===t);if(l&&h){const d={cd_cliente:l.cd_cliente,nm_cliente:l.nm_cliente,valor_total:l.valor_total,ds_siglaest:((o=l.ds_siglaest)==null?void 0:o.trim())||null,situacao:l.situacao,feeling:D[t]||null,status:z,usuario:h.email||h.id},{success:g,error:N}=await F(d);g?(n({type:"success",message:"Status salvo com sucesso!"}),setTimeout(()=>n(null),3e3)):n({type:"error",message:`Erro ao salvar: ${N}`})}},xt=t=>{t.stopPropagation(),K(null),q("")},mt=t=>{t.stopPropagation(),Q(null),J("")},be=t=>{switch(t){case"POSSÍVEL PAGAMENTO":return"bg-green-100 text-green-800";case"ATRASO":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-600"}},fe=t=>{switch(t){case"ACORDO":return"bg-blue-100 text-blue-800";case"ACORDO EM ANDAMENTO":return"bg-cyan-100 text-cyan-800";case"COBRANÇA":return"bg-purple-100 text-purple-800";case"PROTESTADO":return"bg-red-100 text-red-800";case"PAGO PENDENTE DE BAIXA":return"bg-green-100 text-green-800";case"LOJA FECHADA (Tentando ACORDO)":return"bg-orange-100 text-orange-800";case"ACORDO CONCLUÍDO":return"bg-emerald-100 text-emerald-800";case"NOTIFICAÇÃO JURÍDICA":return"bg-yellow-100 text-yellow-800";case"EM AÇÃO JUDICIAL":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-600"}},E=(t,a)=>{xe(t),he(a),de(!0)},Y=()=>{de(!1),he([]),xe("")},ht=()=>{const t=c.filter(a=>a.situacao==="ATRASADO");E("Clientes Atrasados (até 31 dias)",t)},ut=()=>{const t=c.filter(a=>a.situacao==="INADIMPLENTE");E("Clientes Inadimplentes (acima de 31 dias)",t)},pt=()=>{const t=c.filter(a=>D[a.cd_cliente]==="ATRASO");E("Clientes com Feeling: Atraso",t)},gt=()=>{const t=c.filter(a=>D[a.cd_cliente]==="POSSÍVEL PAGAMENTO");E("Clientes com Feeling: Possível Pagamento",t)},At=()=>{const t=c.filter(a=>x[a.cd_cliente]==="ACORDO");E("Clientes com Status: Acordo",t)},Nt=()=>{const t=c.filter(a=>x[a.cd_cliente]==="ACORDO EM ANDAMENTO");E("Clientes com Status: Acordo em Andamento",t)},bt=()=>{const t=c.filter(a=>x[a.cd_cliente]==="COBRANÇA");E("Clientes com Status: Cobrança",t)},ft=()=>{const t=c.filter(a=>x[a.cd_cliente]==="PROTESTADO");E("Clientes com Status: Protestado",t)},jt=()=>{const t=c.filter(a=>x[a.cd_cliente]==="PAGO PENDENTE DE BAIXA");E("Clientes com Status: Pago Pendente de Baixa",t)},vt=()=>{const t=c.filter(a=>x[a.cd_cliente]==="LOJA FECHADA (Tentando ACORDO)");E("Clientes com Status: Loja Fechada (Tentando Acordo)",t)},yt=()=>{const t=c.filter(a=>x[a.cd_cliente]==="ACORDO CONCLUÍDO");E("Clientes com Status: Acordo Concluído",t)},Ct=()=>{const t=c.filter(a=>x[a.cd_cliente]==="NOTIFICAÇÃO JURÍDICA");E("Clientes com Status: Notificação Jurídica",t)},Et=()=>{const t=c.filter(a=>x[a.cd_cliente]==="EM AÇÃO JUDICIAL");E("Clientes com Status: Em Ação Judicial",t)},V=(t,a)=>{E(t,a)},ee=async()=>{try{U(!0);const t={dt_vencimento_ini:"2024-01-01"};w&&(t.dt_inicio=w),G&&(t.dt_fim=G);const a=await M.financial.inadimplentesMultimarcas(t);let l=[];if(a!=null&&a.success&&(a!=null&&a.data)?l=Array.isArray(a.data)?a.data:[]:Array.isArray(a)&&(l=a),console.log("📊 Dados recebidos de inadimplentes:",l),H(l),l.length>0){const{success:o,data:d}=await C();if(o&&d){const g={},N={};d.forEach(_=>{_.feeling&&(g[_.cd_cliente]=_.feeling),_.status&&(N[_.cd_cliente]=_.status)}),Ae(g),Ne(N),console.log("✅ Classificações carregadas do Supabase:",{feeling:Object.keys(g).length,status:Object.keys(N).length})}}}catch(t){console.error("Erro ao buscar dados de inadimplentes:",t),H([]),n({type:"error",message:"Erro ao carregar dados de inadimplentes"})}finally{U(!1)}};s.useEffect(()=>{ee()},[]);const L=s.useMemo(()=>P.filter(t=>{var B;const a=I.length===0||I.includes(String(t.cd_cliente)),l=((B=t.ds_siglaest)==null?void 0:B.trim())||"",o=R.length===0||R.includes(l);if(!t.dt_vencimento)return!1;const d=new Date,g=new Date(t.dt_vencimento),N=d-g,ae=Math.floor(N/(1e3*60*60*24))>=1;return a&&ae&&o}),[P,I,R]),wt=s.useMemo(()=>{const t=new Set;return P.forEach(a=>{a.ds_siglaest&&t.add(a.ds_siglaest.trim())}),Array.from(t).filter(Boolean).sort()},[P]),_t=s.useMemo(()=>{const t=new Map;return(P||[]).forEach(a=>{if(a.cd_cliente){const l=String(a.cd_cliente);t.has(l)||t.set(l,{cd_cliente:l,nm_cliente:a.nm_cliente||l})}}),Array.from(t.values()).sort((a,l)=>a.nm_cliente>l.nm_cliente?1:-1)},[P]),c=s.useMemo(()=>{const t=L.reduce((a,l)=>{const o=l.cd_cliente;return a[o]||(a[o]={cd_cliente:o,nm_cliente:l.nm_cliente,ds_siglaest:l.ds_siglaest,valor_total:0,faturas:[]}),a[o].valor_total+=parseFloat(l.vl_fatura)||0,a[o].faturas.push(l),a},{});return Object.values(t).map(a=>{const l=(a.faturas||[]).reduce((d,g)=>{if(!g.dt_vencimento)return d;const N=Math.floor((new Date-new Date(g.dt_vencimento))/(1e3*60*60*24));return Math.max(d,N)},0),o=l>31?"INADIMPLENTE":"ATRASADO";return{...a,diasAtrasoMax:l,situacao:o}})},[L]),i=s.useMemo(()=>{const t=c.length,a=c.reduce((r,m)=>r+m.valor_total,0),l=L.reduce((r,m)=>r+(parseFloat(m.vl_juros)||0),0),o=L.reduce((r,m)=>r+(parseFloat(m.vl_corrigido)||0),0),d=c.filter(r=>r.situacao==="ATRASADO"),g=c.filter(r=>r.situacao==="INADIMPLENTE"),N=d.length,_=d.reduce((r,m)=>r+m.valor_total,0),ae=g.length,B=g.reduce((r,m)=>r+m.valor_total,0),we=c.filter(r=>D[r.cd_cliente]==="ATRASO"),_e=c.filter(r=>D[r.cd_cliente]==="POSSÍVEL PAGAMENTO"),Pt=we.length,Lt=we.reduce((r,m)=>r+m.valor_total,0),Zt=_e.length,Ft=_e.reduce((r,m)=>r+m.valor_total,0),Me=c.filter(r=>x[r.cd_cliente]==="ACORDO"),Oe=c.filter(r=>x[r.cd_cliente]==="ACORDO EM ANDAMENTO"),Se=c.filter(r=>x[r.cd_cliente]==="COBRANÇA"),De=c.filter(r=>x[r.cd_cliente]==="PROTESTADO"),Tt=Me.length,It=Me.reduce((r,m)=>r+m.valor_total,0),Rt=Oe.length,kt=Oe.reduce((r,m)=>r+m.valor_total,0),qt=Se.length,zt=Se.reduce((r,m)=>r+m.valor_total,0),Jt=De.length,Vt=De.reduce((r,m)=>r+m.valor_total,0),Pe=c.filter(r=>x[r.cd_cliente]==="PAGO PENDENTE DE BAIXA"),Le=c.filter(r=>x[r.cd_cliente]==="LOJA FECHADA (Tentando ACORDO)"),Ze=c.filter(r=>x[r.cd_cliente]==="ACORDO CONCLUÍDO"),Fe=c.filter(r=>x[r.cd_cliente]==="NOTIFICAÇÃO JURÍDICA"),Te=c.filter(r=>x[r.cd_cliente]==="EM AÇÃO JUDICIAL"),Bt=Pe.length,$t=Pe.reduce((r,m)=>r+m.valor_total,0),Ht=Le.length,Ut=Le.reduce((r,m)=>r+m.valor_total,0),Gt=Ze.length,Wt=Ze.reduce((r,m)=>r+m.valor_total,0),Xt=Fe.length,Kt=Fe.reduce((r,m)=>r+m.valor_total,0),Qt=Te.length,Yt=Te.reduce((r,m)=>r+m.valor_total,0);return{totalClientes:t,valorTotal:a,jurosTotal:l,valorCorrigidoTotal:o,qtdAtrasados:N,valorAtrasados:_,qtdInadimplentes:ae,valorInadimplentes:B,qtdFeelingAtraso:Pt,valorFeelingAtraso:Lt,qtdFeelingPossivelPagamento:Zt,valorFeelingPossivelPagamento:Ft,qtdAcordo:Tt,valorAcordo:It,qtdAcordoAndamento:Rt,valorAcordoAndamento:kt,qtdCobranca:qt,valorCobranca:zt,qtdProtestado:Jt,valorProtestado:Vt,qtdPagoPendente:Bt,valorPagoPendente:$t,qtdLojaFechada:Ht,valorLojaFechada:Ut,qtdAcordoConcluido:Gt,valorAcordoConcluido:Wt,qtdNotificacaoJuridica:Xt,valorNotificacaoJuridica:Kt,qtdAcaoJudicial:Qt,valorAcaoJudicial:Yt}},[c,L,D,x]),A=s.useMemo(()=>{const t={atrasadosAcordo:c.filter(a=>a.situacao==="ATRASADO"&&x[a.cd_cliente]==="ACORDO"),atrasadosAcordoAndamento:c.filter(a=>a.situacao==="ATRASADO"&&x[a.cd_cliente]==="ACORDO EM ANDAMENTO"),atrasadosCobranca:c.filter(a=>a.situacao==="ATRASADO"&&x[a.cd_cliente]==="COBRANÇA"),atrasadosProtestado:c.filter(a=>a.situacao==="ATRASADO"&&x[a.cd_cliente]==="PROTESTADO"),inadimplentesAcordo:c.filter(a=>a.situacao==="INADIMPLENTE"&&x[a.cd_cliente]==="ACORDO"),inadimplentesAcordoAndamento:c.filter(a=>a.situacao==="INADIMPLENTE"&&x[a.cd_cliente]==="ACORDO EM ANDAMENTO"),inadimplentesCobranca:c.filter(a=>a.situacao==="INADIMPLENTE"&&x[a.cd_cliente]==="COBRANÇA"),inadimplentesProtestado:c.filter(a=>a.situacao==="INADIMPLENTE"&&x[a.cd_cliente]==="PROTESTADO")};return{atrasadosAcordo:{clientes:t.atrasadosAcordo,qtd:t.atrasadosAcordo.length,valor:t.atrasadosAcordo.reduce((a,l)=>a+l.valor_total,0)},atrasadosAcordoAndamento:{clientes:t.atrasadosAcordoAndamento,qtd:t.atrasadosAcordoAndamento.length,valor:t.atrasadosAcordoAndamento.reduce((a,l)=>a+l.valor_total,0)},atrasadosCobranca:{clientes:t.atrasadosCobranca,qtd:t.atrasadosCobranca.length,valor:t.atrasadosCobranca.reduce((a,l)=>a+l.valor_total,0)},atrasadosProtestado:{clientes:t.atrasadosProtestado,qtd:t.atrasadosProtestado.length,valor:t.atrasadosProtestado.reduce((a,l)=>a+l.valor_total,0)},inadimplentesAcordo:{clientes:t.inadimplentesAcordo,qtd:t.inadimplentesAcordo.length,valor:t.inadimplentesAcordo.reduce((a,l)=>a+l.valor_total,0)},inadimplentesAcordoAndamento:{clientes:t.inadimplentesAcordoAndamento,qtd:t.inadimplentesAcordoAndamento.length,valor:t.inadimplentesAcordoAndamento.reduce((a,l)=>a+l.valor_total,0)},inadimplentesCobranca:{clientes:t.inadimplentesCobranca,qtd:t.inadimplentesCobranca.length,valor:t.inadimplentesCobranca.reduce((a,l)=>a+l.valor_total,0)},inadimplentesProtestado:{clientes:t.inadimplentesProtestado,qtd:t.inadimplentesProtestado.length,valor:t.inadimplentesProtestado.reduce((a,l)=>a+l.valor_total,0)}}},[c,x]),je=s.useMemo(()=>{const t=L.reduce((d,g)=>{var _;const N=((_=g.ds_siglaest)==null?void 0:_.trim())||"Não informado";return d[N]||(d[N]={clientes:0,valor:0}),d[N].clientes+=1,d[N].valor+=parseFloat(g.vl_fatura)||0,d},{}),a=Object.keys(t),l=a.map(d=>t[d].clientes),o=a.map(d=>t[d].valor);return{estados:a,clientesPorEstado:l,valoresPorEstado:o}},[L]),te=s.useMemo(()=>!c||c.length===0?[]:[...c].sort((a,l)=>l.valor_total-a.valor_total).slice(0,10).map(a=>{const l=(a.faturas||[]).reduce((o,d)=>{if(!d.dt_vencimento)return o;const g=Math.floor((new Date-new Date(d.dt_vencimento))/(1e3*60*60*24));return Math.max(o,g)},0);return{...a,diasAtrasoMax:l}}),[c]),Mt={labels:te.map(t=>t.nm_cliente?t.nm_cliente:t.cd_cliente),datasets:[{label:"Valor Inadimplente (R$)",data:te.map(t=>Number(t.valor_total||0)),backgroundColor:"#000638",borderColor:"#000638",borderWidth:1}]},Ot={labels:je.estados,datasets:[{label:"Clientes",data:je.clientesPorEstado,backgroundColor:"#000638",borderColor:"#000638",borderWidth:1}]},p=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t||0),ve=t=>t?new Date(t).toLocaleDateString("pt-BR"):"N/A",St=t=>{if(!t)return"N/A";const a=new Date,l=new Date(t),o=a-l,d=Math.floor(o/(1e3*60*60*24));if(d<=0)return"0 dias";if(d===1)return"1 dia";if(d<30)return`${d} dias`;if(d<365){const N=Math.floor(d/30);return N===1?"1 mês":`${N} meses`}const g=Math.floor(d/365);return g===1?"1 ano":`${g} anos`},ye=t=>{ce(t),ie(t.faturas),ne(!0)},Ce=()=>{ne(!1),ce(null),ie([])},Dt=async t=>{ge(!0),ue(!0),X([]);const{success:a,data:l}=await oe(t);a&&l?X(l):(n({type:"error",message:"Erro ao carregar histórico"}),setTimeout(()=>n(null),3e3)),ge(!1)},Ee=()=>{ue(!1),X([])};return e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 px-4 space-y-6",children:[e.jsx(ta,{title:"Inadimplencia Multimarcas",subtitle:"Acompanhe os clientes inadimplentes e suas métricas",icon:se,iconColor:"text-purple-600"}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border mb-6",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),ee()},children:[e.jsx("div",{className:"text-sm font-semibold text-[#000638] mb-2",children:"Configurações para análise de Inadimplência Multimarcas"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Filtros para consulta de clientes inadimplentes"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mb-3 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Data Inicial"}),e.jsx("input",{type:"date",value:w,onChange:t=>O(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Data Final"}),e.jsx("input",{type:"date",value:G,onChange:t=>Xe(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] text-xs"})]}),e.jsx("div",{className:"col-span-1",children:e.jsx(oa,{clientes:_t,selected:I,onChange:Ke})}),e.jsx("div",{className:"col-span-1",children:e.jsx(na,{estados:wt,selected:R,onChange:Qe})})]}),e.jsx("div",{className:"mt-4 flex gap-2",children:e.jsx("button",{onClick:ee,disabled:T,className:"flex items-center gap-1 bg-[#000638] text-white px-3 py-1 rounded-lg hover:bg-[#fe0000] disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors h-7 text-xs font-bold shadow-md tracking-wide uppercase",children:T?e.jsxs(e.Fragment,{children:[e.jsx(qe,{size:16,className:"animate-spin"}),"Carregando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{size:16}),"Buscar Dados"]})})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{size:18,className:"text-blue-600"}),e.jsx(v,{className:"text-sm font-bold text-blue-700",children:"Total de Clientes"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-blue-600 mb-0.5",children:i.totalClientes}),e.jsx(y,{className:"text-xs text-gray-500",children:"Clientes inadimplentes"})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{size:18,className:"text-green-600"}),e.jsx(v,{className:"text-sm font-bold text-green-700",children:"Valor Total"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-green-600 mb-0.5",children:p(i.valorTotal)}),e.jsx(y,{className:"text-xs text-gray-500",children:"Valor em aberto"})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{size:18,className:"text-purple-600"}),e.jsx(v,{className:"text-sm font-bold text-purple-700",children:"Valor Total - Acordos"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-purple-600 mb-0.5",children:p(i.valorTotal-(A.atrasadosAcordo.valor+A.atrasadosAcordoAndamento.valor+A.inadimplentesAcordo.valor+A.inadimplentesAcordoAndamento.valor))}),e.jsx(y,{className:"text-xs text-gray-500",children:"Valor em aberto - Acordos - Acordos em Andamento"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-[#000638] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-[#000638] rounded"}),"Por Situação"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:ht,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{size:18,className:"text-yellow-600"}),e.jsx(v,{className:"text-sm font-bold text-yellow-700",children:"Atrasados"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsxs("div",{className:"text-base font-extrabold text-yellow-600 mb-0.5",children:[i.qtdAtrasados," cliente",i.qtdAtrasados!==1?"s":""]}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:p(i.valorAtrasados)}),e.jsx(y,{className:"text-xs text-gray-500",children:"Até 31 dias de atraso"})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:ut,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-red-600"}),e.jsx(v,{className:"text-sm font-bold text-red-700",children:"Inadimplentes"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsxs("div",{className:"text-base font-extrabold text-red-600 mb-0.5",children:[i.qtdInadimplentes," cliente",i.qtdInadimplentes!==1?"s":""]}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:p(i.valorInadimplentes)}),e.jsx(y,{className:"text-xs text-gray-500",children:"Acima de 31 dias de atraso"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-[#000638] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-[#000638] rounded"}),"Por Feeling"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:pt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ya,{size:18,className:"text-orange-600"}),e.jsx(v,{className:"text-sm font-bold text-orange-700",children:"Atraso"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsxs("div",{className:"text-base font-extrabold text-orange-600 mb-0.5",children:[i.qtdFeelingAtraso," cliente",i.qtdFeelingAtraso!==1?"s":""]}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:p(i.valorFeelingAtraso)}),e.jsx(y,{className:"text-xs text-gray-500",children:"Clientes marcados com atraso"})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:gt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{size:18,className:"text-green-600"}),e.jsx(v,{className:"text-sm font-bold text-green-700",children:"Possível Pagamento"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsxs("div",{className:"text-base font-extrabold text-green-600 mb-0.5",children:[i.qtdFeelingPossivelPagamento," cliente",i.qtdFeelingPossivelPagamento!==1?"s":""]}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:p(i.valorFeelingPossivelPagamento)}),e.jsx(y,{className:"text-xs text-gray-500",children:"Clientes com possibilidade de pagamento"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-[#000638] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-[#000638] rounded"}),"Por Status"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:At,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{size:18,className:"text-blue-600"}),e.jsx(v,{className:"text-sm font-bold text-blue-700",children:"Acordo"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-blue-600 mb-0.5",children:i.qtdAcordo}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdAcordo!==1?"Clientes":"Cliente"," -"," ",p(i.valorAcordo)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:Nt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{size:18,className:"text-cyan-600"}),e.jsx(v,{className:"text-sm font-bold text-cyan-700",children:"Acordo em Andamento"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-cyan-600 mb-0.5",children:i.qtdAcordoAndamento}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdAcordoAndamento!==1?"Clientes":"Cliente"," -"," ",p(i.valorAcordoAndamento)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:bt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{size:18,className:"text-purple-600"}),e.jsx(v,{className:"text-sm font-bold text-purple-700",children:"Cobrança"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-purple-600 mb-0.5",children:i.qtdCobranca}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdCobranca!==1?"Clientes":"Cliente"," -"," ",p(i.valorCobranca)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:ft,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:18,className:"text-red-600"}),e.jsx(v,{className:"text-sm font-bold text-red-700",children:"Protestado"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-red-600 mb-0.5",children:i.qtdProtestado}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdProtestado!==1?"Clientes":"Cliente"," -"," ",p(i.valorProtestado)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:jt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sa,{size:18,className:"text-green-600"}),e.jsx(v,{className:"text-sm font-bold text-green-700",children:"Pago Pendente de Baixa"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-green-600 mb-0.5",children:i.qtdPagoPendente}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdPagoPendente!==1?"Clientes":"Cliente"," -"," ",p(i.valorPagoPendente)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:vt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:18,className:"text-orange-600"}),e.jsx(v,{className:"text-sm font-bold text-orange-700",children:"Loja Fechada (Tentando Acordo)"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-orange-600 mb-0.5",children:i.qtdLojaFechada}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdLojaFechada!==1?"Clientes":"Cliente"," -"," ",p(i.valorLojaFechada)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:yt,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ca,{size:18,className:"text-emerald-600"}),e.jsx(v,{className:"text-sm font-bold text-emerald-700",children:"Acordo Concluído"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-emerald-600 mb-0.5",children:i.qtdAcordoConcluido}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdAcordoConcluido!==1?"Clientes":"Cliente"," -"," ",p(i.valorAcordoConcluido)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:Ct,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{size:18,className:"text-yellow-600"}),e.jsx(v,{className:"text-sm font-bold text-yellow-700",children:"Notificação Jurídica"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-yellow-600 mb-0.5",children:i.qtdNotificacaoJuridica}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdNotificacaoJuridica!==1?"Clientes":"Cliente"," ","- ",p(i.valorNotificacaoJuridica)]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:Et,children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:18,className:"text-red-700"}),e.jsx(v,{className:"text-sm font-bold text-red-800",children:"Em Ação Judicial"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-red-700 mb-0.5",children:i.qtdAcaoJudicial}),e.jsxs(y,{className:"text-xs text-gray-500",children:[i.qtdAcaoJudicial!==1?"Clientes":"Cliente"," -"," ",p(i.valorAcaoJudicial)]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-[#000638] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-[#000638] rounded"}),"Cruzamento: Situação x Status"]}),e.jsx(b,{className:"shadow-lg rounded-xl bg-white",children:e.jsxs(f,{className:"p-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"px-4 py-3 text-left font-bold text-[#000638]",children:"Situação / Status"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-blue-700",children:"Acordo"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-cyan-700",children:"Acordo em Andamento"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-[#000638] bg-gray-100",children:"Total"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-yellow-700 bg-yellow-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{size:16}),"ATRASADOS"]})}),e.jsxs("td",{className:"px-4 py-3 text-center cursor-pointer hover:bg-blue-50 transition-colors",onClick:()=>V("Atrasados - Acordo",A.atrasadosAcordo.clientes),children:[e.jsx("div",{className:"font-bold text-blue-600",children:A.atrasadosAcordo.qtd}),e.jsx("div",{className:"text-xs text-gray-600",children:p(A.atrasadosAcordo.valor)})]}),e.jsxs("td",{className:"px-4 py-3 text-center cursor-pointer hover:bg-cyan-50 transition-colors",onClick:()=>V("Atrasados - Acordo em Andamento",A.atrasadosAcordoAndamento.clientes),children:[e.jsx("div",{className:"font-bold text-cyan-600",children:A.atrasadosAcordoAndamento.qtd}),e.jsx("div",{className:"text-xs text-gray-600",children:p(A.atrasadosAcordoAndamento.valor)})]}),e.jsxs("td",{className:"px-4 py-3 text-center font-bold bg-yellow-50 border-l-2 border-yellow-300",children:[e.jsx("div",{className:"text-base text-blue-700",children:i.qtdAtrasados-(A.atrasadosAcordo.qtd+A.atrasadosAcordoAndamento.qtd)}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 mt-1",children:p(i.valorAtrasados-(A.atrasadosAcordo.valor+A.atrasadosAcordoAndamento.valor))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 italic",children:"Total - Acordos"})]})]}),e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-bold text-red-700 bg-red-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{size:16}),"INADIMPLENTES"]})}),e.jsxs("td",{className:"px-4 py-3 text-center cursor-pointer hover:bg-blue-50 transition-colors",onClick:()=>V("Inadimplentes - Acordo",A.inadimplentesAcordo.clientes),children:[e.jsx("div",{className:"font-bold text-blue-600",children:A.inadimplentesAcordo.qtd}),e.jsx("div",{className:"text-xs text-gray-600",children:p(A.inadimplentesAcordo.valor)})]}),e.jsxs("td",{className:"px-4 py-3 text-center cursor-pointer hover:bg-cyan-50 transition-colors",onClick:()=>V("Inadimplentes - Acordo em Andamento",A.inadimplentesAcordoAndamento.clientes),children:[e.jsx("div",{className:"font-bold text-cyan-600",children:A.inadimplentesAcordoAndamento.qtd}),e.jsx("div",{className:"text-xs text-gray-600",children:p(A.inadimplentesAcordoAndamento.valor)})]}),e.jsxs("td",{className:"px-4 py-3 text-center font-bold bg-red-50 border-l-2 border-red-300",children:[e.jsx("div",{className:"text-base text-red-700",children:i.qtdInadimplentes-(A.inadimplentesAcordo.qtd+A.inadimplentesAcordoAndamento.qtd)}),e.jsx("div",{className:"text-sm font-semibold text-gray-700 mt-1",children:p(i.valorInadimplentes-(A.inadimplentesAcordo.valor+A.inadimplentesAcordoAndamento.valor))}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 italic",children:"Total - Acordos"})]})]})]})]})}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 italic",children:"💡 Clique em qualquer célula para ver a lista detalhada de clientes"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{size:18,className:"text-blue-600"}),e.jsx(v,{className:"text-sm font-bold text-blue-700",children:"TOP CLIENTES INADIMPLENTES"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx(y,{className:"text-xs text-gray-500 mb-3",children:"Visão geral dos dados de inadimplência"}),e.jsx("div",{className:"h-64",children:e.jsx(ke,{data:Mt,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(t){const a=t.dataIndex,l=te[a],o=t.dataset.data[a]||0,d=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o),g=(l==null?void 0:l.diasAtrasoMax)??0;return`${d} — ${g} dias em atraso`}}}},scales:{y:{beginAtZero:!0}}}})})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ca,{size:18,className:"text-green-600"}),e.jsx(v,{className:"text-sm font-bold text-green-700",children:"Clientes por Estado"})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx(y,{className:"text-xs text-gray-500 mb-3",children:"Distribuição de inadimplentes por estado"}),e.jsx("div",{className:"h-64",children:e.jsx(ke,{data:Ot,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]})]})]}),e.jsxs(b,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(j,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(la,{size:18,className:"text-[#000638]"}),e.jsx(v,{className:"text-sm font-bold text-[#000638]",children:"Lista de Clientes Inadimplentes"})]}),e.jsxs("button",{onClick:()=>Dt(null),className:"inline-flex items-center gap-2 px-4 py-2 bg-[#000638] text-white text-xs font-medium rounded hover:bg-[#fe0000] transition-colors",title:"Ver histórico completo de alterações",children:[e.jsx(re,{size:16,weight:"bold"}),"Log"]})]})}),e.jsxs(f,{className:"pt-0 px-4 pb-4",children:[e.jsx(y,{className:"text-xs text-gray-500 mb-4",children:"Detalhes completos dos clientes em situação de inadimplência"}),T?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ra,{size:"md",text:"Carregando dados..."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Código Cliente"}),e.jsx("th",{className:"px-4 py-3",children:"Nome Cliente"}),e.jsx("th",{className:"px-4 py-3",children:"Estado"}),e.jsx("th",{className:"px-4 py-3",children:"Valor Total"}),e.jsx("th",{className:"px-4 py-3",children:"Situação"}),e.jsx("th",{className:"px-4 py-3",children:"Feeling"}),e.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500",children:"Nenhum cliente inadimplente encontrado"})}):c.map((t,a)=>{var l;return e.jsxs("tr",{className:"bg-white border-b hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>ye(t),children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:t.cd_cliente||"N/A"}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:t.nm_cliente||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded",children:((l=t.ds_siglaest)==null?void 0:l.trim())||"N/A"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-green-600",children:p(t.valor_total)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${t.situacao==="INADIMPLENTE"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.situacao})}),e.jsx("td",{className:"px-4 py-3",onClick:o=>o.stopPropagation(),children:rt===t.cd_cliente?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:k,onChange:o=>q(o.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",onClick:o=>o.stopPropagation(),children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"POSSÍVEL PAGAMENTO",children:"POSSÍVEL PAGAMENTO"}),e.jsx("option",{value:"ATRASO",children:"ATRASO"})]}),e.jsx("button",{onClick:o=>it(t.cd_cliente,o),className:"bg-green-500 hover:bg-green-600 text-white text-xs px-2 py-1 rounded transition-colors",children:"Salvar"}),e.jsx("button",{onClick:xt,className:"bg-gray-400 hover:bg-gray-500 text-white text-xs px-2 py-1 rounded transition-colors",children:"✕"})]}):e.jsx("span",{onClick:o=>nt(t.cd_cliente,o),className:`text-xs font-semibold px-2 py-1 rounded cursor-pointer hover:opacity-80 transition-opacity ${be(D[t.cd_cliente])}`,children:D[t.cd_cliente]||"---"})}),e.jsx("td",{className:"px-4 py-3",onClick:o=>o.stopPropagation(),children:ot===t.cd_cliente?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:z,onChange:o=>J(o.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white",onClick:o=>o.stopPropagation(),children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"ACORDO",children:"ACORDO"}),e.jsx("option",{value:"ACORDO EM ANDAMENTO",children:"ACORDO EM ANDAMENTO"}),e.jsx("option",{value:"COBRANÇA",children:"COBRANÇA"}),e.jsx("option",{value:"PROTESTADO",children:"PROTESTADO"}),e.jsx("option",{value:"PAGO PENDENTE DE BAIXA",children:"PAGO PENDENTE DE BAIXA"}),e.jsx("option",{value:"LOJA FECHADA (Tentando ACORDO)",children:"LOJA FECHADA (Tentando ACORDO)"}),e.jsx("option",{value:"ACORDO CONCLUÍDO",children:"ACORDO CONCLUÍDO"}),e.jsx("option",{value:"NOTIFICAÇÃO JURÍDICA",children:"NOTIFICAÇÃO JURÍDICA"}),e.jsx("option",{value:"EM AÇÃO JUDICIAL",children:"EM AÇÃO JUDICIAL"})]}),e.jsx("button",{onClick:o=>dt(t.cd_cliente,o),className:"bg-green-500 hover:bg-green-600 text-white text-xs px-2 py-1 rounded transition-colors",children:"Salvar"}),e.jsx("button",{onClick:mt,className:"bg-gray-400 hover:bg-gray-500 text-white text-xs px-2 py-1 rounded transition-colors",children:"✕"})]}):e.jsx("span",{onClick:o=>ct(t.cd_cliente,o),className:`text-xs font-semibold px-2 py-1 rounded cursor-pointer hover:opacity-80 transition-opacity ${fe(x[t.cd_cliente])}`,children:x[t.cd_cliente]||"---"})})]},a)})})]})})]})]}),tt&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:at}),e.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Código"}),e.jsx("th",{className:"px-4 py-3",children:"Nome Cliente"}),e.jsx("th",{className:"px-4 py-3",children:"Estado"}),e.jsx("th",{className:"px-4 py-3",children:"Valor Total"}),e.jsx("th",{className:"px-4 py-3",children:"Dias Atraso"})]})}),e.jsx("tbody",{children:me.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"Nenhum cliente encontrado nesta categoria"})}):me.map((t,a)=>{var l;return e.jsxs("tr",{className:"bg-white border-b hover:bg-blue-50 cursor-pointer transition-colors",onClick:()=>{Y(),ye(t)},children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:t.cd_cliente||"N/A"}),e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900",children:t.nm_cliente||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded",children:((l=t.ds_siglaest)==null?void 0:l.trim())||"N/A"})}),e.jsx("td",{className:"px-4 py-3 font-medium text-green-600",children:p(t.valor_total)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded",children:[t.diasAtrasoMax||0," dias"]})})]},a)})})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:Y,className:"px-4 py-2 bg-[#000638] text-white rounded hover:bg-[#fe0000] transition-colors",children:"Fechar"})})]})}),st&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-7xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{size:24,weight:"bold",className:"text-[#000638]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Histórico Completo de Alterações"})]}),e.jsx("button",{onClick:Ee,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Registro de todas as alterações de classificação realizadas"}),lt?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(qe,{size:32,className:"animate-spin text-[#000638]"})}):pe.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(re,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Nenhuma alteração de classificação foi registrada ainda"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Data/Hora"}),e.jsx("th",{className:"px-4 py-3",children:"Cliente"}),e.jsx("th",{className:"px-4 py-3",children:"Valor"}),e.jsx("th",{className:"px-4 py-3",children:"Situação"}),e.jsx("th",{className:"px-4 py-3",children:"Feeling"}),e.jsx("th",{className:"px-4 py-3",children:"Status"}),e.jsx("th",{className:"px-4 py-3",children:"Usuário"})]})}),e.jsx("tbody",{children:pe.map((t,a)=>e.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-xs",children:new Date(t.data_alteracao).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900",children:[e.jsx("div",{className:"text-xs font-bold",children:t.cd_cliente}),e.jsx("div",{className:"text-xs text-gray-600",children:t.nm_cliente})]}),e.jsx("td",{className:"px-4 py-3 font-medium text-green-600",children:p(t.valor_total)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${t.situacao==="INADIMPLENTE"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:t.situacao||"N/A"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${be(t.feeling)}`,children:t.feeling||"---"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${fe(t.status)}`,children:t.status||"---"})}),e.jsx("td",{className:"px-4 py-3 text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:t.usuario})]})})]},a))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-[#000638] text-white rounded hover:bg-[#fe0000] transition-colors",children:"Fechar"})})]})}),Ye&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-6xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Detalhes das Faturas - ",W==null?void 0:W.nm_cliente]}),e.jsx("button",{onClick:Ce,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"Empresa"}),e.jsx("th",{className:"px-4 py-3",children:"Emissão"}),e.jsx("th",{className:"px-4 py-3",children:"Vencimento"}),e.jsx("th",{className:"px-4 py-3",children:"Valor Fatura"}),e.jsx("th",{className:"px-4 py-3",children:"Juros"}),e.jsx("th",{className:"px-4 py-3",children:"Parcela"}),e.jsx("th",{className:"px-4 py-3",children:"Tempo Inadimplência"})]})}),e.jsx("tbody",{children:et.map((t,a)=>e.jsxs("tr",{className:"bg-white border-b",children:[e.jsx("td",{className:"px-4 py-3",children:t.cd_empresa||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:ve(t.dt_emissao)}),e.jsx("td",{className:"px-4 py-3",children:ve(t.dt_vencimento)}),e.jsx("td",{className:"px-4 py-3 font-medium text-green-600",children:p(t.vl_fatura)}),e.jsx("td",{className:"px-4 py-3 font-medium text-red-600",children:p(t.vl_juros)}),e.jsx("td",{className:"px-4 py-3",children:t.nr_parcela||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded",children:St(t.dt_vencimento)})})]},a))})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-[#000638] text-white rounded hover:bg-[#fe0000] transition-colors",children:"Fechar"})})]})}),u&&e.jsx(da,{type:u.type,message:u.message,onClose:()=>n(null)})]})};export{ka as default};
