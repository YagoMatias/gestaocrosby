import{r as d,j as e}from"./index-a2563983.js";const b=({nomesFantasiaSelecionados:l=[],onSelectNomesFantasia:c,dadosNomesFantasia:i=[]})=>{const[a,h]=d.useState(!1),[u,m]=d.useState(""),x=d.useRef(null),g=i.filter(t=>{var r,n;return((r=t.cd_cliente)==null?void 0:r.toString().toLowerCase().includes(u.toLowerCase()))||((n=t.nm_fantasia)==null?void 0:n.toLowerCase().includes(u.toLowerCase()))}),f=t=>{let r;l.some(n=>{var o,s;return((o=n.cd_cliente)==null?void 0:o.toString())===((s=t.cd_cliente)==null?void 0:s.toString())})?r=l.filter(n=>{var o,s;return((o=n.cd_cliente)==null?void 0:o.toString())!==((s=t.cd_cliente)==null?void 0:s.toString())}):r=[...l,t],c&&c(r)};return d.useEffect(()=>{const t=r=>{x.current&&!x.current.contains(r.target)&&h(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]),e.jsxs("div",{className:"flex flex-col relative",ref:x,children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Nome Fantasia"}),e.jsxs("button",{type:"button",onClick:()=>h(!a),disabled:i.length===0,className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] text-left flex items-center justify-between disabled:opacity-50 disabled:cursor-not-allowed text-xs",children:[e.jsx("span",{className:"truncate",children:i.length===0?"Nenhum nome fantasia disponível":l.length===0?"Selecione os nomes fantasia":`${l.length} nome(s) selecionado(s)`}),i.length===0?e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):e.jsx("svg",{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&e.jsxs("div",{className:"w-full absolute top-full left-0 right-0 z-50 bg-white border border-gray-300 rounded-lg shadow-lg mt-1 max-h-100 overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsx("input",{type:"text",placeholder:"Buscar nome fantasia...",value:u,onChange:t=>m(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#000638] text-sm"})}),e.jsxs("div",{className:"p-3 border-b border-gray-200 bg-gray-50 flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{c&&c([...i])},className:"text-xs px-2 py-1 bg-[#000638] text-white rounded hover:bg-[#fe0000] transition-colors",children:"Selecionar Todos"}),e.jsx("button",{type:"button",onClick:()=>{c&&c([])},className:"text-xs px-2 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors",children:"Limpar"})]}),e.jsx("div",{className:"w-full max-h-48 overflow-y-auto",children:i.length===0?e.jsx("div",{className:"p-3 text-gray-500 text-sm text-center",children:"Nenhum nome fantasia disponível"}):g.length===0?e.jsx("div",{className:"p-3 text-gray-500 text-sm text-center",children:"Nenhum nome fantasia encontrado"}):g.map(t=>{const r=l.some(n=>{var o,s;return((o=n.cd_cliente)==null?void 0:o.toString())===((s=t.cd_cliente)==null?void 0:s.toString())});return e.jsxs("div",{className:`px-2 py-2 hover:bg-gray-50 cursor-pointer flex items-start mb-1 ${r?"bg-blue-50":""}`,onClick:()=>f(t),children:[e.jsx("div",{className:"flex flex-row w-full",children:e.jsx("span",{className:"text-xs font-medium text-gray-900 truncate whitespace-nowrap",children:(t.cd_cliente+" - "+(t.nm_fantasia||"")).replace(/\s+/g," ").trim()})}),e.jsx("input",{type:"checkbox",checked:r,readOnly:!0,className:"rounded border-gray-300 text-[#000638] focus:ring-[#000638] mr-1 w-4 h-4",onClick:n=>n.stopPropagation()})]},`fantasia-${t.cd_cliente}`)})})]})]})};export{b as F};
