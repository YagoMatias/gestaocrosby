import{u as y,r as c,p as N,m as x,j as e,P as D,a as f}from"./index-a2563983.js";import{u as z}from"./useApiClient-0bf86fc1.js";const Z=()=>{const{user:d}=y(),p=z(),[l,M]=c.useState({faturamentoTotal:{value:"R$ 0",change:"0%",changeType:"neutral"},lojasAtivas:{value:"0",change:"0",changeType:"neutral"}}),[j,h]=c.useState(!0),[o,I]=c.useState(0),s=[{id:1,title:"Gestão PCP",description:"Métricas detalhadas de PCP",url:"https://app.powerbi.com/view?r=eyJrIjoiMzczYTRkZjgtNTUwYS00ZWEzLTkzYTEtZDdhNTE3MGNmMTc3IiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:2,title:"Funil de Franquias",description:"Painel de Funil das Franquias",url:"https://app.powerbi.com/view?r=eyJrIjoiNjA1YjhkOGItYTgxYi00OGIzLTk4MDEtNTUyNzE0MjE2N2ZhIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:3,title:"Indicadores de Cashback",description:"Análise de Cashback utilizado pelos clientes",url:"https://app.powerbi.com/view?r=eyJrIjoiYzE4NzZjZTEtYzRhNS00Y2I0LWEwYzEtMmI1ZDU3MThmNGQyIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:4,title:"Performance Operacional",description:"Métricas de eficiência e produtividade",url:"https://app.powerbi.com/view?r=eyJrIjoiZDcxODA0OTMtYWY3ZC00MzY2LWFmODAtZGRiMzY4MTYwMzE3IiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:5,title:"Indicadores do Vigia",description:"Análise detalhada do Vigia",url:"https://app.powerbi.com/view?r=eyJrIjoiZTlkNDZkZjYtOTRmNC00MzMxLWJhMTAtM2U4NWQ4OWRlNzY5IiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:6,title:"Looker Studio Rafael",description:"Relatórios avançados de Rafael",url:"https://lookerstudio.google.com/embed/reporting/fa465a90-1e72-4284-aa8a-2f5ba9cbf86b/page/ghwBE"},{id:7,title:"AÇÕES DOS CARTÕES",description:"Painel de ações dos cartões",url:"https://app.clickup.com/9011116713/v/db/8chnen9-886151"},{id:8,title:"RELATÓRIO DE VENDAS PROMO",description:"Relatório de vendas promocionais",url:"https://app.powerbi.com/view?r=eyJrIjoiMjFjZTZlZjAtMmViYy00NTNlLWJiNWItM2I4MzE1OTQ1ZjgzIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:9,title:"FATURAMENTO REVENDA",description:"Faturamento Revenda",url:"https://app.powerbi.com/view?r=eyJrIjoiYmM1ODkyNWEtMzJkZC00YjFmLWE5YmEtMDQ4MzkxOGFkNGU5IiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:10,title:"CAC B2C",description:"CAC B2C",url:"https://app.powerbi.com/view?r=eyJrIjoiYTMyMmExMWEtMGYzZS00MTNkLWIyMGYtMDg1NjZmZjc0OTQ3IiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:11,title:"REATIVACAO CASHBACK",description:"Relatório de reativação por cashback",url:"https://app.powerbi.com/view?r=eyJrIjoiYzE4NzZjZTEtYzRhNS00Y2I0LWEwYzEtMmI1ZDU3MThmNGQyIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:12,title:"TIPO CLIENTE",description:"Análise por tipo de cliente",url:"https://app.powerbi.com/view?r=eyJrIjoiNjA1YjhkOGItYTgxYi00OGIzLTk4MDEtNTUyNzE0MjE2N2ZhIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:13,title:"COHORT",description:"Análise de cohort",url:"https://app.powerbi.com/view?r=eyJrIjoiZDcxODA0OTMtYWY3ZC00MzY2LWFmODAtZGRiMzY4MTYwMzE3IiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:14,title:"CRONOGRAMA SHOWROOM",description:"Cronograma do showroom",url:"https://app.powerbi.com/view?r=eyJrIjoiYmI2NDQ0MTQtMjdiNy00M2MxLWFmYjYtYTE5YzY0N2YwMThmIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:15,title:"RH",description:"Relatórios de RH",url:"https://app.powerbi.com/view?r=eyJrIjoiNDJmMmMyY2MtNDM4ZC00MzQ4LWI2ZTQtNWYwMjc0Y2QzYzFmIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:16,title:"ESTOQUE FILIAIS E LV",description:"Estoque filiais e LV",url:"https://app.powerbi.com/view?r=eyJrIjoiYmY4MGQxMzItNDJiNi00MDQ3LWJkMjAtZjJlZTM2OTRiYTdlIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"},{id:17,title:"DASHBOARD EXPEDIÇÃO",description:"Dashboard de expedição",url:"https://app.powerbi.com/view?r=eyJrIjoiYmY4MGQxMzItNDJiNi00MDQ3LWJkMjAtZjJlZTM2OTRiYTdlIiwidCI6IjRhZWQyODQ0LWFkZTktNDUzMC1hN2U4LWJmNzM3MjhmMTM4NSJ9"}],T=t=>typeof t=="number"?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t):t,u=()=>{const t=new Date,i=new Date;i.setMonth(t.getMonth()-2);const n=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);return{hoje:t.toISOString().split("T")[0],doisMesesAtras:i.toISOString().split("T")[0],primeiroDiaMes:n.toISOString().split("T")[0],ultimoDiaMes:a.toISOString().split("T")[0]}},g=async()=>{try{const{primeiroDiaMes:t,ultimoDiaMes:i}=u(),n={dt_inicio:t,dt_fim:i,cd_grupoempresa_ini:1,cd_grupoempresa_fim:9999},a=await p.company.faturamentoLojas(n);if(a.success&&a.data){const m=a.data.reduce((r,w)=>r+parseFloat(w.faturamento||0),0);M(r=>({...r,faturamentoTotal:{value:T(m),change:"+0%",changeType:"positive"}}))}else console.warn("API de faturamento não retornou dados válidos:",a)}catch(t){console.error("Erro ao buscar faturamento:",t)}},b=async()=>{try{const{doisMesesAtras:t,hoje:i}=u(),n={dt_inicio:t,dt_fim:i,cd_grupoempresa_ini:1,cd_grupoempresa_fim:9999},a=await p.company.faturamentoLojas(n);if(a.success&&a.data){const m=new Set(a.data.map(r=>r.cd_grupoempresa||r.nm_grupoempresa));M(r=>({...r,lojasAtivas:{value:m.size.toString(),change:"+0",changeType:"positive"}}))}else console.warn("API de lojas ativas não retornou dados válidos:",a)}catch(t){console.error("Erro ao buscar lojas ativas:",t)}};return c.useEffect(()=>{(async()=>{h(!0);try{await Promise.all([g(),b()])}catch(i){console.error("Erro ao carregar dados do dashboard:",i)}finally{h(!1)}})()},[]),l.faturamentoTotal.value,l.faturamentoTotal.change,l.faturamentoTotal.changeType,N,l.lojasAtivas.value,l.lojasAtivas.change,l.lojasAtivas.changeType,x,e.jsx("div",{className:"w-full flex flex-col items-stretch justify-start py-3 px-2",children:e.jsxs("div",{className:"w-full max-auto p-10",children:[e.jsx(D,{title:"BI Externo",subtitle:`Bem-vindo, ${d==null?void 0:d.name}. Aqui está um resumo dos principais BI que ainda não estão no HEADCOACH.`,icon:N,iconColor:"text-indigo-600"}),e.jsxs("div",{className:"w-full mt-4 bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("h2",{className:"text-base font-semibold text-gray-900 font-barlow",children:"Painel BI"})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"bi-panel-select",className:"block text-sm font-medium text-gray-700 mb-2 font-barlow",children:"Selecione o Painel BI"}),e.jsx("select",{id:"bi-panel-select",value:o,onChange:t=>I(parseInt(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent font-barlow",disabled:j,children:s.map((t,i)=>e.jsx("option",{value:i,children:t.title},t.id))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 font-barlow",children:s[o].title}),e.jsx("p",{className:"text-xs text-gray-600 font-barlow",children:s[o].description})]}),e.jsx("div",{className:"w-full",children:s[o].title==="AÇÕES DOS CARTÕES"?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1 font-barlow",children:"Acessar ClickUp - Ações dos Cartões"}),e.jsx("p",{className:"text-xs text-gray-600 font-barlow",children:"Clique no botão abaixo para abrir o painel no ClickUp em uma nova aba"})]}),e.jsxs("a",{href:s[o].url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors duration-200 font-barlow",children:[e.jsx(f,{size:20,className:"mr-2"}),"IR ATÉ O LINK"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-full",style:{height:"600px"},children:e.jsx("iframe",{title:`Painel BI - ${s[o].title}`,src:s[o].url,className:"w-full h-full rounded-lg border border-gray-200",frameBorder:"0",allowFullScreen:!0,loading:"lazy"})}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("p",{className:"text-xs text-gray-600 font-barlow",children:"Painel de Business Intelligence integrado - Visualize dados em tempo real"})})]})})]})]})})};export{Z as default};
