import{r as s,h as z,u as ne,j as e,P as le,a2 as R,d as ie,q as ce,L as T,i as de}from"./index-a2563983.js";import{u as me}from"./usePermissions-4c389311.js";import{C,c as M,a as $,b as D}from"./cards-fd94db0b.js";import{n as w}from"./Check.es-43d438e4.js";import{c as pe}from"./Info.es-1c589a57.js";import{f as ge}from"./MagnifyingGlass.es-c5020417.js";import{n as ue}from"./Trash.es-c4902777.js";import{c as he}from"./Warning.es-51a03ee6.js";import{s as xe}from"./XCircle.es-fcbde856.js";const be=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,28H88A12,12,0,0,0,76,40V76H40A12,12,0,0,0,28,88V216a12,12,0,0,0,12,12H168a12,12,0,0,0,12-12V180h36a12,12,0,0,0,12-12V40A12,12,0,0,0,216,28ZM156,204H52V100H156Zm48-48H180V88a12,12,0,0,0-12-12H100V52H204Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,40V168H168V88H88V40Z",opacity:"0.2"}),s.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32Zm-8,128H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,34H88a6,6,0,0,0-6,6V82H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H168a6,6,0,0,0,6-6V174h42a6,6,0,0,0,6-6V40A6,6,0,0,0,216,34ZM162,210H46V94H162Zm48-48H174V88a6,6,0,0,0-6-6H94V46H210Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,36H88a4,4,0,0,0-4,4V84H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H168a4,4,0,0,0,4-4V172h44a4,4,0,0,0,4-4V40A4,4,0,0,0,216,36ZM164,212H44V92H164Zm48-48H172V88a4,4,0,0,0-4-4H92V44H212Z"}))]]),fe=new Map([["bold",s.createElement(s.Fragment,null,s.createElement("path",{d:"M222.14,69.17,186.83,33.86A19.86,19.86,0,0,0,172.69,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V83.31A19.86,19.86,0,0,0,222.14,69.17ZM164,204H92V160h72Zm40,0H188V156a20,20,0,0,0-20-20H88a20,20,0,0,0-20,20v48H52V52H171l33,33ZM164,84a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h56A12,12,0,0,1,164,84Z"}))],["duotone",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216,83.31V208a8,8,0,0,1-8,8H176V152a8,8,0,0,0-8-8H88a8,8,0,0,0-8,8v64H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H172.69a8,8,0,0,1,5.65,2.34l35.32,35.32A8,8,0,0,1,216,83.31Z",opacity:"0.2"}),s.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["fill",s.createElement(s.Fragment,null,s.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM208,208H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["light",s.createElement(s.Fragment,null,s.createElement("path",{d:"M217.9,73.42,182.58,38.1a13.9,13.9,0,0,0-9.89-4.1H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V83.31A13.9,13.9,0,0,0,217.9,73.42ZM170,210H86V152a2,2,0,0,1,2-2h80a2,2,0,0,1,2,2Zm40-2a2,2,0,0,1-2,2H182V152a14,14,0,0,0-14-14H88a14,14,0,0,0-14,14v58H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H172.69a2,2,0,0,1,1.41.58L209.42,81.9a2,2,0,0,1,.58,1.41ZM158,72a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h56A6,6,0,0,1,158,72Z"}))],["regular",s.createElement(s.Fragment,null,s.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["thin",s.createElement(s.Fragment,null,s.createElement("path",{d:"M216.49,74.83,181.17,39.51A11.93,11.93,0,0,0,172.69,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V83.31A11.93,11.93,0,0,0,216.49,74.83ZM172,212H84V152a4,4,0,0,1,4-4h80a4,4,0,0,1,4,4Zm40-4a4,4,0,0,1-4,4H180V152a12,12,0,0,0-12-12H88a12,12,0,0,0-12,12v60H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H172.69a4,4,0,0,1,2.82,1.17l35.32,35.32A4,4,0,0,1,212,83.31ZM156,72a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h56A4,4,0,0,1,156,72Z"}))]]),q=s.forwardRef((p,b)=>s.createElement(z,{ref:b,...p,weights:be}));q.displayName="CopyIcon";const ye=q,L=s.forwardRef((p,b)=>s.createElement(z,{ref:b,...p,weights:fe}));L.displayName="FloppyDiskIcon";const ve=L,A=[{path:"/home",name:"Home",category:"Principal"},{path:"/crosby-bot",name:"Crosby Bot",category:"Principal"},{path:"/dashboard",name:"BI Externo",category:"Principal"},{path:"/dashboard-faturamento",name:"Dashboard Faturamento",category:"Principal"},{path:"/user-panel",name:"Painel do Usuário",category:"Principal"},{path:"/contas-a-pagar",name:"Contas a Pagar",category:"Financeiro"},{path:"/contas-a-pagar-emissao",name:"Contas a Pagar (Emissão)",category:"Financeiro"},{path:"/contas-a-receber",name:"Contas a Receber",category:"Financeiro"},{path:"/contas-a-receber-emissao",name:"Contas a Receber (Emissão)",category:"Financeiro"},{path:"/fluxo-caixa",name:"Fluxo de Caixa",category:"Financeiro"},{path:"/despesas-por-setor",name:"Despesas por Setor",category:"Financeiro"},{path:"/saldo-bancario",name:"Saldo Bancário",category:"Financeiro"},{path:"/importacao-ret",name:"Importação .RET",category:"Financeiro"},{path:"/extrato-financeiro",name:"Extrato Financeiro",category:"Financeiro"},{path:"/conciliacao",name:"Conciliação",category:"Financeiro"},{path:"/saldo-bancario-totvs",name:"Saldo Bancário TOTVS",category:"Financeiro"},{path:"/dre",name:"DRE",category:"Financeiro"},{path:"/receita-liquida",name:"Receita Líquida",category:"Financeiro"},{path:"/manifestacao-nf",name:"Manifestação de NF",category:"Financeiro"},{path:"/financeiro-por-canal",name:"Financeiro por Canal",category:"Financeiro"},{path:"/endividamento",name:"Endividamento",category:"Financeiro"},{path:"/dash-contas-a-receber",name:"PMR",category:"Financeiro"},{path:"/auditoria-cmv",name:"Auditoria CMV",category:"CMV"},{path:"/cmv-consolidado",name:"CMV Consolidado",category:"CMV"},{path:"/cmv-multimarcas",name:"CMV Multimarcas",category:"CMV"},{path:"/cmv-revenda",name:"CMV Revenda",category:"CMV"},{path:"/cmv-franquia",name:"CMV Franquia",category:"CMV"},{path:"/cmv-varejo",name:"CMV Varejo",category:"CMV"},{path:"/dashboard-varejo",name:"Dashboard Varejo",category:"Varejo"},{path:"/metas-varejo",name:"Metas Varejo",category:"Varejo"},{path:"/credev-varejo",name:"CREDEV Varejo",category:"Varejo"},{path:"/analise-cashback",name:"Análise Cashback",category:"Varejo"},{path:"/dashboard-multimarcas",name:"Dashboard Multimarcas",category:"Multimarcas"},{path:"/credev-multimarcas",name:"CREDEV Multimarcas",category:"Multimarcas"},{path:"/inadimplentes-multimarcas",name:"Inadimplentes Multimarcas",category:"Multimarcas"},{path:"/dashboard-revenda",name:"Dashboard Revenda",category:"Revenda"},{path:"/credev-revenda",name:"CREDEV Revenda",category:"Revenda"},{path:"/inadimplentes-revenda",name:"Inadimplentes Revenda",category:"Revenda"},{path:"/dashboard-franquias",name:"Dashboard Franquias",category:"Franquias"},{path:"/compras-franquias",name:"Compras Franquias",category:"Franquias"},{path:"/credev",name:"CREDEV",category:"Franquias"},{path:"/inadimplentes-franquias",name:"Inadimplentes Franquias",category:"Franquias"},{path:"/clientes",name:"Clientes",category:"Outros"},{path:"/auditoria-transacoes",name:"Auditoria de Transações",category:"Outros"},{path:"/widgets",name:"Meus Widgets",category:"Outros"},{path:"/ranking-faturamento",name:"Ranking Faturamento",category:"Outros"},{path:"https://vigia.crosbytech.com.br/",name:"Vigia",category:"Outros"},{path:"/painel-admin",name:"Painel Admin",category:"Administração"},{path:"/gerenciador-dashboards",name:"Gerenciador de Dashboards",category:"Administração"},{path:"/gerenciador-acessos",name:"Gerenciador de Acessos",category:"Administração"}],Fe=()=>{const{user:p}=ne(),{loading:b,error:E,users:y,loadUsersWithPermissions:u,savePermissions:U,saveBulkPermissions:B,copyPermissions:I,clearPermissions:O}=me(),[t,h]=s.useState([]),[v,G]=s.useState(""),[j,W]=s.useState(""),[g,l]=s.useState([]),[m,F]=s.useState("individual"),[V,x]=s.useState(!1),[Z,i]=s.useState(""),[S,o]=s.useState(""),[H,P]=s.useState("");if((p==null?void 0:p.role)!=="owner")return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:e.jsx(C,{className:"max-w-md",children:e.jsxs(M,{className:"p-8 text-center",children:[e.jsx(he,{size:64,className:"mx-auto text-red-500 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-gray-600",children:"Apenas proprietários podem acessar o gerenciador de acessos."})]})})});s.useEffect(()=>{u()},[u]);const f=s.useMemo(()=>{let a=y;if(v){const r=v.toLowerCase();a=a.filter(n=>n.email.toLowerCase().includes(r)||n.name.toLowerCase().includes(r)||n.role.toLowerCase().includes(r))}return j&&(a=a.filter(r=>r.role===j)),a},[y,v,j]),k=s.useMemo(()=>{const a={};return A.forEach(r=>{a[r.category]||(a[r.category]=[]),a[r.category].push(r)}),a},[]),_=a=>{if(m==="individual"){h([a]);const r=y.find(n=>n.id===a);l((r==null?void 0:r.permissions)||[])}else h(r=>r.includes(a)?r.filter(n=>n!==a):[...r,a])},J=a=>{l(r=>r.includes(a)?r.filter(n=>n!==a):[...r,a])},K=a=>{const r=k[a].map(c=>c.path),n=r.every(c=>g.includes(c));l(n?c=>c.filter(d=>!r.includes(d)):c=>[...new Set([...c,...r])])},Q=()=>{if(m==="bulk"){const a=f.map(r=>r.id);h(a)}},X=()=>{h([]),m==="individual"&&l([])},Y=()=>{const a=A.map(r=>r.path);l(a)},ee=()=>{l([])},ae=async()=>{if(t.length===0){o("Selecione pelo menos um usuário"),setTimeout(()=>o(""),3e3);return}x(!0),o(""),i("");try{if(m==="individual"&&t.length===1){const a=await U(t[0],g);a.success?(i("✅ Permissões salvas com sucesso!"),await u()):o(a.error||"Erro ao salvar permissões")}else{const a=await B(t,g);a.success?(i(`✅ Permissões salvas para ${t.length} usuários!`),await u()):o(a.error||"Erro ao salvar permissões em massa")}}catch(a){o(a.message||"Erro ao salvar permissões")}finally{x(!1),setTimeout(()=>i(""),3e3),setTimeout(()=>o(""),5e3)}},se=async()=>{if(!H||t.length===0){o("Selecione usuário de origem e destino"),setTimeout(()=>o(""),3e3);return}x(!0),o(""),i("");try{for(const a of t)await I(H,a);i("✅ Permissões copiadas com sucesso!"),await u(),P("")}catch(a){o(a.message||"Erro ao copiar permissões")}finally{x(!1),setTimeout(()=>i(""),3e3),setTimeout(()=>o(""),5e3)}},re=async()=>{if(t.length===0){o("Selecione pelo menos um usuário"),setTimeout(()=>o(""),3e3);return}if(confirm(`Tem certeza que deseja remover TODAS as permissões de ${t.length} usuário(s)?`)){x(!0),o(""),i("");try{for(const a of t)await O(a);i("✅ Permissões removidas com sucesso!"),await u(),l([])}catch(a){o(a.message||"Erro ao limpar permissões")}finally{x(!1),setTimeout(()=>i(""),3e3),setTimeout(()=>o(""),5e3)}}},te=a=>{const r={owner:"bg-purple-100 text-purple-700 border-purple-300",admin:"bg-red-100 text-red-700 border-red-300",manager:"bg-orange-100 text-orange-700 border-orange-300",user:"bg-blue-100 text-blue-700 border-blue-300",vendedor:"bg-green-100 text-green-700 border-green-300",guest:"bg-gray-100 text-gray-700 border-gray-300"};return r[a]||r.guest},oe=a=>({owner:"Proprietário",admin:"Admin",manager:"Gerente",user:"Financeiro",vendedor:"Vendedor",guest:"Convidado"})[a]||a;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[e.jsx(le,{title:"Gerenciador de Acessos",icon:R,subtitle:"Controle permissões de acesso dos usuários às páginas do sistema"}),Z&&e.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg flex items-center gap-2 shadow-sm",children:[e.jsx(ie,{size:20,className:"text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:Z})]}),(S||E)&&e.jsxs("div",{className:"mb-4 p-3 bg-gradient-to-r from-red-50 to-rose-50 border border-red-200 rounded-lg flex items-center gap-2 shadow-sm",children:[e.jsx(xe,{size:20,className:"text-red-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-red-800",children:S||E})]}),e.jsx(C,{className:"mb-4 shadow-md",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Modo de Seleção"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{F("individual"),h([]),l([])},className:`flex-1 px-3 py-2 rounded-lg text-xs font-semibold transition-all ${m==="individual"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Individual"}),e.jsx("button",{onClick:()=>{F("bulk"),h([]),l([])},className:`flex-1 px-3 py-2 rounded-lg text-xs font-semibold transition-all ${m==="bulk"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Em Massa"})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-700 mb-1.5",children:"Copiar Permissões De"}),e.jsxs("select",{value:H,onChange:a=>P(a.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Selecione um usuário"}),y.map(a=>e.jsxs("option",{value:a.id,children:[a.email," (",a.permissionsCount," páginas)"]},a.id))]})]}),e.jsx("div",{className:"flex items-end gap-2",children:H&&e.jsxs("button",{onClick:se,disabled:V||t.length===0,className:"flex-1 px-3 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1.5 text-xs font-semibold shadow-md transition-all",children:[e.jsx(ye,{size:16}),"Copiar"]})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(C,{className:"shadow-md",children:[e.jsx($,{className:"border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(D,{className:"text-base font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(ce,{size:20,className:"text-blue-600"}),"Usuários (",f.length,")"]}),e.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:[t.length," selecionado(s)"]})]})}),e.jsxs(M,{className:"p-3",children:[e.jsxs("div",{className:"mb-3 space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou role...",value:v,onChange:a=>G(a.target.value),className:"w-full pl-9 pr-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:j,onChange:a=>W(a.target.value),className:"w-full px-3 py-2 text-xs border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Todos os perfis"}),e.jsx("option",{value:"owner",children:"👑 Proprietário"}),e.jsx("option",{value:"admin",children:"🔴 Admin"}),e.jsx("option",{value:"manager",children:"🟠 Gerente"}),e.jsx("option",{value:"user",children:"🔵 Financeiro"}),e.jsx("option",{value:"vendedor",children:"🟢 Vendedor"}),e.jsx("option",{value:"guest",children:"⚪ Convidado"})]}),m==="bulk"&&f.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Q,className:"flex-1 px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 text-xs font-semibold transition-colors",children:["✓ Marcar Todos (",f.length,")"]}),e.jsx("button",{onClick:X,className:"flex-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-xs font-semibold transition-colors",children:"✗ Desmarcar Todos"})]})]}),b?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(T,{})}):e.jsx("div",{className:"space-y-1.5 max-h-[600px] overflow-y-auto pr-2",children:f.map(a=>{const r=t.includes(a.id);return e.jsx("button",{onClick:()=>_(a.id),className:`w-full p-2.5 rounded-lg border transition-all text-left ${r?"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-300 shadow-sm":"bg-white border-gray-200 hover:border-blue-200 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`mt-0.5 w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${r?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:r&&e.jsx(w,{size:12,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(de,{size:14,className:"text-gray-600 flex-shrink-0"}),e.jsx("p",{className:"text-xs font-semibold text-gray-900 truncate",children:a.name})]}),e.jsx("p",{className:"text-xs text-gray-600 truncate mb-1",children:a.email}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-[10px] font-semibold px-2 py-0.5 rounded-full border ${te(a.role)}`,children:oe(a.role)}),e.jsxs("span",{className:"text-[10px] text-gray-500",children:[a.permissionsCount," páginas"]})]})]})]})},a.id)})})]})]}),e.jsxs(C,{className:"shadow-md",children:[e.jsx($,{className:"border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50 p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(D,{className:"text-base font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(R,{size:20,className:"text-purple-600"}),"Páginas Disponíveis"]}),e.jsxs("span",{className:"text-xs font-semibold text-purple-600 bg-purple-100 px-2 py-1 rounded-full",children:[g.length," selecionada(s)"]})]})}),e.jsxs(M,{className:"p-3",children:[m==="individual"&&t.length===0&&e.jsxs("div",{className:"mb-3 p-2.5 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-2",children:[e.jsx(pe,{size:16,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-blue-800",children:"Selecione um usuário para visualizar/editar suas permissões"})]}),t.length>0&&e.jsxs("div",{className:"mb-3 flex gap-2",children:[e.jsxs("button",{onClick:Y,className:"flex-1 px-3 py-1.5 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 text-xs font-semibold transition-colors",children:["✓ Marcar Todas (",A.length,")"]}),e.jsx("button",{onClick:ee,className:"flex-1 px-3 py-1.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-xs font-semibold transition-colors",children:"✗ Desmarcar Todas"})]}),e.jsx("div",{className:"space-y-2 max-h-[550px] overflow-y-auto pr-2",children:Object.entries(k).map(([a,r])=>{const n=r.every(d=>g.includes(d.path)),c=r.some(d=>g.includes(d.path));return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2",children:[e.jsxs("button",{onClick:()=>K(a),className:"w-full flex items-center gap-2 mb-2 hover:bg-gray-50 rounded p-1.5 transition-colors",children:[e.jsxs("div",{className:`w-4 h-4 rounded border-2 flex items-center justify-center flex-shrink-0 ${n?"bg-purple-600 border-purple-600":c?"bg-purple-300 border-purple-300":"border-gray-300"}`,children:[n&&e.jsx(w,{size:12,className:"text-white"}),c&&!n&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-sm"})]}),e.jsx("span",{className:"text-xs font-bold text-gray-700",children:a}),e.jsxs("span",{className:"text-[10px] text-gray-500 ml-auto",children:[r.length," páginas"]})]}),e.jsx("div",{className:"space-y-1 ml-6",children:r.map(d=>{const N=g.includes(d.path);return e.jsxs("button",{onClick:()=>J(d.path),className:`w-full flex items-center gap-2 p-1.5 rounded text-left transition-colors ${N?"bg-purple-50 hover:bg-purple-100":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-3.5 h-3.5 rounded border-2 flex items-center justify-center flex-shrink-0 ${N?"bg-purple-600 border-purple-600":"border-gray-300"}`,children:N&&e.jsx(w,{size:10,className:"text-white"})}),e.jsx("span",{className:`text-xs ${N?"font-semibold text-purple-900":"text-gray-700"}`,children:d.name})]},d.path)})})]},a)})}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex gap-2",children:[e.jsx("button",{onClick:ae,disabled:V||t.length===0,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm font-bold shadow-md transition-all",children:V?e.jsxs(e.Fragment,{children:[e.jsx(T,{size:"sm"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ve,{size:18}),"Salvar Permissões"]})}),e.jsxs("button",{onClick:re,disabled:V||t.length===0,className:"px-4 py-2.5 bg-gradient-to-r from-red-600 to-rose-600 text-white rounded-lg hover:from-red-700 hover:to-rose-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm font-bold shadow-md transition-all",children:[e.jsx(ue,{size:18}),"Limpar"]})]})]})]})]})]})})};export{Fe as default};
