import{r as g,R as he,j as e,k as J,p as K,o as I,q as W,t as be,_ as X,s as je}from"./index-a2563983.js";import{C as D,a as C,b as P,c as S,d as j}from"./cards-fd94db0b.js";import{u as fe}from"./useApiClient-0bf86fc1.js";import{m as Ne}from"./ArrowClockwise.es-a22fa37a.js";import{s as ve}from"./CaretUp.es-b369da07.js";import{m as Z}from"./CurrencyDollar.es-0edca053.js";import{s as ye}from"./Funnel.es-cd3339ac.js";import{p as F}from"./Spinner.es-3c850cda.js";const Te=()=>{const R=fe(),[q,M]=g.useState([]),[ee,O]=g.useState([]),[f,B]=g.useState(""),[N,Y]=g.useState(""),[p,G]=g.useState(!1),[w,H]=g.useState(!1),[h,ae]=g.useState("Todos"),[n,U]=g.useState("lojas"),[v,se]=g.useState({campo:null,direcao:"asc"});console.log("RankingFaturamento: Componente renderizado");const oe=async(s,a)=>{var o;if(!(!s||!a)){console.log("🔍 Iniciando busca de faturamento por lojas:",{inicio:s,fim:a}),G(!0);try{const t={dt_inicio:s,dt_fim:a,cd_grupoempresa_ini:1,cd_grupoempresa_fim:9999},r=await R.company.faturamentoLojas(t);if(r.success){const l=r.data||[];console.log("✅ Dados de lojas recebidos:",{total:l.length,estatisticas:(o=r.metadata)==null?void 0:o.estatisticas,amostra:l.slice(0,2)});const c=[...l].sort((d,x)=>parseFloat(x.faturamento||0)-parseFloat(d.faturamento||0)).map((d,x)=>({...d,rank:x+1,faturamento:parseFloat(d.faturamento||0)}));M(c)}else throw new Error(r.message||"Erro ao buscar dados de faturamento")}catch(t){console.error("❌ Erro ao buscar dados de lojas:",t),alert("Erro ao carregar dados. Tente novamente."),M([])}finally{G(!1)}}},te=async(s,a)=>{if(!(!s||!a)){console.log("🔍 Iniciando busca de ranking de vendedores:",{inicio:s,fim:a}),H(!0);try{const o={inicio:s,fim:a},t=await R.sales.rankingVendedores(o);if(t.success){const r=t.data||[];console.log("✅ [DEBUG] Quantidade de vendedores recebidos da API:",r.length),console.log("✅ Dados de vendedores recebidos:",{total:r.length,amostra:r.slice(0,2)});const b=[...r].sort((c,d)=>parseFloat(d.faturamento||0)-parseFloat(c.faturamento||0)).map((c,d)=>({...c,rank:d+1,faturamento:parseFloat(c.faturamento||0)}));O(b)}else throw new Error(t.message||"Erro ao buscar dados de vendedores")}catch(o){console.error("❌ Erro ao buscar dados de vendedores:",o),alert("Erro ao carregar dados de vendedores. Tente novamente."),O([])}finally{H(!1)}}},u=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s),T=s=>{if(!s)return"";const[a,o,t]=s.split("-");return`${t}-${o}-${a}`},Q=s=>new Promise((a,o)=>{const t=new Image;t.crossOrigin="anonymous",t.onload=()=>a(t),t.onerror=()=>o(new Error(`Falha ao carregar imagem: ${s}`)),t.src=s}),re=async()=>{try{console.log("Iniciando exportação PDF - Lojas"),console.log("Dados disponíveis:",i.length),console.log("Importando jsPDF...");const s=(await X(()=>import("./jspdf.es.min-563825e3.js").then(c=>c.j),["assets/jspdf.es.min-563825e3.js","assets/index-a2563983.js","assets/index-c61181ea.css"])).default;console.log("jsPDF importado com sucesso"),console.log("Criando documento...");const a=new s;console.log("Documento criado"),console.log("Adicionando logo...");try{const c=await Q("/cr.png");console.log("Logo carregado com sucesso, adicionando ao PDF..."),a.addImage(c,"PNG",14,10,50,20),console.log("Logo adicionado ao PDF")}catch(c){console.log("Erro ao carregar logo, usando texto:",c),a.setFontSize(16),a.setFont("helvetica","bold"),a.setTextColor(0,6,56),a.text("CROSBY",14,20)}console.log("Logo adicionado"),console.log("Adicionando título..."),a.setFontSize(18),a.setFont("helvetica","bold"),a.setTextColor(0,0,0),a.text("Ranking de Faturamento - Lojas",14,45),console.log("Título adicionado"),console.log("Adicionando informações do período..."),a.setFontSize(12),a.setFont("helvetica","normal"),a.text(`Período: ${T(f)} a ${T(N)}`,14,55),a.text(`Tipo: ${h}`,14,63),console.log("Informações do período adicionadas"),console.log("Adicionando cabeçalho da tabela...");const o=75,t=8;a.setFillColor(0,6,56),a.rect(14,o-5,186,t,"F"),a.setFontSize(10),a.setFont("helvetica","bold"),a.setTextColor(255,255,255),a.text("#",17,o),a.text("Loja",35,o),a.text("Faturamento",125,o),a.text("PA",165,o),a.text("TM",185,o),console.log("Cabeçalho da tabela adicionado"),console.log("Adicionando dados da tabela..."),a.setFontSize(9),a.setFont("helvetica","normal");let r=o+10,l=0;i.forEach((c,d)=>{try{console.log(`Processando item ${d+1}:`,c),r>270&&(console.log("Adicionando nova página..."),a.addPage(),r=20),d%2===1&&(a.setFillColor(230,232,235),a.rect(14,r-5,186,8,"F"));const x=Number(c.transacoes_saida)||0,y=x>0?c.faturamento/x:0;a.setTextColor(0,0,0);const L=Number(c.transacoes_saida)||0,z=Number(c.pa_saida)||0,V=Number(c.pa_entrada)||0,A=L>0?(z-V)/L:0;a.text(String(c.rank||""),17,r),a.text(String(c.nome_fantasia||"N/A"),35,r),a.text(u(c.faturamento||0),125,r),a.text(String(A.toFixed(2)),165,r),a.text(u(y),185,r),r+=10,l++}catch(x){console.error(`Erro ao processar item ${d}:`,x)}}),console.log(`Total de itens processados: ${l}`);const b=`ranking-lojas-${f}-${N}.pdf`;console.log("Salvando arquivo:",b),a.save(b),console.log("PDF gerado com sucesso!")}catch(s){console.error("Erro ao gerar PDF - Lojas:",s),console.error("Stack trace:",s.stack),alert("Erro ao gerar PDF. Verifique o console para mais detalhes.")}},ne=async()=>{try{console.log("Iniciando exportação PDF - Vendedores");const s=m.slice(0,100);console.log("Dados disponíveis para PDF (limitado a 100):",s.length),console.log("Importando jsPDF...");const a=(await X(()=>import("./jspdf.es.min-563825e3.js").then(d=>d.j),["assets/jspdf.es.min-563825e3.js","assets/index-a2563983.js","assets/index-c61181ea.css"])).default;console.log("jsPDF importado com sucesso"),console.log("Criando documento...");const o=new a;console.log("Documento criado"),console.log("Adicionando logo...");try{const d=await Q("/cr.png");console.log("Logo carregado com sucesso, adicionando ao PDF..."),o.addImage(d,"PNG",14,10,50,20),console.log("Logo adicionado ao PDF")}catch(d){console.log("Erro ao carregar logo, usando texto:",d),o.setFontSize(16),o.setFont("helvetica","bold"),o.setTextColor(0,6,56),o.text("CROSBY",14,20)}console.log("Logo adicionado"),console.log("Adicionando título..."),o.setFontSize(18),o.setFont("helvetica","bold"),o.setTextColor(0,0,0),o.text("Ranking de Faturamento - Vendedores",14,45),console.log("Título adicionado"),console.log("Adicionando informações do período..."),o.setFontSize(12),o.setFont("helvetica","normal"),o.text(`Período: ${T(f)} a ${T(N)}`,14,55),o.text(`Tipo: ${h}`,14,63),console.log("Informações do período adicionadas"),console.log("Adicionando cabeçalho da tabela...");const t=75,r=8;o.setFillColor(0,6,56),o.rect(14,t-5,186,r,"F"),o.setFontSize(10),o.setFont("helvetica","bold"),o.setTextColor(255,255,255),o.text("#",17,t),o.text("Vendedor",35,t),o.text("Faturamento",125,t),o.text("PA",165,t),o.text("TM",185,t),console.log("Cabeçalho da tabela adicionado"),console.log("Adicionando dados da tabela..."),o.setFontSize(9),o.setFont("helvetica","normal");let l=t+10,b=0;s.forEach((d,x)=>{try{console.log(`Processando item ${x+1}:`,d),l>270&&(console.log("Adicionando nova página..."),o.addPage(),l=20),x%2===1&&(o.setFillColor(230,232,235),o.rect(14,l-5,186,8,"F"));const y=Number(d.transacoes_saida)||0,L=y>0?d.faturamento/y:0,z=Number(d.transacoes_saida)||0,V=Number(d.pa_saida)||0,A=Number(d.pa_entrada)||0,pe=z>0?(V-A)/z:0;o.setTextColor(0,0,0),o.text(String(d.rank||""),17,l),o.text(String(d.nome_vendedor||"N/A"),35,l),o.text(u(d.faturamento||0),125,l),o.text(String(pe.toFixed(2)),165,l),o.text(u(L),185,l),l+=10,b++}catch(y){console.error(`Erro ao processar item ${x}:`,y)}}),console.log(`Total de itens processados: ${b}`);const c=`ranking-vendedores-${f}-${N}.pdf`;console.log("Salvando arquivo:",c),o.save(c),console.log("PDF gerado com sucesso!")}catch(s){console.error("Erro ao gerar PDF - Vendedores:",s),console.error("Stack trace:",s.stack),alert("Erro ao gerar PDF. Verifique o console para mais detalhes.")}};g.useEffect(()=>{B(""),Y("")},[]),console.log("Total de dados recebidos:",q.length);const i=q.filter(s=>{var o;const a=((o=s.nome_fantasia)==null?void 0:o.toUpperCase())||"";if(console.log("Filtrando loja:",a,"Tipo selecionado:",h),h==="Franquias"){const t=a.includes("F0");return console.log("É franquia?",t),t}if(h==="Proprias"){const t=a.includes("-")||a.includes("- CROSBY");return console.log("É própria?",!t),!t}return!0}).filter(s=>{const a=s.faturamento>0;return a||console.log("Item sem faturamento:",s.nome_fantasia,"Faturamento:",s.faturamento),a});console.log("Itens após filtros:",i.length);const m=ee.filter(s=>{var a,o;return h==="Franquias"?!((a=s.nome_vendedor)!=null&&a.includes("- INT")):h==="Proprias"?(o=s.nome_vendedor)==null?void 0:o.includes("- INT"):!0}).filter(s=>s.faturamento>0),le=i.reduce((s,a)=>s+a.faturamento,0),de=m.reduce((s,a)=>s+a.faturamento,0),ce=i.length>0?i.reduce((s,a)=>{const o=Number(a.transacoes_saida)||0,t=o>0?a.faturamento/o:0;return s+t},0)/i.length:0,ie=i.length>0?i.reduce((s,a)=>{const o=Number(a.transacoes_saida)||0,t=Number(a.pa_saida)||0,r=Number(a.pa_entrada)||0,l=o>0?(t-r)/o:0;return s+l},0)/i.length:0,me=m.length>0?m.reduce((s,a)=>{const o=Number(a.transacoes_saida)||0,t=o>0?a.faturamento/o:0;return s+t},0)/m.length:0,xe=m.length>0?m.reduce((s,a)=>{const o=Number(a.transacoes_saida)||0,t=Number(a.pa_saida)||0,r=Number(a.pa_entrada)||0,l=o>0?(t-r)/o:0;return s+l},0)/m.length:0,ue=s=>s>=400?"bg-green-200":s>=375?"bg-green-100":s>=350?"bg-lime-100":s>=325?"bg-lime-200":s>=300?"bg-yellow-100":s>=275?"bg-yellow-200":s>=250?"bg-amber-200":s>=230?"bg-orange-100":s>=200?"bg-orange-200":s>=175?"bg-red-100":s>=150?"bg-red-200":"",k=s=>{se(a=>({campo:s,direcao:a.campo===s&&a.direcao==="asc"?"desc":"asc"}))},_=s=>v.campo!==s?null:v.direcao==="asc"?e.jsx(ve,{size:12,className:"ml-1 inline-block"}):e.jsx(je,{size:12,className:"ml-1 inline-block"}),ge=he.useMemo(()=>{if(!v.campo)return m;const s=o=>{const t=Number(o.transacoes_saida)||0,r=Number(o.pa_saida)||0,l=Number(o.pa_entrada)||0;return t>0?(r-l)/t:0},a=o=>{const t=Number(o.transacoes_saida)||0;return t>0?(Number(o.faturamento)||0)/t:0};return[...m].sort((o,t)=>{let r,l;switch(v.campo){case"rank":r=o.rank||0,l=t.rank||0;break;case"nome":r=(o.nome_vendedor||"").toLowerCase(),l=(t.nome_vendedor||"").toLowerCase();break;case"faturamento":r=Number(o.faturamento)||0,l=Number(t.faturamento)||0;break;case"pa":r=s(o),l=s(t);break;case"tm":r=a(o),l=a(t);break;default:r=0,l=0}return r<l?v.direcao==="asc"?-1:1:r>l?v.direcao==="asc"?1:-1:0})},[m,v]),E=i.length>0?i[0]:null,$=m.length>0?m[0]:null;return e.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col items-stretch justify-start py-8 px-4",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-center text-[#000638]",children:"Ranking de Faturamento"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg mb-6 border border-[#000638]/10",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ye,{size:22,weight:"bold",className:"text-[#000638] mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-[#000638]",children:"Filtros"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Selecione o período e tipo de loja para análise"})]}),e.jsxs("div",{className:"p-6 pt-0",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Início"}),e.jsx("input",{type:"date",value:f,onChange:s=>B(s.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Data Fim"}),e.jsx("input",{type:"date",value:N,onChange:s=>Y(s.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-semibold mb-1 text-[#000638]",children:"Tipo de Loja"}),e.jsxs("select",{value:h,onChange:s=>ae(s.target.value),className:"border border-[#000638]/30 rounded-lg px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638]",children:[e.jsx("option",{value:"Todos",children:"Todos"}),e.jsx("option",{value:"Proprias",children:"Próprias"}),e.jsx("option",{value:"Franquias",children:"Franquias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("button",{onClick:()=>{oe(f,N),te(f,N)},disabled:p||w,className:`flex items-center justify-center px-4 py-3 rounded-lg font-semibold text-white transition-colors ${p||w?"bg-gray-400 cursor-not-allowed":"bg-[#000638] hover:bg-[#fe0000]"}`,children:p||w?e.jsxs(e.Fragment,{children:[e.jsx(F,{size:20,className:"animate-spin mr-2"}),e.jsx("span",{children:"Atualizando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{size:20,className:"mr-2"}),e.jsx("span",{children:"Atualizar"})]})}),e.jsxs("button",{onClick:re,disabled:i.length===0,className:`flex items-center justify-center px-4 py-3 rounded-lg font-semibold text-white transition-colors ${i.length===0?"bg-gray-400 cursor-not-allowed":"bg-[#000638] hover:bg-[#fe0000]"}`,children:[e.jsx(J,{size:20,className:"mr-2"}),e.jsx("span",{children:"Baixar Lojas"})]}),e.jsxs("button",{onClick:ne,disabled:m.length===0,className:`flex items-center justify-center px-4 py-3 rounded-lg font-semibold text-white transition-colors ${m.length===0?"bg-gray-400 cursor-not-allowed":"bg-[#000638] hover:bg-[#fe0000]"}`,children:[e.jsx(J,{size:20,className:"mr-2"}),e.jsx("span",{children:"Baixar Vendedores"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg mb-6 border border-[#000638]/10",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(K,{size:22,weight:"bold",className:"text-[#000638] mr-2"}),e.jsx("h2",{className:"text-xl font-semibold text-[#000638]",children:"Tipo de Ranking"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Escolha entre ranking de lojas ou vendedores"})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>U("lojas"),className:`flex items-center justify-center px-4 py-3 rounded-lg border transition-colors ${n==="lojas"?"bg-[#000638] border-[#000638] text-white":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(I,{size:20,className:"mr-2"}),e.jsx("span",{className:"font-semibold",children:"Lojas"})]}),e.jsxs("button",{onClick:()=>U("vendedores"),className:`flex items-center justify-center px-4 py-3 rounded-lg border transition-colors ${n==="vendedores"?"bg-[#000638] border-[#000638] text-white":"bg-white border-gray-300 text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(W,{size:20,className:"mr-2"}),e.jsx("span",{className:"font-semibold",children:"Vendedores"})]})]})})]}),(p||w)&&e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(F,{size:32,className:"animate-spin text-[#000638] mr-3"}),e.jsx("span",{className:"text-gray-600",children:"Carregando dados..."})]}),!p&&!w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-8 justify-center",children:[e.jsxs(D,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl w-64 bg-white",children:[e.jsx(C,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:18,className:"text-blue-600"}),e.jsx(P,{className:"text-sm font-bold text-blue-700",children:"TM"})]})}),e.jsxs(S,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-2xl font-extrabold text-blue-600 mb-1",children:p?e.jsx(F,{size:24,className:"animate-spin text-blue-600"}):u(n==="lojas"?ce:me)}),e.jsx(j,{className:"text-xs text-gray-500",children:n==="lojas"?"Média das lojas":"Média dos vendedores"})]})]}),e.jsxs(D,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl w-64 bg-white",children:[e.jsx(C,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{size:18,className:"text-purple-600"}),e.jsx(P,{className:"text-sm font-bold text-purple-700",children:"Performance (PA)"})]})}),e.jsxs(S,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-2xl font-extrabold text-purple-600 mb-1",children:p?e.jsx(F,{size:24,className:"animate-spin text-purple-600"}):(n==="lojas"?ie:xe).toFixed(2)}),e.jsx(j,{className:"text-xs text-gray-500",children:n==="lojas"?"Média das lojas":"Média dos vendedores"})]})]}),e.jsxs(D,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl w-64 bg-white",children:[e.jsx(C,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{size:18,className:"text-green-600"}),e.jsxs(P,{className:"text-sm font-bold text-green-700",children:["Total de ",n==="lojas"?"Lojas":"Vendedores"]})]})}),e.jsxs(S,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-2xl font-extrabold text-green-600 mb-1",children:p?e.jsx(F,{size:24,className:"animate-spin text-green-600"}):n==="lojas"?i.length:m.length}),e.jsxs(j,{className:"text-xs text-gray-500",children:[n==="lojas"?"Lojas":"Vendedores"," no período"]})]})]}),e.jsxs(D,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl w-64 bg-white",children:[e.jsx(C,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{size:18,className:"text-orange-600"}),e.jsx(P,{className:"text-sm font-bold text-orange-700",children:"Faturamento Total"})]})}),e.jsxs(S,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-2xl font-extrabold text-orange-600 mb-1 break-words",children:p?e.jsx(F,{size:24,className:"animate-spin text-orange-600"}):u(n==="lojas"?le:de)}),e.jsx(j,{className:"text-xs text-gray-500",children:n==="lojas"?"Faturamento das lojas":"Faturamento dos vendedores"})]})]}),e.jsxs(D,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl w-64 bg-white",children:[e.jsx(C,{className:"pb-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{size:18,className:"text-yellow-600"}),e.jsx(P,{className:"text-sm font-bold text-yellow-700",children:n==="lojas"?"Loja Destaque":"Vendedor Destaque"})]})}),e.jsx(S,{className:"pt-0 px-4 pb-4",children:n==="lojas"?E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600 mb-1 truncate",children:E.nome_fantasia||E.nome||"Loja Destaque"}),e.jsx(j,{className:"text-xs text-gray-500 mb-2",children:"1º Lugar no Ranking"}),e.jsx("div",{className:"text-sm font-semibold text-yellow-600",children:u(Number(E.faturamento))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-bold text-gray-400 mb-1",children:"Nenhuma loja"}),e.jsx(j,{className:"text-xs text-gray-400",children:"Sem dados disponíveis"})]}):$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600 mb-1 truncate",children:$.nome_vendedor||"Vendedor Destaque"}),e.jsx(j,{className:"text-xs text-gray-500 mb-2",children:"1º Lugar no Ranking"}),e.jsx("div",{className:"text-sm font-semibold text-yellow-600",children:u(Number($.faturamento))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-lg font-bold text-gray-400 mb-1",children:"Nenhum vendedor"}),e.jsx(j,{className:"text-xs text-gray-400",children:"Sem dados disponíveis"})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-[#000638]/10",children:[e.jsxs("div",{className:"p-6 pb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[n==="lojas"?e.jsx(I,{size:22,weight:"bold",className:"text-[#000638] mr-2"}):e.jsx(W,{size:22,weight:"bold",className:"text-[#000638] mr-2"}),e.jsxs("h2",{className:"text-xl font-semibold text-[#000638]",children:["Ranking de ",n==="lojas"?"Lojas":"Vendedores"]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n==="lojas"?"lojas":"vendedores"," por faturamento"]})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider w-16",children:e.jsxs("button",{type:"button",className:"inline-flex items-center hover:text-[#000638]",onClick:()=>n==="vendedores"&&k("rank"),children:["#"," ",n==="vendedores"&&_("rank")]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:e.jsxs("button",{type:"button",className:"inline-flex items-center hover:text-[#000638]",onClick:()=>n==="vendedores"&&k("nome"),children:[n==="lojas"?"Loja":"Vendedor"," ",n==="vendedores"&&_("nome")]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider w-40",children:e.jsxs("button",{type:"button",className:"inline-flex items-center hover:text-[#000638]",onClick:()=>n==="vendedores"&&k("faturamento"),children:["Faturamento"," ",n==="vendedores"&&_("faturamento")]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider w-24",children:e.jsxs("button",{type:"button",className:"inline-flex items-center hover:text-[#000638]",onClick:()=>n==="vendedores"&&k("pa"),children:["PA"," ",n==="vendedores"&&_("pa")]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider w-40",children:e.jsxs("button",{type:"button",className:"inline-flex items-center hover:text-[#000638]",onClick:()=>n==="vendedores"&&k("tm"),children:["TM"," ",n==="vendedores"&&_("tm")]})})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[(n==="lojas"?i:ge).map(s=>e.jsxs("tr",{className:`hover:bg-gray-50 ${(()=>{if(n!=="vendedores")return"";const a=Number(s.transacoes_saida)||0,o=a>0?s.faturamento/a:0;return ue(o)})()}`,children:[e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-blue-600",children:s.rank}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:n==="lojas"?s.nome_fantasia||s.nome||`Loja ${s.rank}`:s.nome_vendedor||`Vendedor ${s.rank}`}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:u(Number(s.faturamento))}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:(()=>{const a=Number(s.transacoes_saida)||0,o=Number(s.pa_saida)||0,t=Number(s.pa_entrada)||0;return a>0?((o-t)/a).toFixed(2):"0.00"})()}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:(()=>{const a=Number(s.transacoes_saida)||0;return a>0?u(s.faturamento/a):"R$ 0,00"})()})]},s.rank)),(n==="lojas"?i:m).length===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-600",children:["Nenhum ",n==="lojas"?"loja":"vendedor"," ","encontrado para o período selecionado"]})})]})]})})})]})]})]})};export{Te as default};
