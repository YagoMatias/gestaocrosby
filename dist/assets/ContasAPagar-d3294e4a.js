import{f as oe,u as bs,r as i,j as e,P as js,b as ca,c as Nt,d as bt,s as Ue,e as jt}from"./index-a2563983.js";import{F as _s}from"./FiltroEmpresa-724027b5.js";import{F as Ns,a as ws,b as Cs,M as As}from"./ModalDetalhesConta-1648dc6c.js";import{u as Ss}from"./useApiClient-0bf86fc1.js";import{C as me,a as pe,b as ue,c as he,d as ge}from"./cards-fd94db0b.js";import"./tooltip-7f0eaba7.js";import{l as L,F as B}from"./FilterDropdown-c1467603.js";import{c as la}from"./ArrowDown.es-b2258871.js";import{s as ia}from"./ArrowUp.es-3ccbaccd.js";import{s as Ps}from"./CaretUp.es-b369da07.js";import{n as da}from"./Clock.es-5bd0a93a.js";import{m as Es}from"./CurrencyDollar.es-0edca053.js";import{w as Ds}from"./FileArrowDown.es-b235db0a.js";import{s as zs}from"./Funnel.es-cd3339ac.js";import{p as Q}from"./Spinner.es-3c850cda.js";import{n as xa}from"./Trash.es-c4902777.js";import{s as ks}from"./TrendDown.es-4f66c864.js";import{c as ma}from"./Warning.es-51a03ee6.js";import{s as _t}from"./XCircle.es-fcbde856.js";import{utils as Ie,write as pa}from"./xlsx-6ed613d4.js";import{F as ua}from"./FileSaver.min-01e85130.js";import{g as Fs}from"./categoriasDespesas-4bfb6d86.js";import"./Info.es-1c589a57.js";import"./Button-3b4dd265.js";const re={NAO_AUTORIZADO:"NAO_AUTORIZADO",AUTORIZADO:"AUTORIZADO",ENVIADO_PAGAMENTO:"ENVIADO_PAGAMENTO"},Rs={async buscarAutorizacoes(){try{const{data:x,error:d}=await oe.from("contas_autorizacoes").select("*").order("autorizado_em",{ascending:!1});if(d)throw d;const c={};return x.forEach(m=>{c[m.chave_unica]={autorizadoPor:m.autorizado_por,status:m.status||re.AUTORIZADO,enviadoPor:m.enviado_por,dataAutorizacao:m.autorizado_em,dataEnvioPagamento:m.data_envio_pagamento}}),{data:c,error:null}}catch(x){return console.error("Erro ao buscar autorizaÃ§Ãµes:",x),{data:null,error:x}}},async autorizarConta(x,d,c){try{const{data:m,error:q}=await oe.from("contas_autorizacoes").upsert({chave_unica:x,cd_fornecedor:d.cd_fornecedor,nr_duplicata:d.nr_duplicata,cd_empresa:d.cd_empresa,nr_parcela:d.nr_parcela,autorizado_por:c,status:re.AUTORIZADO,autorizado_em:new Date().toISOString()},{onConflict:"chave_unica"}).select();if(q)throw q;return{data:m,error:null}}catch(m){return console.error("Erro ao autorizar conta:",m),{data:null,error:m}}},async enviarParaPagamento(x,d){try{const{data:c,error:m}=await oe.from("contas_autorizacoes").update({status:re.ENVIADO_PAGAMENTO,enviado_por:d,data_envio_pagamento:new Date().toISOString()}).eq("chave_unica",x).select();if(m)throw m;return{data:c,error:null}}catch(c){return console.error("Erro ao enviar para pagamento:",c),{data:null,error:c}}},async removerEnviadoParaPagamento(x){try{const{data:d,error:c}=await oe.from("contas_autorizacoes").update({status:re.AUTORIZADO,enviado_por:null,data_envio_pagamento:null}).eq("chave_unica",x).select();if(c)throw c;return{data:d,error:null}}catch(d){return console.error("Erro ao remover enviado para pagamento:",d),{data:null,error:d}}},async removerAutorizacao(x){try{const{error:d}=await oe.from("contas_autorizacoes").delete().eq("chave_unica",x);if(d)throw d;return{data:!0,error:null}}catch(d){return console.error("Erro ao remover autorizaÃ§Ã£o:",d),{data:null,error:d}}},async autorizarMultiplasContas(x,d){try{const c=x.map(G=>({chave_unica:`${G.item.cd_fornecedor}|${G.item.nr_duplicata}|${G.item.cd_empresa}|${G.item.nr_parcela}`,cd_fornecedor:G.item.cd_fornecedor,nr_duplicata:G.item.nr_duplicata,cd_empresa:G.item.cd_empresa,nr_parcela:G.item.nr_parcela,autorizado_por:d,status:re.AUTORIZADO,autorizado_em:new Date().toISOString()})),{data:m,error:q}=await oe.from("contas_autorizacoes").upsert(c,{onConflict:"chave_unica"}).select();if(q)throw q;return{data:m,error:null}}catch(c){return console.error("Erro ao autorizar mÃºltiplas contas:",c),{data:null,error:c}}},async enviarMultiplasParaPagamento(x,d){try{const{data:c,error:m}=await oe.from("contas_autorizacoes").update({status:re.ENVIADO_PAGAMENTO,enviado_por:d,data_envio_pagamento:new Date().toISOString()}).in("chave_unica",x).select();if(m)throw m;return{data:c,error:null}}catch(c){return console.error("Erro ao enviar mÃºltiplas contas para pagamento:",c),{data:null,error:c}}},async removerMultiplasEnviadasParaPagamento(x){try{const{data:d,error:c}=await oe.from("contas_autorizacoes").update({status:re.AUTORIZADO,enviado_por:null,data_envio_pagamento:null}).in("chave_unica",x).select();if(c)throw c;return{data:d,error:null}}catch(d){return console.error("Erro ao remover mÃºltiplas contas enviadas para pagamento:",d),{data:null,error:d}}},async removerMultiplasAutorizacoes(x){try{const d=x.map(m=>`${m.item.cd_fornecedor}|${m.item.nr_duplicata}|${m.item.cd_empresa}|${m.item.nr_parcela}`),{error:c}=await oe.from("contas_autorizacoes").delete().in("chave_unica",d);if(c)throw c;return{data:!0,error:null}}catch(d){return console.error("Erro ao remover mÃºltiplas autorizaÃ§Ãµes:",d),{data:null,error:d}}},async buscarAutorizacoesPorPeriodo(x,d){try{const{data:c,error:m}=await oe.from("contas_autorizacoes").select("*").gte("autorizado_em",x).lte("autorizado_em",d).order("autorizado_em",{ascending:!1});if(m)throw m;const q={};return c.forEach(G=>{q[G.chave_unica]={autorizadoPor:G.autorizado_por,status:G.status||re.AUTORIZADO,enviadoPor:G.enviado_por,dataAutorizacao:G.autorizado_em,dataEnvioPagamento:G.data_envio_pagamento}}),{data:q,error:null}}catch(c){return console.error("Erro ao buscar autorizaÃ§Ãµes por perÃ­odo:",c),{data:null,error:c}}},async buscarEstatisticasAutorizacoes(){try{const{data:x,error:d}=await oe.from("contas_autorizacoes").select("autorizado_por, status, autorizado_em").order("autorizado_em",{ascending:!1});if(d)throw d;const c={};return x.forEach(m=>{c[m.autorizado_por]||(c[m.autorizado_por]={total:0,autorizados:0,enviadosPagamento:0}),c[m.autorizado_por].total++,m.status===re.AUTORIZADO?c[m.autorizado_por].autorizados++:m.status===re.ENVIADO_PAGAMENTO&&c[m.autorizado_por].enviadosPagamento++}),{data:c,error:null}}catch(x){return console.error("Erro ao buscar estatÃ­sticas:",x),{data:null,error:x}}}},Y=x=>{if(!x)return null;if(x.includes("T")){const d=x.split("T")[0],[c,m,q]=d.split("-");return new Date(parseInt(c),parseInt(m)-1,parseInt(q))}if(x.includes("/")){const[d,c,m]=x.split("/");return new Date(parseInt(m),parseInt(c)-1,parseInt(d))}return new Date(x)},J=x=>{if(!x)return"";if(x.includes("T")){const d=x.split("T")[0],[c,m,q]=d.split("-");return`${q}/${m}/${c}`}return x},Os=x=>{var Ut,Gt,Zt;const{user:d,hasRole:c}=((Ut=bs)==null?void 0:Ut())||{user:null,hasRole:()=>!1},m=Ss(),q=!!(x!=null&&x.__modoEmissao),G=((x==null?void 0:x.__blockedCostCenters)||[]).map(t=>typeof t=="string"?parseInt(t,10):Number(t));i.useEffect(()=>{console.log("ðŸ” DEBUG - UsuÃ¡rio atual:",d),console.log("ðŸ” DEBUG - Role do usuÃ¡rio:",d==null?void 0:d.role),console.log("ðŸ” DEBUG - hasRole owner:",c(["owner","admin","manager"])),console.log("ðŸ” DEBUG - hasRole user:",c(["user"]))},[d,c]);const[fe,le]=i.useState([]),[Ge,Ze]=i.useState([]),[rt,nt]=i.useState([]),[k,F]=i.useState([]),[Ve,_e]=i.useState(""),[ie,Ne]=i.useState({isOpen:!1,conta:null});i.useEffect(()=>{const t=document.createElement("style");return t.textContent=`
      .table-container {
        overflow-x: auto;
        position: relative;
      }
      
      .table-container table {
        position: relative;
      }
      
      .contas-table {
        border-collapse: collapse;
        width: 100%;
      }
      
      .contas-table th,
      .contas-table td {
        padding: !important;
        border-right: 1px solid #f3f4f6;
        word-wrap: break-word;
        white-space: normal;
        font-size: 11px;
        line-height: 1.3;
      }
      
      .contas-table th:last-child,
      .contas-table td:last-child {
        border-right: none;
      }
      
      .contas-table th {
        background-color: #000638;
        color: white;
        font-weight: 600;
        text-transform: uppercase;
        font-size: 10px;
        letter-spacing: 0.05em;
      }
      
      .contas-table tbody tr:nth-child(odd) {
        background-color: white;
      }
      
      .contas-table tbody tr:nth-child(even) {
        background-color: #fafafa;
      }
      
      .contas-table tbody tr:hover {
        background-color: #f0f9ff;
        transition: background-color 0.2s ease;
      }
      
      /* CSS para coluna fixa */
      .contas-table thead th:first-child,
      .contas-table tbody td:first-child {
        position: sticky !important;
        left: 0 !important;
        z-index: 10 !important;
        border-right: 2px solid #e5e7eb !important;
        box-shadow: 2px 0 4px rgba(0,0,0,0.1) !important;
      }
      
      .contas-table thead th:first-child {
        background: #000638 !important;
        z-index: 20 !important;
        border-right: 2px solid #374151 !important;
      }
      
      .contas-table tbody tr:nth-child(even) td:first-child {
        background: #fafafa !important;
      }
      
      .contas-table tbody tr:nth-child(odd) td:first-child {
        background: #ffffff !important;
      }
      
      .contas-table tbody tr:hover td:first-child {
        background: #f0f9ff !important;
      }
      
      .contas-table tbody tr.bg-blue-100 td:first-child {
        background: #dbeafe !important;
      }
      
      .contas-table tbody tr.bg-blue-100:hover td:first-child {
        background: #bfdbfe !important;
      }
      
      .contas-table th:first-child input[type="checkbox"] {
        transform: scale(1.1);
      }
      
      .contas-table td:first-child input[type="checkbox"] {
        transform: scale(1.1);
      }
      

    `,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const[we,Ke]=i.useState(""),[E,Je]=i.useState(!1),[ct,Le]=i.useState(!1),[We,lt]=i.useState("Todos"),[it,n]=i.useState("NORMAIS"),[y,z]=i.useState("TODOS");i.useState("TODOS");const[S,$]=i.useState(""),[D,U]=i.useState(new Set),[u,K]=i.useState(new Set),[W,M]=i.useState("ANO"),[N,Ce]=i.useState(null),[He,Ae]=i.useState(!1),[w,Se]=i.useState(""),[Be,wt]=i.useState([]),[dt,ha]=i.useState(!0),[Ye,xt]=i.useState(!1),[Xe,ga]=i.useState(!1),[Qe,$s]=i.useState(!1),[mt,Ms]=i.useState(!1),[Ct,Is]=i.useState(!1),[Pe,Vs]=i.useState(null),[pt,fa]=i.useState(null),[At,ya]=i.useState(!1),[ut,Ls]=i.useState(!1),va={},ht={AUTORIZADO:"AUTORIZADO",NAO_AUTORIZADO:"NAO_AUTORIZADO",ENVIADO_PAGAMENTO:"ENVIADO_PAGAMENTO"},[ne,et]=i.useState(1),[de]=i.useState(20),ba=t=>{M(t),Ce(null)},Ee=t=>{console.log("ðŸ” Abrindo modal do card:",t),console.log("ðŸ“Š Total de dados disponÃ­veis:",g.length);let s=[];switch(t){case"vencidas":s=g.filter(a=>ee(a.item)==="Vencido").map(a=>a.item);break;case"aVencer":s=g.filter(a=>ee(a.item)==="A Vencer").map(a=>a.item);break;case"proximasVencer":s=g.filter(a=>ee(a.item)==="PrÃ³xima a Vencer").map(a=>a.item);break;case"pagas":s=g.filter(a=>ee(a.item)==="Pago").map(a=>a.item);break;case"faltaPagar":s=g.filter(a=>ee(a.item)!=="Pago").map(a=>a.item);break;case"descontos":s=g.filter(a=>parseFloat(a.item.vl_desconto||0)>0).map(a=>a.item);break;default:s=[]}console.log("âœ… Dados filtrados encontrados:",s.length),console.log("ðŸ“‹ Amostra dos dados filtrados:",s.slice(0,2)),wt(s),Se(t),Ae(!0)},ja=()=>{Ae(!1),Se(""),wt([])},_a=t=>{switch(t){case"vencidas":return"Contas Vencidas";case"aVencer":return"Contas a Vencer";case"proximasVencer":return"PrÃ³ximas a Vencer";case"pagas":return"Contas Pagas";case"faltaPagar":return"Falta Pagar";case"descontos":return"Descontos Ganhos";default:return"Detalhes"}},Na=t=>{U(s=>{const a=new Set(s);return a.has(t)?a.delete(t):a.add(t),a})};i.useEffect(()=>{U(new Set)},[fe]),i.useEffect(()=>{K(new Set)},[fe]),i.useEffect(()=>{U(new Set)},[W]);const wa=t=>{K(s=>{const a=new Set(s);return a.has(t)?a.delete(t):a.add(t),a})},Ca=()=>{if(!g||g.length===0){alert("Nenhum dado para exportar");return}const t=g.map(p=>{const Z=p.rateios&&p.rateios.length>0?p.rateios.map(T=>parseFloat(T||0)).reduce((T,j)=>T+j,0):0;return{Vencimento:J(p.item.dt_vencimento),Valor:parseFloat(p.item.vl_duplicata||0),Fornecedor:p.item.cd_fornecedor||"","Nome Fornecedor":p.item.nm_fornecedor||"",Despesa:p.item.ds_despesaitem||"","Centro de Custo":p.item.ds_ccusto||"",Empresa:p.item.cd_empresa||"",Duplicata:p.item.nr_duplicata||"",Parcela:p.item.nr_parcela||"",Portador:p.item.nr_portador||"",EmissÃ£o:J(p.item.dt_emissao),Entrada:J(p.item.dt_entrada),LiquidaÃ§Ã£o:J(p.item.dt_liq),SituaÃ§Ã£o:p.item.tp_situacao||"",EstÃ¡gio:p.item.tp_estagio||"",Juros:parseFloat(p.item.vl_juros||0),AcrÃ©scimo:parseFloat(p.item.vl_acrescimo||0),Desconto:parseFloat(p.item.vl_desconto||0),Pago:parseFloat(p.item.vl_pago||0),Aceite:p.item.in_aceite||"","Rateio Total":Z,ObservaÃ§Ã£o:p.item.ds_observacao||"",PrevisÃ£o:p.item.tp_previsaoreal||""}}),s=Ie.book_new(),a=Ie.json_to_sheet(t);a["!cols"]=[{wch:12},{wch:14},{wch:12},{wch:28},{wch:28},{wch:24},{wch:10},{wch:12},{wch:8},{wch:10},{wch:12},{wch:12},{wch:12},{wch:10},{wch:10},{wch:12},{wch:12},{wch:12},{wch:12},{wch:10},{wch:14},{wch:30},{wch:10}],Ie.book_append_sheet(s,a,"Detalhamento");const o=`detalhamento_contas_${new Date().toISOString().split("T")[0]}.xlsx`,r=pa(s,{bookType:"xlsx",type:"array"}),f=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});ua.saveAs(f,o)};i.useEffect(()=>{Ce(null)},[W]);const[tt,Aa]=i.useState([]),[gt,Sa]=i.useState([]),[ft,Pa]=i.useState([]),[yt,Ea]=i.useState([]),[Da,za]=i.useState(!1),[at,ka]=i.useState(null),[ce,Fa]=i.useState({key:"dt_vencimento",direction:"asc"}),[h,Ra]=i.useState({}),[I,St]=i.useState(null),st=(t=>{if(!t||t.length===0)return[];switch(it){case"NORMAIS":return t.filter(s=>s.tp_situacao==="N");case"CANCELADAS":return t.filter(s=>s.tp_situacao==="C");case"TODAS":return t;default:return t}})(fe),Oa=t=>{if(!t||t.length===0)return[];switch(We){case"Todos":return t;case"Pago":return t.filter(s=>parseFloat(s.vl_pago)>0);case"Vencido":return t.filter(s=>{if(!s.dt_vencimento)return!1;const a=Y(s.dt_vencimento),o=new Date;return o.setHours(0,0,0,0),a<o});case"A Vencer":return t.filter(s=>{if(!s.dt_vencimento)return!0;const a=Y(s.dt_vencimento),o=new Date;return o.setHours(0,0,0,0),a>=o});default:return t}},Ta=t=>{if(!t||t.length===0)return[];switch(y){case"TODOS":return t;case"PREVISÃƒO":return t.filter(s=>s.tp_previsaoreal==="1");case"REAL":return t.filter(s=>s.tp_previsaoreal==="2");case"CONSIGNADO":return t.filter(s=>s.tp_previsaoreal==="3");default:return t}};i.useMemo(()=>st,[st]);const $a=i.useMemo(()=>Ta(Oa(st)),[st]),R=t=>{let s="asc";ce.key===t&&ce.direction==="asc"&&(s="desc"),Fa({key:t,direction:s})},O=t=>ce.key!==t?e.jsx(Ue,{size:10,className:"ml-1 opacity-50"}):ce.direction==="asc"?e.jsx(Ps,{size:10,className:"ml-1"}):e.jsx(Ue,{size:10,className:"ml-1"}),Ma=t=>({JAN:31,FEV:28,MAR:31,ABR:30,MAI:31,JUN:30,JUL:31,AGO:31,SET:30,OUT:31,NOV:30,DEZ:31})[t]||0,Ia=(t,s,a=null)=>t.filter(o=>{const r=o.dt_vencimento;if(!r)return!1;const f=Y(r);if(!f)return!1;const p=f.getFullYear(),Z=f.getMonth()+1,T=f.getDate();if(s==="ANO"){const xe=new Date().getFullYear();return p===xe}const C={JAN:1,FEV:2,MAR:3,ABR:4,MAI:5,JUN:6,JUL:7,AGO:8,SET:9,OUT:10,NOV:11,DEZ:12}[s];return C?a!==null?Z===C&&T===a:Z===C:!0}),Pt=t=>{const s=new Map;return t.forEach(a=>{const o=`${a.cd_fornecedor}|${a.nm_fornecedor}|${a.nr_duplicata}|${a.nr_parcela}|${a.cd_empresa}|${a.dt_emissao}|${a.dt_vencimento}|${a.dt_entrada}|${a.dt_liq}|${a.tp_situacao}|${a.tp_previsaoreal}|${a.vl_duplicata}|${a.vl_juros}|${a.vl_acrescimo}|${a.vl_desconto}|${a.vl_pago}`;s.has(o)||s.set(o,{item:a,observacoes:[],situacoes:[],datasEmissao:[],datasVencimento:[],datasEntrada:[],datasLiquidacao:[],rateios:[],quantidade:0});const r=s.get(o);r.quantidade+=1,a.vl_rateio&&!r.rateios.includes(a.vl_rateio)&&r.rateios.push(a.vl_rateio),a.ds_observacao&&!r.observacoes.includes(a.ds_observacao)&&r.observacoes.push(a.ds_observacao),a.tp_situacao&&!r.situacoes.includes(a.tp_situacao)&&r.situacoes.push(a.tp_situacao),a.tp_previsaoreal&&!r.previsoes&&(r.previsoes=[]),a.tp_previsaoreal&&!r.previsoes.includes(a.tp_previsaoreal)&&r.previsoes.push(a.tp_previsaoreal),a.dt_emissao&&!r.datasEmissao.includes(a.dt_emissao)&&r.datasEmissao.push(a.dt_emissao),a.dt_vencimento&&!r.datasVencimento.includes(a.dt_vencimento)&&r.datasVencimento.push(a.dt_vencimento),a.dt_entrada&&!r.datasEntrada.includes(a.dt_entrada)&&r.datasEntrada.push(a.dt_entrada),a.dt_liq&&!r.datasLiquidacao.includes(a.dt_liq)&&r.datasLiquidacao.push(a.dt_liq)}),Array.from(s.values()).map(a=>{let o=a.item.tp_situacao;a.situacoes.length>1&&(a.situacoes.includes("C")?o="C":a.situacoes.includes("N")&&(o="N"));let r=a.item.tp_previsaoreal;a.previsoes&&a.previsoes.length>1&&(a.previsoes.includes("R")?r="R":a.previsoes.includes("P")?r="P":a.previsoes.includes("C")&&(r="C"));const f=a.datasEmissao.length>0?a.datasEmissao.sort((j,C)=>new Date(C)-new Date(j))[0]:a.item.dt_emissao,p=a.datasVencimento.length>0?a.datasVencimento.sort((j,C)=>new Date(C)-new Date(j))[0]:a.item.dt_vencimento,Z=a.datasEntrada.length>0?a.datasEntrada.sort((j,C)=>new Date(C)-new Date(j))[0]:a.item.dt_entrada,T=a.datasLiquidacao.length>0?a.datasLiquidacao.sort((j,C)=>new Date(C)-new Date(j))[0]:a.item.dt_liq;return{...a,item:{...a.item,tp_situacao:o,tp_previsaoreal:r,dt_emissao:f,dt_vencimento:p,dt_entrada:Z,dt_liq:T}}})},Va=t=>!t||t.length===0?t:[...t].sort((s,a)=>{var f,p,Z,T,j,C,xe,De,ze,ke,Fe,Re,Oe,Te,$e,X,te,ae,se,ye,ve,be,H,ot,l,P,b,A,je,Me,Kt,Jt,Wt,Ht,Yt,Xt,Qt,ea,ta,aa,sa,oa,ra,na;let o,r;switch(ce.key){case"cd_empresa":o=((f=s.item)==null?void 0:f.cd_empresa)||"",r=((p=a.item)==null?void 0:p.cd_empresa)||"";break;case"cd_fornecedor":o=((Z=s.item)==null?void 0:Z.cd_fornecedor)||"",r=((T=a.item)==null?void 0:T.cd_fornecedor)||"";break;case"nm_fornecedor":o=((j=s.item)==null?void 0:j.nm_fornecedor)||"",r=((C=a.item)==null?void 0:C.nm_fornecedor)||"";break;case"ds_despesaitem":o=((xe=s.item)==null?void 0:xe.ds_despesaitem)||"",r=((De=a.item)==null?void 0:De.ds_despesaitem)||"";break;case"ds_ccusto":o=((ze=s.item)==null?void 0:ze.ds_ccusto)||"",r=((ke=a.item)==null?void 0:ke.ds_ccusto)||"";break;case"nr_duplicata":o=((Fe=s.item)==null?void 0:Fe.nr_duplicata)||"",r=((Re=a.item)==null?void 0:Re.nr_duplicata)||"";break;case"nr_portador":o=((Oe=s.item)==null?void 0:Oe.nr_portador)||"",r=((Te=a.item)==null?void 0:Te.nr_portador)||"";break;case"dt_emissao":o=($e=s.item)!=null&&$e.dt_emissao?Y(s.item.dt_emissao):new Date(0),r=(X=a.item)!=null&&X.dt_emissao?Y(a.item.dt_emissao):new Date(0);break;case"dt_vencimento":o=(te=s.item)!=null&&te.dt_vencimento?Y(s.item.dt_vencimento):new Date(0),r=(ae=a.item)!=null&&ae.dt_vencimento?Y(a.item.dt_vencimento):new Date(0);break;case"dt_entrada":o=(se=s.item)!=null&&se.dt_entrada?Y(s.item.dt_entrada):new Date(0),r=(ye=a.item)!=null&&ye.dt_entrada?Y(a.item.dt_entrada):new Date(0);break;case"dt_liq":o=(ve=s.item)!=null&&ve.dt_liq?Y(s.item.dt_liq):new Date(0),r=(be=a.item)!=null&&be.dt_liq?Y(a.item.dt_liq):new Date(0);break;case"tp_situacao":o=((H=s.item)==null?void 0:H.tp_situacao)||"",r=((ot=a.item)==null?void 0:ot.tp_situacao)||"";break;case"tp_estagio":o=((l=s.item)==null?void 0:l.tp_estagio)||"",r=((P=a.item)==null?void 0:P.tp_estagio)||"";break;case"tp_previsaoreal":o=((b=s.item)==null?void 0:b.tp_previsaoreal)||"",r=((A=a.item)==null?void 0:A.tp_previsaoreal)||"";break;case"vl_duplicata":o=parseFloat((je=s.item)==null?void 0:je.vl_duplicata)||0,r=parseFloat((Me=a.item)==null?void 0:Me.vl_duplicata)||0;break;case"vl_juros":o=parseFloat((Kt=s.item)==null?void 0:Kt.vl_juros)||0,r=parseFloat((Jt=a.item)==null?void 0:Jt.vl_juros)||0;break;case"vl_acrescimo":o=parseFloat((Wt=s.item)==null?void 0:Wt.vl_acrescimo)||0,r=parseFloat((Ht=a.item)==null?void 0:Ht.vl_acrescimo)||0;break;case"vl_desconto":o=parseFloat((Yt=s.item)==null?void 0:Yt.vl_desconto)||0,r=parseFloat((Xt=a.item)==null?void 0:Xt.vl_desconto)||0;break;case"vl_pago":o=parseFloat((Qt=s.item)==null?void 0:Qt.vl_pago)||0,r=parseFloat((ea=a.item)==null?void 0:ea.vl_pago)||0;break;case"in_aceite":o=((ta=s.item)==null?void 0:ta.in_aceite)||"",r=((aa=a.item)==null?void 0:aa.in_aceite)||"";break;case"nr_parcela":o=parseInt((sa=s.item)==null?void 0:sa.nr_parcela)||0,r=parseInt((oa=a.item)==null?void 0:oa.nr_parcela)||0;break;default:o=((ra=s.item)==null?void 0:ra[ce.key])||"",r=((na=a.item)==null?void 0:na[ce.key])||""}return typeof o=="string"&&typeof r=="string"&&(o=o.toLowerCase(),r=r.toLowerCase()),ce.direction==="asc"?o>r?1:o<r?-1:0:o<r?1:o>r?-1:0}),La=async(t=Ve,s=we)=>{var r,f,p;if(!t||!s)return;if(tt.length===0){alert("Selecione pelo menos uma empresa para consultar!");return}Je(!0);let a={success:!0,data:[]},o={success:!0,data:[]};try{console.log("ðŸ” Iniciando busca de contas a pagar..."),console.log("ðŸ“… PerÃ­odo:",{inicio:t,fim:s}),console.log("ðŸ¢ Empresas selecionadas:",tt);const Z={dt_inicio:t,dt_fim:s},T=tt.filter(C=>C.cd_empresa).map(C=>C.cd_empresa);T.length>0&&(Z.cd_empresa=T),console.log("ðŸ“‹ ParÃ¢metros da requisiÃ§Ã£o:",Z),console.log("ðŸ¢ CÃ³digos das empresas:",T);const j=q?await m.financial.contasPagarEmissao(Z):await m.financial.contasPagar(Z);if(console.log("ðŸ” Resultado da API:",{success:j.success,dataLength:(r=j.data)==null?void 0:r.length,message:j.message,metadata:j.metadata,estrutura:(f=j.metadata)!=null&&f.periodo?"Nova estrutura":"Estrutura antiga",performance:j.performance,queryType:j.queryType}),j.success){let C=[];if(Array.isArray(j.data)?C=j.data:j.metadata&&Array.isArray(j.metadata.data)?C=j.metadata.data:j.data&&Array.isArray(j.data.data)?C=j.data.data:(console.warn("âš ï¸ Estrutura de dados nÃ£o reconhecida:",j),C=[]),C.length>0){const l=C[0];console.log("ðŸ” Campos disponÃ­veis no primeiro item:",Object.keys(l));const b=["cd_empresa","cd_fornecedor","nr_duplicata","dt_vencimento","vl_duplicata"].filter(Me=>!(Me in l));b.length>0&&console.warn("âš ï¸ Campos faltando na resposta da API:",b);const je=["in_aceite","vl_rateio"].filter(Me=>!(Me in l));je.length>0&&console.log("â„¹ï¸ Campos opcionais nÃ£o presentes:",je)}console.log("âœ… Dados obtidos:",{total:C.length,amostra:C.slice(0,2),empresas:T,metadata:j.metadata,estrutura:(p=j.metadata)!=null&&p.periodo?"Nova estrutura":"Estrutura antiga"});const xe=[...new Set(C.map(l=>l.cd_fornecedor).filter(Boolean))],De=[...new Set(C.map(l=>l.cd_ccusto).filter(Boolean))],ze=[...new Set(C.map(l=>l.cd_despesaitem).filter(Boolean))];console.log("ðŸ” Debug - ExtraÃ§Ã£o de cÃ³digos:"),console.log("   - Dados originais (primeiros 3):",C.slice(0,3).map(l=>({cd_fornecedor:l.cd_fornecedor,cd_ccusto:l.cd_ccusto,cd_despesaitem:l.cd_despesaitem}))),De.length===0&&console.log("âš ï¸ Nenhum cÃ³digo de centro de custo encontrado, pulando chamada da API"),xe.length===0&&console.log("âš ï¸ Nenhum cÃ³digo de fornecedor encontrado, pulando chamada da API"),ze.length===0&&console.log("âš ï¸ Nenhum cÃ³digo de despesa encontrado, pulando chamada da API");const ke=(l,P)=>{const b=[];for(let A=0;A<l.length;A+=P)b.push(l.slice(A,A+P));return b},Fe=100;let Re=[];if(xe.length>0){const P=ke(xe,Fe).map(b=>m.financial.fornecedor({cd_fornecedor:b}));Re=await Promise.all(P)}else Re=[{success:!0,data:[]}];let Oe=[];if(De.length>0){const P=ke(De,Fe).map(b=>m.financial.centrocusto({cd_ccusto:b}));Oe=await Promise.all(P)}else Oe=[{success:!0,data:[]}];let Te=[];if(ze.length>0){const P=ke(ze,Fe).map(b=>m.financial.despesa({cd_despesaitem:b}));Te=await Promise.all(P)}else Te=[{success:!0,data:[]}];const $e=l=>{const P={success:!0,data:[]};return l.forEach(b=>{!b||b.success===!1||(Array.isArray(b.data)?P.data=P.data.concat(b.data):b.data&&Array.isArray(b.data.data)?P.data=P.data.concat(b.data.data):b.metadata&&Array.isArray(b.metadata.data)&&(P.data=P.data.concat(b.metadata.data)))}),P};a=$e(Re),o=$e(Oe);let X=$e(Te),te=[];a.success&&(Array.isArray(a.data)?te=a.data:a.data&&Array.isArray(a.data.data)?te=a.data.data:a.metadata&&Array.isArray(a.metadata.data)&&(te=a.metadata.data));let ae=[];o.success&&(Array.isArray(o.data)?ae=o.data:o.data&&Array.isArray(o.data.data)?ae=o.data.data:o.metadata&&Array.isArray(o.metadata.data)&&(ae=o.metadata.data));let se=[];X.success&&(Array.isArray(X.data)?se=X.data:X.data&&Array.isArray(X.data.data)?se=X.data.data:X.metadata&&Array.isArray(X.metadata.data)&&(se=X.metadata.data)),console.log("ðŸ” Estrutura completa da resposta de fornecedor:",a),console.log("ðŸ” Dados de fornecedor obtidos:",{total:te.length,amostra:te.slice(0,2)}),console.log("ðŸ” Estrutura completa da resposta de centro de custo:",o),console.log("ðŸ” Dados de centro de custo obtidos:",{total:ae.length,amostra:ae.slice(0,2)}),console.log("ðŸ” Estrutura completa da resposta de despesa:",X),console.log("ðŸ” Dados de despesa obtidos:",{total:se.length,amostra:se.slice(0,2)});const ye=new Map;te.forEach(l=>{ye.set(l.cd_fornecedor,l)});const ve=new Map;ae.forEach(l=>{ve.set(l.cd_ccusto,l)});const be=new Map;se.forEach(l=>{be.set(l.cd_despesaitem,l)}),console.log("ðŸ—ºï¸ Mapas criados:",{fornecedorMapSize:ye.size,centroCustoMapSize:ve.size,despesaMapSize:be.size,amostraFornecedorMap:Array.from(ye.entries()).slice(0,2),amostraCentroCustoMap:Array.from(ve.entries()).slice(0,2),amostraDespesaMap:Array.from(be.entries()).slice(0,2)});const H=C.map(l=>{const P=ye.get(l.cd_fornecedor),b=ve.get(l.cd_ccusto),A=be.get(l.cd_despesaitem);return C.indexOf(l)<3&&console.log(`ðŸ” Processando item ${C.indexOf(l)+1}:`,{cd_fornecedor:l.cd_fornecedor,cd_ccusto:l.cd_ccusto,cd_despesaitem:l.cd_despesaitem,encontrouFornecedor:!!P,encontrouCentroCusto:!!b,encontrouDespesa:!!A,dadosFornecedor:P,dadosCentroCusto:b,dadosDespesa:A}),{...l,ds_observacao:l.ds_observacao||"",in_aceite:l.in_aceite||"",vl_rateio:l.vl_rateio||0,tp_aceite:l.in_aceite||"",ds_ccusto:(b==null?void 0:b.ds_ccusto)||l.ds_ccusto||"",nm_fornecedor:(P==null?void 0:P.nm_fornecedor)||l.nm_fornecedor||"",ds_despesaitem:(A==null?void 0:A.ds_despesaitem)||l.ds_despesaitem||"",cd_despesaitem:l.cd_despesaitem||"",cd_ccusto:(b==null?void 0:b.cd_ccusto)||l.cd_ccusto||""}});if(H.length>0){console.log("ðŸ” Debug - Primeiros 3 registros com dados das novas rotas:"),H.slice(0,3).forEach((A,je)=>{console.log(`ðŸ“‹ Registro ${je+1}:`,{cd_fornecedor:A.cd_fornecedor,nm_fornecedor:A.nm_fornecedor,cd_ccusto:A.cd_ccusto,ds_ccusto:A.ds_ccusto,cd_despesaitem:A.cd_despesaitem,ds_despesaitem:A.ds_despesaitem,temFornecedor:!!A.nm_fornecedor,temCentroCusto:!!A.ds_ccusto,temDespesa:!!A.ds_despesaitem,fonteFornecedor:A.nm_fornecedor?"Nova rota /fornecedor":"Dados originais",fonteCentroCusto:A.ds_ccusto?"Nova rota /centrocusto":"Dados originais",fonteDespesa:A.ds_despesaitem?"Nova rota /despesa":"Dados originais"})});const l=H.filter(A=>!A.nm_fornecedor).length,P=H.filter(A=>!A.ds_ccusto).length,b=H.filter(A=>!A.ds_despesaitem).length;console.log("ðŸ“Š EstatÃ­sticas dos dados processados:",{total:H.length,fornecedoresVazios:l,centrosCustoVazios:P,despesasVazias:b,percentualFornecedoresVazios:(l/H.length*100).toFixed(2)+"%",percentualCentrosCustoVazios:(P/H.length*100).toFixed(2)+"%",percentualDespesasVazias:(b/H.length*100).toFixed(2)+"%"})}const ot=G&&G.length>0?H.filter(l=>{const P=Number(typeof l.cd_ccusto=="string"?parseInt(l.cd_ccusto,10):l.cd_ccusto);return!G.includes(P)}):H;le(ot),Ze(te),nt(ae),F(se),Le(!0),console.log("âœ… Resumo das chamadas das novas rotas:",{contasPagar:H.length,fornecedor:te.length,centroCusto:ae.length,despesa:se.length,sucessoFornecedor:a.success,sucessoCentroCusto:o.success,sucessoDespesa:X.success})}else console.warn("âš ï¸ Falha ao buscar dados:",j.message),le([]),Le(!1);a.success||console.warn("âš ï¸ Falha ao buscar dados de fornecedor:",a.message),o.success||console.warn("âš ï¸ Falha ao buscar dados de centro de custo:",o.message)}catch(Z){console.error("âŒ Erro geral ao buscar dados:",Z),le([]),Le(!1)}finally{Je(!1)}},ee=t=>{if(t.dt_liq)return"Pago";if(t.dt_vencimento){const s=new Date;s.setHours(0,0,0,0);const a=Y(t.dt_vencimento),o=Math.ceil((a-s)/(1e3*60*60*24));return a<s?"Vencido":o>=0&&o<=7?"PrÃ³xima a Vencer":"A Vencer"}if(t.tp_situacao)switch(t.tp_situacao.toString()){case"1":case"P":return"Pago";case"2":case"V":return"Vencido";case"3":case"A":return"A Vencer";default:return"Pendente"}return"Pendente"},Ba=t=>{switch(t==null?void 0:t.toLowerCase()){case"pago":case"liquidado":return"bg-green-100 text-green-800";case"vencido":case"atrasado":return"bg-red-100 text-red-800";case"a vencer":case"vencendo":return"bg-yellow-100 text-yellow-800";case"pendente":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},qa=t=>{switch(t==null?void 0:t.toLowerCase()){case"pago":case"liquidado":return e.jsx(bt,{size:14,className:"text-green-600"});case"vencido":case"atrasado":return e.jsx(ma,{size:14,className:"text-red-600"});case"a vencer":case"vencendo":return e.jsx(da,{size:14,className:"text-yellow-600"});case"pendente":return e.jsx(ia,{size:14,className:"text-blue-600"});default:return e.jsx(la,{size:14,className:"text-gray-600"})}};i.useEffect(()=>{const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),1),a=new Date(t.getFullYear(),t.getMonth()+1,0);_e(s.toISOString().split("T")[0]),Ke(a.toISOString().split("T")[0])},[]);const Et=$a.filter(t=>{if(yt.length>0){const s=t.cd_fornecedor||"";if(!yt.some(o=>o.cd_fornecedor===s))return!1}if(S&&!(t.nr_duplicata||"").toString().toLowerCase().includes(S.toLowerCase()))return!1;if(gt.length>0){const s=t.cd_ccusto||"";if(!gt.some(o=>o.cd_ccusto===s))return!1}if(ft.length>0){const s=t.cd_despesaitem||"";if(!ft.some(o=>o.cd_despesaitem===s))return!1}return!0}),Dt=Ia(Et,W,N),zt=Dt,kt=i.useCallback(t=>{if(!t||t.length===0)return[];if(Object.keys(h).length===0)return t;console.log("ðŸ” Aplicando filtros de coluna:",h),console.log("ðŸ“Š Dados originais:",t.length);const s=t.filter(a=>{const o=a.item;for(const[r,f]of Object.entries(h)){if(!f)continue;const p=String(o[r]||"");if(f.searchTerm&&f.searchTerm.trim()!==""&&!p.toLowerCase().includes(f.searchTerm.toLowerCase()))return console.log(`âŒ Item rejeitado por searchTerm - ${r}: "${p}" nÃ£o contÃ©m "${f.searchTerm}"`),!1;if(f.selected&&f.selected.length>0&&!f.selected.includes(p))return console.log(`âŒ Item rejeitado por seleÃ§Ã£o - ${r}: "${p}" nÃ£o estÃ¡ em [${f.selected.join(", ")}]`),!1}return!0});return console.log("âœ… Dados filtrados:",s.length),s},[h]),Ft=Pt(Dt),g=i.useMemo(()=>{const t=Va(Ft);return kt(t)},[Ft,ce,kt]),_=i.useMemo(()=>{const t=(ne-1)*de,s=t+de;return{dados:g.slice(t,s),totalRegistros:g.length,totalPaginas:Math.ceil(g.length/de),paginaAtual:ne,registrosPorPagina:de}},[g,ne,de]),qe=t=>{const s=Math.ceil(g.length/de);t>=1&&t<=s?(et(t),K(new Set)):s>0&&(et(s),K(new Set))},Ua=()=>qe(1),Ga=()=>qe(_.totalPaginas),Za=()=>{ne>1&&qe(ne-1)},Ka=()=>{ne<_.totalPaginas&&qe(ne+1)},Rt=g.length,Ot=g.reduce((t,s)=>t+parseFloat(s.item.vl_duplicata||0),0),Tt=g.filter(t=>ee(t.item).toLowerCase().includes("vencido")),Ja=Tt.length,Wa=Tt.reduce((t,s)=>t+(parseFloat(s.item.vl_duplicata)||0),0),$t=g.filter(t=>ee(t.item).toLowerCase().includes("vencer")),Ha=$t.length,Ya=$t.reduce((t,s)=>t+(parseFloat(s.item.vl_duplicata)||0),0),Xa=new Date,Mt=g.filter(t=>{if(!t.item.dt_vencimento)return!1;const s=Y(t.item.dt_vencimento),a=Math.ceil((s-Xa)/(1e3*60*60*24));return a>=0&&a<=7&&!t.item.dt_liq}),Qa=Mt.length,es=Mt.reduce((t,s)=>t+(parseFloat(s.item.vl_duplicata)||0),0),It=g.filter(t=>ee(t.item).toLowerCase().includes("pago")),Vt=It.length,Lt=It.reduce((t,s)=>t+(parseFloat(s.item.vl_pago)||0),0),ts=Ot-Lt,as=g.reduce((t,s)=>t+(parseFloat(s.item.vl_desconto)||0),0),ss=t=>{Aa([...t])},os=t=>{Sa([...t])},rs=t=>{Pa([...t])},ns=t=>{Ea([...t])},cs=t=>{t.preventDefault(),La()},v=t=>{St(s=>s===t?null:t)},V=(t,s)=>{Ra(a=>{if(s)return{...a,[t]:s};{const o={...a};return delete o[t],o}}),St(null)},ls=()=>{za(!1),ka(null)},Bt=t=>{Ne({isOpen:!0,conta:t})},is=()=>{Ne({isOpen:!1,conta:null})},ds=async()=>{if(autorizacaoToRemove)try{const{error:t}=await Rs.removerAutorizacao(autorizacaoToRemove.chaveUnica);if(t){console.error("Erro ao remover autorizaÃ§Ã£o:",t),alert("Erro ao remover autorizaÃ§Ã£o. Tente novamente.");return}setAutorizacoes(s=>{const a={...s};return delete a[autorizacaoToRemove.chaveUnica],a}),console.log("âœ… AutorizaÃ§Ã£o removida com sucesso")}catch(t){console.error("Erro ao remover autorizaÃ§Ã£o:",t),alert("Erro ao remover autorizaÃ§Ã£o. Tente novamente.")}xt(!1),setAutorizacaoToRemove(null)};i.useEffect(()=>{const t=s=>{s.key==="Escape"&&Ye&&vt(),s.key==="Escape"&&Xe&&handleCancelAutorizarTodos(),s.key==="Escape"&&Qe&&handleCancelRemoverTodos()};return(Ye||Xe||Qe)&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[Ye,Xe,Qe]),i.useEffect(()=>{const t=Math.ceil(g.length/de);g.length===0?et(1):ne>t&&t>0&&et(t)},[g.length,ne,de]);const vt=()=>xt(!1),xs=()=>xt(!1),ms=()=>ga(!1),ps=()=>console.log("FunÃ§Ã£o removida: Pagar Todos"),us=()=>console.log("FunÃ§Ã£o removida: Remover Pagamentos"),hs=()=>console.log("FunÃ§Ã£o removida: Pagar Selecionados"),gs=()=>console.log("FunÃ§Ã£o removida: Remover Pagamentos Selecionados"),fs=()=>console.log("FunÃ§Ã£o removida: Carregar AutorizaÃ§Ãµes Supabase"),ys=0,vs=0,qt=()=>{ya(!1),fa(null)};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto flex flex-col items-stretch justify-start py-3 px-2",children:[e.jsx(js,{title:"Contas a Pagar",subtitle:"Gerencie e acompanhe todas as contas a pagar da empresa",icon:ca,iconColor:"text-red-600"}),e.jsx("div",{className:"mb-4",children:e.jsxs("form",{onSubmit:cs,className:"flex flex-col bg-white p-3 rounded-lg shadow-lg w-full max-w-4xl mx-auto border border-[#000638]/10",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("span",{className:"text-lg font-bold text-[#000638] flex items-center gap-1",children:[e.jsx(zs,{size:18,weight:"bold"}),"Filtros"]}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Selecione o perÃ­odo e empresa para anÃ¡lise"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-1 mb-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(_s,{empresasSelecionadas:tt,onSelectEmpresas:ss})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Data InÃ­cio"}),e.jsx("input",{type:"date",value:Ve,onChange:t=>_e(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Data Fim"}),e.jsx("input",{type:"date",value:we,onChange:t=>Ke(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400 text-xs"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Status"}),e.jsxs("select",{value:We,onChange:t=>lt(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] text-xs",children:[e.jsx("option",{value:"Todos",children:"TODOS"}),e.jsx("option",{value:"Pago",children:"PAGO"}),e.jsx("option",{value:"Vencido",children:"VENCIDO"}),e.jsx("option",{value:"A Vencer",children:"A VENCER"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"SituaÃ§Ã£o"}),e.jsxs("select",{value:it,onChange:t=>n(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] text-xs",children:[e.jsx("option",{value:"NORMAIS",children:"NORMAIS"}),e.jsx("option",{value:"CANCELADAS",children:"CANCELADAS"}),e.jsx("option",{value:"TODAS",children:"TODAS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"PrevisÃ£o"}),e.jsxs("select",{value:y,onChange:t=>z(t.target.value),className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] text-xs",children:[e.jsx("option",{value:"TODOS",children:"TODOS"}),e.jsx("option",{value:"PREVISÃƒO",children:"PREVISÃƒO"}),e.jsx("option",{value:"REAL",children:"REAL"}),e.jsx("option",{value:"CONSIGNADO",children:"CONSIGNADO"})]})]}),e.jsx("div",{children:e.jsx(Ns,{fornecedoresSelecionados:yt,onSelectFornecedores:ns,dadosFornecedor:Ge})}),e.jsx("div",{children:e.jsx(ws,{despesasSelecionadas:ft,onSelectDespesas:rs,dadosDespesa:k})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold mb-0.5 text-[#000638]",children:"Duplicata"}),e.jsx("input",{type:"text",value:S,onChange:t=>$(t.target.value),placeholder:"Buscar duplicata...",className:"border border-[#000638]/30 rounded-lg px-2 py-1.5 w-full focus:outline-none focus:ring-2 focus:ring-[#000638] bg-[#f8f9fb] text-[#000638] placeholder:text-gray-400 text-xs"})]}),e.jsx("div",{children:e.jsx(Cs,{centrosCustoSelecionados:gt,onSelectCentrosCusto:os,dadosCentroCusto:rt})}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{type:"submit",className:"flex items-center gap-1 bg-[#000638] text-white px-3 py-1 rounded-lg hover:bg-[#fe0000] disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors h-7 text-xs font-bold shadow-md tracking-wide uppercase",disabled:E||!Ve||!we,children:E?e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:10,className:"animate-spin"}),e.jsx("span",{children:"Buscando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Nt,{size:10}),e.jsx("span",{children:"Buscar Dados"})]})})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8 max-w-7xl mx-auto",children:[e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ca,{size:18,className:"text-blue-600"}),e.jsx(ue,{className:"text-sm font-bold text-blue-700",children:"Total de Contas"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-blue-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-blue-600"}):Rt}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Contas no perÃ­odo"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white",children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Es,{size:18,className:"text-green-600"}),e.jsx(ue,{className:"text-sm font-bold text-green-700",children:"Valor Total"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-green-600 mb-0.5 break-words",children:E?e.jsx(Q,{size:24,className:"animate-spin text-green-600"}):Ot.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Valor total das contas"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:()=>Ee("faltaPagar"),children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(la,{size:18,className:"text-purple-600"}),e.jsx(ue,{className:"text-sm font-bold text-purple-700",children:"Falta Pagar"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-purple-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-purple-600"}):ts.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("div",{className:"text-base font-medium text-purple-500",children:E?"...":`${Rt-Vt} contas`}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Contas pendentes"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:()=>Ee("vencidas"),children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ma,{size:18,className:"text-red-600"}),e.jsx(ue,{className:"text-sm font-bold text-red-700",children:"Contas Vencidas"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-red-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-red-600"}):Wa.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("div",{className:"text-base font-medium text-red-500",children:E?"...":`${Ja} contas`}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Contas em atraso"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:()=>Ee("aVencer"),children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{size:18,className:"text-yellow-600"}),e.jsx(ue,{className:"text-sm font-bold text-yellow-700",children:"A Vencer"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-yellow-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-yellow-600"}):Ya.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("div",{className:"text-base font-medium text-yellow-500",children:E?"...":`${Ha} contas`}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Contas futuras"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:()=>Ee("proximasVencer"),children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ia,{size:18,className:"text-orange-600"}),e.jsx(ue,{className:"text-sm font-bold text-orange-700",children:"PrÃ³ximas a Vencer"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-orange-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-orange-600"}):es.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("div",{className:"text-base font-medium text-orange-500",children:E?"...":`${Qa} contas`}),e.jsx(ge,{className:"text-xs text-gray-500",children:"PrÃ³ximos 7 dias"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:()=>Ee("pagas"),children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bt,{size:18,className:"text-green-600"}),e.jsx(ue,{className:"text-sm font-bold text-green-700",children:"Contas Pagas"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-green-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-green-600"}):Lt.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("div",{className:"text-base font-medium text-green-500",children:E?"...":`${Vt} contas`}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Contas liquidadas"})]})]}),e.jsxs(me,{className:"shadow-lg transition-all duration-200 hover:shadow-xl hover:-translate-y-1 rounded-xl bg-white cursor-pointer",onClick:()=>Ee("descontos"),children:[e.jsx(pe,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{size:18,className:"text-emerald-600"}),e.jsx(ue,{className:"text-sm font-bold text-emerald-700",children:"Descontos Ganhos"})]})}),e.jsxs(he,{className:"pt-0 px-4 pb-4",children:[e.jsx("div",{className:"text-base font-extrabold text-emerald-600 mb-0.5",children:E?e.jsx(Q,{size:24,className:"animate-spin text-emerald-600"}):as.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("div",{className:"text-base font-medium text-emerald-500",children:E?"...":`${g.filter(t=>parseFloat(t.item.vl_desconto||0)>0).length} contas`}),e.jsx(ge,{className:"text-xs text-gray-500",children:"Total de descontos obtidos"})]})]})]}),e.jsx("div",{className:"flex flex-col gap-3 justify-center bg-white rounded-lg shadow-lg border border-[#000638]/10",children:e.jsx("div",{className:"p-3",children:E?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{size:18,className:"animate-spin text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Carregando dados..."})]})}):ct?fe.length===0?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500 text-sm mb-0.5",children:"Nenhum dado encontrado"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Verifique o perÃ­odo selecionado ou tente novamente"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-[#000638]/10 w-full mb-3",children:[e.jsxs("button",{className:"w-full p-3 flex items-center justify-between",onClick:()=>ha(!dt),children:[e.jsx("h2",{className:"text-sm font-bold text-[#000638]",children:"Plano de Contas"}),e.jsx("span",{className:"text-xs text-gray-500",children:dt?"Ocultar":"Mostrar"})]}),dt&&e.jsx("div",{className:"p-3 border-t border-[#000638]/10",children:e.jsx(Ts,{dados:zt,totalContas:zt.length,linhasSelecionadas:D,toggleLinhaSelecionada:Na,filtroMensal:W,setFiltroMensal:M,dadosOriginais:Et,filtroDia:N,setFiltroDia:Ce,handleFiltroMensalChange:ba,obterDiasDoMes:Ma,abrirModalDetalhes:Bt,getSortIcon:O,handleSort:R,agruparDadosIdenticos:Pt})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-[#000638]/10  w-full mb-3",children:[e.jsxs("div",{className:"p-3 border-b border-[#000638]/10",children:[e.jsx("h2",{className:"text-sm font-bold text-[#000638]",children:"Detalhamento de Contas"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Registros consolidados por duplicata/parcela/fornecedor, unificando situaÃ§Ãµes, previsÃµes e datas como nos cards."}),ut&&e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-blue-600",children:[e.jsx(Q,{size:10,className:"animate-spin"}),e.jsx("span",{children:"Carregando autorizaÃ§Ãµes..."})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[(()=>{const t=u.size===_.dados.length&&_.dados.length>0,s=t?"text-xs px-0.5 py-0.5 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors":"text-xs px-0.5 py-0.5 bg-[#000638] text-white rounded hover:bg-[#fe0000] transition-colors";return e.jsx("button",{onClick:()=>{if(u.size===_.dados.length&&_.dados.length>0){const o=_.dados.map((r,f)=>(_.paginaAtual-1)*_.registrosPorPagina+f);K(r=>{const f=new Set(r);return o.forEach(p=>f.delete(p)),f})}else{const o=_.dados.map((r,f)=>(_.paginaAtual-1)*_.registrosPorPagina+f);K(r=>{const f=new Set(r);return o.forEach(p=>f.add(p)),f})}},className:s,children:t?"Desmarcar todas":"Selecionar todas"})})(),c(["user"])&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ps(),className:"text-xs px-0.5 py-0.5 bg-yellow-500 text-black font-bold rounded hover:bg-yellow-600 transition-colors",children:"PAGAR TODOS"}),e.jsx("button",{onClick:()=>us(),className:"text-xs px-0.5 py-0.5 bg-red-500 text-white font-bold rounded hover:bg-red-600 transition-colors",children:"REMOVER TODOS"}),e.jsxs("button",{onClick:()=>hs(),disabled:u.size===0,className:"text-xs px-0.5 py-0.5 bg-yellow-500 text-black font-bold rounded hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["PAGAR SELECIONADOS (",u.size,")"]}),e.jsxs("button",{onClick:()=>gs(),disabled:u.size===0,className:"text-xs px-0.5 py-0.5 bg-red-500 text-white font-bold rounded hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:["REMOVER SELECIONADOS (",u.size,")"]})]}),e.jsx("button",{onClick:Ca,className:"text-xs px-0.5 py-0.5 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Baixar Excel"}),c(["owner","admin","manager"])&&e.jsx("button",{onClick:fs,disabled:ut,className:"text-xs px-0.5 py-0.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ut?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Q,{size:10,className:"animate-spin"}),e.jsx("span",{children:"Carregando..."})]}):"ðŸ”„ Recarregar"})]})]}),e.jsxs("div",{className:"p-3 overflow-x-auto",children:[e.jsxs("table",{className:"contas-table w-full border-collapse",children:[e.jsx("thead",{className:"min-w-full border border-gray-200 rounded-lg",children:e.jsxs("tr",{className:"bg-[#000638] text-white text-[8px]",children:[e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",style:{width:"30px",minWidth:"30px",position:"sticky",left:0,zIndex:10},children:"Selecionar"}),(c(["owner","admin","manager"])||c(["user"]))&&e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",children:"AÃ§Ãµes"}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("tp_situacao"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Status ",O("tp_situacao"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("tp_situacao")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.tp_situacao?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Status",children:e.jsx(L,{size:10})}),I==="tp_situacao"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"tp_situacao",columnTitle:"Status",data:g.map(t=>t.item),currentFilter:h.tp_situacao,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("dt_vencimento"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Vencimento ",O("dt_vencimento"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("dt_vencimento")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.dt_vencimento?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Vencimento",children:e.jsx(L,{size:10})}),I==="dt_vencimento"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"dt_vencimento",columnTitle:"Vencimento",data:g.map(t=>t.item),currentFilter:h.dt_vencimento,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("vl_duplicata"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Valor ",O("vl_duplicata"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("vl_duplicata")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.vl_duplicata?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Valor",children:e.jsx(L,{size:10})}),I==="vl_duplicata"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"vl_duplicata",columnTitle:"Valor",data:g.map(t=>t.item),currentFilter:h.vl_duplicata,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("cd_fornecedor"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Fornecedor ",O("cd_fornecedor"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("cd_fornecedor")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.cd_fornecedor?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Fornecedor",children:e.jsx(L,{size:10})}),I==="cd_fornecedor"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"cd_fornecedor",columnTitle:"Fornecedor",data:g.map(t=>t.item),currentFilter:h.cd_fornecedor,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("nm_fornecedor"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["NM Fornecedor ",O("nm_fornecedor"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("nm_fornecedor")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.nm_fornecedor?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Nome Fornecedor",children:e.jsx(L,{size:10})}),I==="nm_fornecedor"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"nm_fornecedor",columnTitle:"Nome Fornecedor",data:g.map(t=>t.item),currentFilter:h.nm_fornecedor,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("ds_despesaitem"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Despesa ",O("ds_despesaitem"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("ds_despesaitem")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.ds_despesaitem?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Despesa",children:e.jsx(L,{size:10})}),I==="ds_despesaitem"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"ds_despesaitem",columnTitle:"Despesa",data:g.map(t=>t.item),currentFilter:h.ds_despesaitem,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("ds_ccusto"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["NM CUSTO ",O("ds_ccusto"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("ds_ccusto")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.ds_ccusto?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Centro de Custo",children:e.jsx(L,{size:10})}),I==="ds_ccusto"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"ds_ccusto",columnTitle:"Centro de Custo",data:g.map(t=>t.item),currentFilter:h.ds_ccusto,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("cd_empresa"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Empresa ",O("cd_empresa"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("cd_empresa")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.cd_empresa?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Empresa",children:e.jsx(L,{size:10})}),I==="cd_empresa"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"cd_empresa",columnTitle:"Empresa",data:g.map(t=>t.item),currentFilter:h.cd_empresa,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("nr_duplicata"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Duplicata ",O("nr_duplicata"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("nr_duplicata")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.nr_duplicata?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Duplicata",children:e.jsx(L,{size:10})}),I==="nr_duplicata"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"nr_duplicata",columnTitle:"Duplicata",data:g.map(t=>t.item),currentFilter:h.nr_duplicata,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("nr_parcela"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Parcela ",O("nr_parcela"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("nr_parcela")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.nr_parcela?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Parcela",children:e.jsx(L,{size:10})}),I==="nr_parcela"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"nr_parcela",columnTitle:"Parcela",data:g.map(t=>t.item),currentFilter:h.nr_parcela,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("nr_portador"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Portador ",O("nr_portador"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("nr_portador")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.nr_portador?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Portador",children:e.jsx(L,{size:10})}),I==="nr_portador"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"nr_portador",columnTitle:"Portador",data:g.map(t=>t.item),currentFilter:h.nr_portador,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("dt_emissao"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["EmissÃ£o ",O("dt_emissao"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("dt_emissao")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.dt_emissao?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por EmissÃ£o",children:e.jsx(L,{size:10})}),I==="dt_emissao"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"dt_emissao",columnTitle:"EmissÃ£o",data:g.map(t=>t.item),currentFilter:h.dt_emissao,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("dt_entrada"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Entrada ",O("dt_entrada"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("dt_entrada")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.dt_entrada?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Entrada",children:e.jsx(L,{size:10})}),I==="dt_entrada"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"dt_entrada",columnTitle:"Entrada",data:g.map(t=>t.item),currentFilter:h.dt_entrada,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("dt_liq"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["LiquidaÃ§Ã£o ",O("dt_liq"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("dt_liq")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.dt_liq?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por LiquidaÃ§Ã£o",children:e.jsx(L,{size:10})}),I==="dt_liq"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"dt_liq",columnTitle:"LiquidaÃ§Ã£o",data:g.map(t=>t.item),currentFilter:h.dt_liq,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("tp_situacao"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["SituaÃ§Ã£o ",O("tp_situacao"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("tp_situacao_col")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.tp_situacao_col?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por SituaÃ§Ã£o",children:e.jsx(L,{size:10})}),I==="tp_situacao_col"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"tp_situacao_col",columnTitle:"SituaÃ§Ã£o",data:g.map(t=>t.item),currentFilter:h.tp_situacao_col,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("tp_estagio"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["EstÃ¡gio ",O("tp_estagio"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("tp_estagio")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.tp_estagio?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por EstÃ¡gio",children:e.jsx(L,{size:10})}),I==="tp_estagio"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"tp_estagio",columnTitle:"EstÃ¡gio",data:g.map(t=>t.item),currentFilter:h.tp_estagio,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("vl_juros"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Juros ",O("vl_juros"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("vl_juros")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.vl_juros?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Juros",children:e.jsx(L,{size:10})}),I==="vl_juros"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"vl_juros",columnTitle:"Juros",data:g.map(t=>t.item),currentFilter:h.vl_juros,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("vl_acrescimo"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["AcrÃ©scimo ",O("vl_acrescimo"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("vl_acrescimo")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.vl_acrescimo?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por AcrÃ©scimo",children:e.jsx(L,{size:10})}),I==="vl_acrescimo"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"vl_acrescimo",columnTitle:"AcrÃ©scimo",data:g.map(t=>t.item),currentFilter:h.vl_acrescimo,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("vl_desconto"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Desconto ",O("vl_desconto"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("vl_desconto")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.vl_desconto?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Desconto",children:e.jsx(L,{size:10})}),I==="vl_desconto"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"vl_desconto",columnTitle:"Desconto",data:g.map(t=>t.item),currentFilter:h.vl_desconto,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("vl_pago"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Pago ",O("vl_pago"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("vl_pago")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.vl_pago?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Valor Pago",children:e.jsx(L,{size:10})}),I==="vl_pago"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"vl_pago",columnTitle:"Valor Pago",data:g.map(t=>t.item),currentFilter:h.vl_pago,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("in_aceite"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["Aceite ",O("in_aceite"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("in_aceite")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.in_aceite?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por Aceite",children:e.jsx(L,{size:10})}),I==="in_aceite"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"in_aceite",columnTitle:"Aceite",data:g.map(t=>t.item),currentFilter:h.in_aceite,onApplyFilter:V,onClose:()=>v(null)})})]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",children:"Rateio(s)"}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",children:"ObservaÃ§Ã£o"}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>R("tp_previsaoreal"),children:e.jsxs("div",{className:"flex items-center justify-center gap-1 relative",children:["PrevisÃ£o ",O("tp_previsaoreal"),e.jsx("button",{type:"button",onClick:t=>{t.stopPropagation(),v("tp_previsaoreal")},className:`hover:text-gray-300 focus:outline-none focus:text-gray-300 ${h.tp_previsaoreal?"text-yellow-400":"text-gray-400"}`,"aria-label":"Filtrar por PrevisÃ£o",children:e.jsx(L,{size:10})}),I==="tp_previsaoreal"&&e.jsx("div",{className:"absolute top-full left-0 z-50 mt-1",children:e.jsx(B,{columnKey:"tp_previsaoreal",columnTitle:"PrevisÃ£o",data:g.map(t=>t.item),currentFilter:h.tp_previsaoreal,onApplyFilter:V,onClose:()=>v(null)})})]})})]})}),e.jsx("tbody",{children:_.dados.map((t,s)=>{const a=(_.paginaAtual-1)*_.registrosPorPagina+s,o=u.has(a),r=`${t.item.cd_fornecedor}|${t.item.nr_duplicata}|${t.item.cd_empresa}|${t.item.nr_parcela}`,f=va[r],p=f==null?void 0:f.autorizadoPor;c(["owner","admin","manager"]);const Z=t.item.dt_liq&&t.item.dt_liq.trim()!=="";return s===0&&(console.log("ðŸ” Debug condiÃ§Ãµes botÃ£o ENVIAR PARA PAGAMENTO:"),console.log("ðŸ‘¤ hasRole FINANCEIRO:",c(["user"])),console.log("âœ… autorizadoPor:",p),console.log("ðŸ“Š autorizacao?.status:",f==null?void 0:f.status),console.log("ðŸŽ¯ STATUS_AUTORIZACAO.AUTORIZADO:",ht.AUTORIZADO),console.log("ðŸ”— CondiÃ§Ã£o completa:",c(["user"])&&p&&(f==null?void 0:f.status)===ht.AUTORIZADO),console.log("ðŸ’° contaPaga:",Z)),e.jsxs("tr",{className:`text-[8px] border-b transition-colors cursor-pointer ${o?"bg-blue-100 hover:bg-blue-200":s%2===0?"bg-white hover:bg-gray-100":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>Bt(t.item),title:"Clique para ver detalhes da conta",children:[e.jsx("td",{className:"px-0.5 py-0.5 text-center",style:{width:"30px",minWidth:"30px",position:"sticky",left:0,zIndex:10,background:o?"#dbeafe":"inherit"},children:e.jsx("input",{type:"checkbox",checked:o,onChange:T=>{T.stopPropagation(),wa(a)},className:"rounded w-3 h-3",onClick:T=>T.stopPropagation()})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:Z?e.jsx("span",{className:"text-[8px] text-red-700 font-semibold",children:"PAGO"}):e.jsx("span",{className:"text-[8px] text-blue-700 font-semibold",children:"ABERTO"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center text-[8px]",children:Z?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-red-700 font-semibold",children:"PAGO"}),e.jsx("span",{className:"text-gray-600",children:"em"}),e.jsx("span",{className:"text-red-600 font-medium",children:J(t.item.dt_liq)})]}):(f==null?void 0:f.status)===ht.ENVIADO_PAGAMENTO?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-yellow-700 font-semibold",children:"ENVIADO PARA PAGAMENTO"}),e.jsx("span",{className:"text-gray-600",children:"por"}),e.jsx("span",{className:"text-blue-600 font-medium",children:f.enviadoPor})]}):p?e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-green-700 font-semibold",children:"AUTORIZADO"}),e.jsx("span",{className:"text-gray-600",children:"por"}),e.jsx("span",{className:"text-blue-600 font-medium",children:p})]}):e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-gray-500 font-medium",children:"NÃƒO AUTORIZADO"})]})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(t.item.dt_vencimento)}),e.jsx("td",{className:"px-0.5 py-0.5 text-right font-medium text-green-600",children:parseFloat(t.item.vl_duplicata||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.cd_fornecedor||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-32 truncate",title:t.item.nm_fornecedor,children:t.item.nm_fornecedor||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-48 truncate min-w-32",title:t.item.ds_despesaitem,children:t.item.ds_despesaitem||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-48 truncate min-w-32",title:t.item.ds_ccusto,children:t.item.ds_ccusto||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.cd_empresa||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.nr_duplicata||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.nr_parcela||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.nr_portador||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(t.item.dt_emissao)}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(t.item.dt_entrada)}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(t.item.dt_liq)}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.tp_situacao||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.tp_estagio||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(t.item.vl_juros||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(t.item.vl_acrescimo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(t.item.vl_desconto||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(t.item.vl_pago||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.in_aceite||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",title:t.rateios&&t.rateios.length>0?t.rateios.join(" | "):"",children:t.rateios&&t.rateios.length>0?t.rateios.map(T=>parseFloat(T||0)).reduce((T,j)=>T+j,0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-32 truncate",title:(t.observacoes||[]).join(" | "),children:t.item.ds_observacao||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:t.item.tp_previsaoreal||""})]},`grp-${s}`)})})]}),_.totalPaginas>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm text-gray-600",children:["Mostrando"," ",(_.paginaAtual-1)*_.registrosPorPagina+1," ","a"," ",Math.min(_.paginaAtual*_.registrosPorPagina,_.totalRegistros)," ","de ",_.totalRegistros," registros"]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:Ua,disabled:_.paginaAtual===1,className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Primeira pÃ¡gina",children:"Â«Â«"}),e.jsx("button",{onClick:Za,disabled:_.paginaAtual===1,className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"PÃ¡gina anterior",children:"Â«"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,_.totalPaginas)},(t,s)=>{const o=Math.max(1,_.paginaAtual-2)+s;return o>_.totalPaginas?null:e.jsx("button",{onClick:()=>qe(o),className:`px-2 py-1 text-xs rounded ${_.paginaAtual===o?"bg-[#000638] text-white":"bg-white border border-gray-300 hover:bg-gray-50"}`,children:o},o)})}),e.jsx("button",{onClick:Ka,disabled:_.paginaAtual===_.totalPaginas,className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"PrÃ³xima pÃ¡gina",children:"Â»"}),e.jsx("button",{onClick:Ga,disabled:_.paginaAtual===_.totalPaginas,className:"px-2 py-1 text-xs bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:"Ãšltima pÃ¡gina",children:"Â»Â»"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["PÃ¡gina ",_.paginaAtual," de"," ",_.totalPaginas]})]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-600 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:["Selecionadas:"," ",e.jsx("span",{className:"font-semibold",children:u.size})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-green-600",children:"âœ“"}),e.jsx("span",{children:"Dados de fornecedor, centro de custo e despesa das rotas refeitas (/fornecedor, /centrocusto e /despesa)"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{children:["Valor total:"," ",e.jsx("span",{className:"font-semibold text-green-700",children:Array.from(u).reduce((t,s)=>{var a,o;return t+parseFloat(((o=(a=_.dados[s])==null?void 0:a.item)==null?void 0:o.vl_duplicata)||0)},0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),e.jsxs("div",{children:["Valor autorizado:"," ",e.jsx("span",{className:"font-semibold text-emerald-700",children:vs.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),e.jsxs("div",{children:["Contas autorizadas:"," ",e.jsx("span",{className:"font-semibold text-emerald-700",children:ys})]})]})]})]})]})]}):e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-500 text-sm mb-0.5",children:'Clique em "Buscar Dados" para carregar as informaÃ§Ãµes'}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Selecione o perÃ­odo e empresa desejados"})]})})})}),Da&&e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"bg-[#000638] text-white p-3 rounded-t-lg",children:[e.jsx("h2",{className:"text-sm font-bold",children:"ObservaÃ§Ãµes"}),e.jsx("p",{className:"text-xs opacity-90 mt-1",children:"Detalhes das observaÃ§Ãµes para a conta selecionada"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:at&&at.observacoes&&at.observacoes.length>0?e.jsx("div",{className:"space-y-3",children:at.observacoes.map((t,s)=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-800 text-sm leading-relaxed",children:t})},s))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Nenhuma observaÃ§Ã£o encontrada"}),e.jsx("p",{className:"text-sm",children:"Este registro nÃ£o possui observaÃ§Ãµes cadastradas."})]})})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:e.jsx("button",{onClick:ls,className:"bg-[#000638] text-white px-6 py-2 rounded-lg hover:bg-[#fe0000] transition-colors font-medium",children:"Fechar"})})]}),He&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-[#000638] text-white p-3 rounded-t-lg",children:[e.jsx("h2",{className:"text-sm font-bold",children:_a(w)}),e.jsxs("p",{className:"text-xs opacity-90 mt-1",children:[Be.length," registro",Be.length!==1?"s":""," encontrado",Be.length!==1?"s":""]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:Be.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Vencimento"}),e.jsx("th",{className:"px-2 py-2 text-right font-medium text-gray-700",children:"Valor"}),e.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700",children:"Fornecedor"}),e.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-700",children:"Despesa"}),e.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700",children:"Duplicata"}),e.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-700",children:"PrevisÃ£o"}),w==="descontos"&&e.jsx("th",{className:"px-2 py-2 text-right font-medium text-gray-700",children:"Desconto"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:Be.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 py-2 text-sm text-gray-900",children:J(t.dt_vencimento)}),e.jsx("td",{className:"px-2 py-2 text-sm text-right font-medium text-green-600",children:parseFloat(t.vl_duplicata||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-2 py-2 text-sm text-center text-gray-900",children:t.nm_fornecedor||""}),e.jsx("td",{className:"px-2 py-2 text-sm text-gray-900",children:t.ds_despesaitem||""}),e.jsx("td",{className:"px-2 py-2 text-sm text-center text-gray-900",children:t.nr_duplicata||""}),e.jsx("td",{className:"px-2 py-2 text-center",children:e.jsxs("span",{className:`inline-flex items-center px-0.5 py-0.5 rounded-full text-xs font-medium ${Ba(ee(t))}`,children:[qa(ee(t)),e.jsx("span",{className:"ml-1",children:ee(t)})]})}),e.jsx("td",{className:"px-2 py-2 text-center text-gray-900",children:t.tp_previsaoreal||""}),w==="descontos"&&e.jsx("td",{className:"px-2 py-2 text-sm text-right font-medium text-emerald-600",children:parseFloat(t.vl_desconto||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},s))})]})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Nenhum registro encontrado"}),e.jsx("p",{className:"text-sm",children:"NÃ£o hÃ¡ registros para o filtro selecionado."})]})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:e.jsx("button",{onClick:ja,className:"bg-[#000638] text-white px-6 py-2 rounded-lg hover:bg-[#fe0000] transition-colors font-medium",children:"Fechar"})})]})}),e.jsx(As,{conta:ie.conta,isOpen:ie.isOpen,onClose:is}),Ye&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",onClick:xs,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-3 relative animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:vt,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(xa,{size:32,className:"text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Remover AutorizaÃ§Ã£o"}),e.jsxs("p",{className:"text-gray-600",children:["Tem certeza que deseja remover a autorizaÃ§Ã£o de"," ",e.jsx("strong",{children:autorizacaoToRemove==null?void 0:autorizacaoToRemove.autorizadoPor}),"?"]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 text-sm",children:"Detalhes da autorizaÃ§Ã£o:"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),"Autorizado por:"," ",e.jsx("strong",{children:autorizacaoToRemove==null?void 0:autorizacaoToRemove.autorizadoPor})]}),e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Esta aÃ§Ã£o nÃ£o pode ser desfeita"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:vt,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:ds,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Remover"})]})]})}),Xe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",onClick:ms,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-3 relative animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:handleCancelAutorizarTodos,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(bt,{size:32,className:"text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-green-600 mb-2",children:"Autorizar Todos"}),e.jsxs("p",{className:"text-gray-600",children:["Tem certeza que deseja autorizar TODAS as"," ",contasParaAutorizar.length," contas nÃ£o autorizadas?"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:handleCancelAutorizarTodos,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:handleConfirmAutorizarTodos,className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:"Autorizar Todos"})]})]})}),Qe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",onClick:handleRemoverTodosModalClose,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full p-3 relative animate-in zoom-in-95 duration-200",children:[e.jsx("button",{onClick:handleCancelRemoverTodos,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_t,{size:24})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(xa,{size:32,className:"text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-red-600 mb-2",children:"Remover Todos"}),e.jsxs("p",{className:"text-gray-600",children:["Tem certeza que deseja remover TODAS as"," ",contasParaRemover.length," autorizaÃ§Ãµes?"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:handleCancelRemoverTodos,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:handleConfirmRemoverTodos,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Remover Todos"})]})]})}),console.log("ðŸ” Renderizando componente - showEnviarPagamentoModal:",mt),mt&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:handleCancelEnviarParaPagamento,children:e.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3)"},onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{style:{color:"#000638",fontSize:"20px",fontWeight:"bold",marginBottom:"10px"},children:"Confirmar Pagamento"}),e.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"Tem certeza que deseja pagar esta conta?"}),e.jsxs("p",{style:{marginBottom:"20px",color:"#666",fontSize:"12px"},children:["Fornecedor: ",((Gt=Pe==null?void 0:Pe.dadosConta)==null?void 0:Gt.nm_fornecedor)||"N/A"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:handleCancelEnviarParaPagamento,style:{flex:1,padding:"10px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Fechar"}),e.jsx("button",{onClick:handleConfirmEnviarParaPagamento,style:{flex:1,padding:"10px",backgroundColor:"#eab308",color:"black",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"PAGAR"})]})]})}),Ct&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:handleCancelRemoverEnviadoParaPagamento,children:e.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3)"},onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{style:{color:"#dc2626",fontSize:"20px",fontWeight:"bold",marginBottom:"10px"},children:"Remover Pagamento"}),e.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"Tem certeza que deseja remover o status de pagamento desta conta?"}),e.jsxs("p",{style:{marginBottom:"20px",color:"#666",fontSize:"12px"},children:["Fornecedor: ",((Zt=Pe==null?void 0:Pe.dadosConta)==null?void 0:Zt.nm_fornecedor)||"N/A"]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("button",{onClick:handleCancelRemoverEnviadoParaPagamento,style:{flex:1,padding:"10px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancelar"}),e.jsx("button",{onClick:handleConfirmRemoverEnviadoParaPagamento,style:{flex:1,padding:"10px",backgroundColor:"#dc2626",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"REMOVER"})]})]})}),At&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:qt,children:e.jsxs("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",maxWidth:"450px",width:"90%",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3)"},onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{style:{color:"#dc2626",fontSize:"20px",fontWeight:"bold",marginBottom:"15px",textAlign:"center"},children:"âš ï¸ ACESSO RESTRITO"}),e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#fef3c7",borderRadius:"6px",border:"1px solid #f59e0b"},children:[e.jsxs("p",{style:{marginBottom:"10px",color:"#92400e",fontSize:"14px",fontWeight:"bold"},children:["Esta conta foi enviada para pagamento por"," ",e.jsx("strong",{children:pt==null?void 0:pt.enviadoPor}),"."]}),e.jsx("p",{style:{marginBottom:"10px",color:"#92400e",fontSize:"13px"},children:"Apenas administradores podem remover autorizaÃ§Ãµes de contas que jÃ¡ foram enviadas para pagamento."}),e.jsx("p",{style:{color:"#92400e",fontSize:"13px"},children:"Para solicitar a remoÃ§Ã£o, entre em contato com um administrador do sistema."})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center"},children:e.jsx("button",{onClick:qt,style:{padding:"12px 24px",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"14px"},children:"Entendi"})})]})}),console.log("ðŸ” Renderizando componente - showEnviarPagamentoModal:",mt),console.log("ðŸ” Renderizando componente - showRemoverPagamentoModal:",Ct),console.log("ðŸ” Renderizando componente - showAcessoRestritoModal:",At)]})},Ts=({dados:x,totalContas:d,linhasSelecionadas:c,toggleLinhaSelecionada:m,filtroMensal:q,setFiltroMensal:G,dadosOriginais:fe,filtroDia:le,setFiltroDia:Ge,handleFiltroMensalChange:Ze,obterDiasDoMes:rt,abrirModalDetalhes:nt,getSortIcon:k,handleSort:F,agruparDadosIdenticos:Ve})=>{const[_e,ie]=i.useState(new Set),[Ne,we]=i.useState(!1),Ke=n=>{const y=parseInt(n)||0,z=Fs(y);return z||(y>=1e3&&y<=1999?"CUSTO DAS MERCADORIAS VENDIDAS":y>=2e3&&y<=2999?"DESPESAS OPERACIONAIS":y>=3e3&&y<=3999?"DESPESAS COM PESSOAL":y>=4001&&y<=4999?"ALUGUÃ‰IS E ARRENDAMENTOS":y>=5e3&&y<=5999?"IMPOSTOS, TAXAS E CONTRIBUIÃ‡Ã•ES":y>=6e3&&y<=6999?"DESPESAS GERAIS":y>=7e3&&y<=7999?"DESPESAS FINANCEIRAS":y>=8e3&&y<=8999&&y===12001?"OUTRAS DESPESAS OPERACIONAIS":y>=9e3&&y<=9999?"DESPESAS C/ VENDAS":"SEM CLASSIFICAÃ‡ÃƒO")},E=i.useMemo(()=>{const n={};return Ve(x).forEach((S,$)=>{const D=S.item,U=D.cd_despesaitem,u=D.ds_despesaitem||"SEM DESCRIÃ‡ÃƒO",K=D.nm_fornecedor||"SEM FORNECEDOR",W=parseFloat(D.vl_duplicata||0),M=Ke(U);n[M]||(n[M]={nome:M,despesas:{},total:0,quantidade:0,expandida:!1}),n[M].despesas[u]||(n[M].despesas[u]={nome:u,fornecedores:{},total:0,quantidade:0,expandida:!1});const N=`${K}|${D.nr_duplicata}|${D.nr_parcela}`;n[M].despesas[u].fornecedores[N]||(n[M].despesas[u].fornecedores[N]={nome:K,nrDuplicata:D.nr_duplicata,nrParcela:D.nr_parcela,vlDuplicata:W,itens:[],total:0,quantidade:0,expandida:!1}),n[M].despesas[u].fornecedores[N].itens.push({grupo:S,indiceOriginal:$}),n[M].despesas[u].fornecedores[N].total=W,n[M].despesas[u].fornecedores[N].quantidade=1,n[M].despesas[u].total+=W,n[M].despesas[u].quantidade+=1,n[M].total+=W,n[M].quantidade+=1}),["CUSTO DAS MERCADORIAS VENDIDAS","DESPESAS OPERACIONAIS","DESPESAS COM PESSOAL","ALUGUÃ‰IS E ARRENDAMENTOS","IMPOSTOS, TAXAS E CONTRIBUIÃ‡Ã•ES","DESPESAS GERAIS","DESPESAS FINANCEIRAS","OUTRAS DESPESAS OPERACIONAIS","DESPESAS C/ VENDAS","ATIVOS","SEM CLASSIFICAÃ‡ÃƒO"].filter(S=>n[S]).map(S=>{const $=n[S];return $.despesasArray=Object.values($.despesas).map(D=>(D.fornecedoresArray=Object.values(D.fornecedores).sort((U,u)=>u.total-U.total),D)).sort((D,U)=>U.total-D.total),$})},[x]),Je=n=>{ie(y=>{const z=new Set(y);return z.has(n)?z.delete(n):z.add(n),z})},ct=(n,y)=>{const z=`${n}|${y}`;ie(S=>{const $=new Set(S);return $.has(z)?$.delete(z):$.add(z),$})},Le=(n,y,z,S,$,D)=>{const U=`${n}|${y}|${z}|${S}|${$}|${D}`;ie(u=>{const K=new Set(u);return K.has(U)?K.delete(U):K.add(U),K})},We=()=>{if(Ne)ie(new Set),we(!1);else{const n=new Set(E.map(y=>y.nome));ie(n),we(!0)}},lt=()=>{if(!E||E.length===0){alert("Nenhum dado disponÃ­vel para exportar");return}const n=[];if(E.forEach(u=>{u.despesasArray.forEach(K=>{K.fornecedoresArray.forEach(W=>{W.itens.forEach(M=>{const N=M.grupo.item;n.push({Categoria:u.nome,Despesa:K.nome,Fornecedor:W.nome,Duplicata:W.nrDuplicata,Valor:W.vlDuplicata,Vencimento:J(N.dt_vencimento),"Valor Duplicata":parseFloat(N.vl_duplicata||0),"CÃ³digo Fornecedor":N.cd_fornecedor||"","Nome Fornecedor":N.nm_fornecedor||"","Despesa Item":N.ds_despesaitem||"","Centro de Custo":N.ds_ccusto||"",Empresa:N.cd_empresa||"",Portador:N.nr_portador||"",EmissÃ£o:J(N.dt_emissao),Entrada:J(N.dt_entrada),LiquidaÃ§Ã£o:J(N.dt_liq),SituaÃ§Ã£o:N.tp_situacao||"",EstÃ¡gio:N.tp_estagio||"",Juros:parseFloat(N.vl_juros||0),AcrÃ©scimo:parseFloat(N.vl_acrescimo||0),Desconto:parseFloat(N.vl_desconto||0),Pago:parseFloat(N.vl_pago||0),Aceite:N.in_aceite||"",Parcela:N.nr_parcela||"","Rateio Item":N.vl_rateio||"",ObservaÃ§Ã£o:N.ds_observacao||"",PrevisÃ£o:N.tp_previsaoreal||""})})})})}),n.length===0){alert("Nenhum dado encontrado para exportar");return}const y=Ie.book_new(),z=Ie.json_to_sheet(n),S=[{wch:20},{wch:30},{wch:25},{wch:12},{wch:12},{wch:12},{wch:15},{wch:15},{wch:30},{wch:30},{wch:25},{wch:10},{wch:10},{wch:12},{wch:12},{wch:12},{wch:10},{wch:10},{wch:12},{wch:12},{wch:12},{wch:12},{wch:10},{wch:10},{wch:10},{wch:30},{wch:12}];z["!cols"]=S,Ie.book_append_sheet(y,z,"Contas a Pagar");const $=`contas_a_pagar_${new Date().toISOString().split("T")[0]}.xlsx`,D=pa(y,{bookType:"xlsx",type:"array"}),U=new Blob([D],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});ua.saveAs(U,$),console.log(`âœ… Exportados ${n.length} registros para Excel`)};return(()=>{const n=["JAN","FEV","MAR","ABR","MAI","JUN","JUL","AGO","SET","OUT","NOV","DEZ"],y={},z=new Date().getFullYear();return y.ANO=fe.filter(S=>S.dt_vencimento?Y(S.dt_vencimento).getFullYear()===z:!1).length,n.forEach((S,$)=>{const D=$+1;y[S]=fe.filter(U=>U.dt_vencimento?Y(U.dt_vencimento).getMonth()+1===D:!1).length}),y})(),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(Nt,{size:10,className:"text-[#000638]"}),e.jsx("h3",{className:"font-bold text-sm text-[#000638]",children:"Filtro por PerÃ­odo (Data Vencimento)"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("button",{onClick:()=>Ze("ANO"),className:`px-4 py-2 text-[0.7rem] font-medium rounded-md transition-colors ${q==="ANO"?"bg-[#000638] text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"}`,children:"ANO"}),["JAN","FEV","MAR","ABR","MAI","JUN","JUL","AGO","SET","OUT","NOV","DEZ"].map(n=>e.jsx("button",{onClick:()=>Ze(n),className:`px-2 py-2 text-[0.7rem] font-medium rounded-md transition-colors ${q===n?"bg-[#000638] text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"}`,children:n},n))]}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Filtro ativo:"})," ",q,le&&e.jsxs("span",{className:"ml-1",children:["- Dia ",le]}),e.jsxs("span",{className:"ml-2",children:["(",x.length," registro",x.length!==1?"s":"",")"]})]}),q!=="ANO"&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[e.jsx(Nt,{size:14,className:"text-[#000638]"}),e.jsxs("h4",{className:"font-bold text-sm text-[#000638]",children:["Filtro por Dia - ",q]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx("button",{onClick:()=>Ge(null),className:`px-0.5 py-0.5 text-xs font-medium rounded-md transition-colors ${le===null?"bg-[#000638] text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"}`,children:"TODOS"}),Array.from({length:rt(q)},(n,y)=>y+1).map(n=>e.jsx("button",{onClick:()=>Ge(n),className:`px-0.5 py-0.5 text-xs font-medium rounded-md transition-colors ${le===n?"bg-[#000638] text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"}`,children:n},n))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[E.length>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:We,className:"text-xs text-gray-500 hover:text-gray-700 px-0.5 py-0.5 rounded transition-colors flex items-center gap-1",title:Ne?"Colapsar todos os tÃ³picos":"Expandir todos os tÃ³picos",children:Ne?e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"âˆ’"}),e.jsx("span",{children:"Colapsar tudo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"+"}),e.jsx("span",{children:"Expandir tudo"})]})}),e.jsxs("button",{onClick:lt,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1 text-xs font-medium",title:"Exportar todos os dados da Ãºltima linha de hierarquia para Excel",children:[e.jsx(Ds,{size:14}),"BAIXAR EXCEL"]})]}),E.map((n,y)=>{const z=_e.has(n.nome);return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors px-2 py-1.5 flex items-center justify-between",onClick:()=>Je(n.nome),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[z?e.jsx(Ue,{size:10,className:"text-gray-600"}):e.jsx(jt,{size:10,className:"text-gray-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-xs text-gray-800",children:n.nome}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-600",children:[e.jsxs("span",{children:[n.quantidade," conta(s)"]}),e.jsxs("span",{children:[n.despesasArray.length," despesa(s)"]}),e.jsx("span",{className:"font-medium text-red-600",children:n.total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]})]})}),z&&e.jsx("div",{className:"bg-white border-t border-gray-100",children:n.despesasArray.map((S,$)=>{const D=`${n.nome}|${S.nome}`,U=_e.has(D);return e.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"bg-gray-25 hover:bg-gray-50 cursor-pointer transition-colors px-4 py-1.5 flex items-center justify-between",onClick:()=>ct(n.nome,S.nome),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[U?e.jsx(Ue,{size:10,className:"text-gray-500"}):e.jsx(jt,{size:10,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-xs text-gray-700",children:S.nome}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[e.jsxs("span",{children:[S.quantidade," conta(s)"]}),e.jsxs("span",{children:[S.fornecedoresArray.length," ","fornecedor(es)"]}),e.jsx("span",{className:"font-medium text-red-500",children:S.total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]})]})}),U&&e.jsx("div",{className:"bg-white border-t border-gray-50",children:S.fornecedoresArray.map((u,K)=>{const W=`${n.nome}|${S.nome}|${u.nome}|${u.nrDuplicata}|${u.nrParcela}|${u.vlRateio}`,M=_e.has(W);return e.jsxs("div",{className:"border-b border-gray-50 last:border-b-0",children:[e.jsx("div",{className:"bg-gray-25 hover:bg-gray-50 cursor-pointer transition-colors px-6 py-1.5 flex items-center justify-between",onClick:()=>Le(n.nome,S.nome,u.nome,u.nrDuplicata,u.nrParcela,u.vlRateio),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[M?e.jsx(Ue,{size:10,className:"text-gray-400"}):e.jsx(jt,{size:10,className:"text-gray-400"}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-medium text-xs text-gray-600",children:[u.nome,e.jsxs("span",{className:"ml-1 text-gray-400",children:["(Dup: ",u.nrDuplicata," | Parc:"," ",u.nrParcela||"-",")"]}),u.vlRateio>0&&e.jsxs("span",{className:"ml-1 text-gray-400",children:["- Rateio:"," ",parseFloat(u.vlRateio).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 text-xs text-gray-400",children:[e.jsxs("span",{children:[u.quantidade," conta(s)"]}),e.jsx("span",{className:"font-medium text-red-400",children:u.total.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]})]})}),M&&e.jsx("div",{className:"bg-white",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"contas-table w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[#000638] text-white text-[8px]",children:[e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",style:{width:"30px",minWidth:"30px",position:"sticky",left:0,zIndex:10,background:"#000638"},children:"Selecionar"}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("dt_vencimento"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Vencimento"," ",k("dt_vencimento")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("vl_duplicata"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Valor"," ",k("vl_duplicata")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("cd_fornecedor"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Fornecedor"," ",k("cd_fornecedor")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("nm_fornecedor"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["NM Fornecedor"," ",k("nm_fornecedor")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("ds_despesaitem"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Despesa"," ",k("ds_despesaitem")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("ds_ccusto"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["NM CUSTO"," ",k("ds_ccusto")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("cd_empresa"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Empresa"," ",k("cd_empresa")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("nr_duplicata"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Duplicata"," ",k("nr_duplicata")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("nr_portador"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Portador"," ",k("nr_portador")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("dt_emissao"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["EmissÃ£o"," ",k("dt_emissao")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("dt_entrada"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Entrada"," ",k("dt_entrada")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("dt_liq"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["LiquidaÃ§Ã£o"," ",k("dt_liq")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("tp_situacao"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["SituaÃ§Ã£o"," ",k("tp_situacao")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("tp_estagio"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["EstÃ¡gio"," ",k("tp_estagio")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("vl_juros"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Juros"," ",k("vl_juros")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("vl_acrescimo"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["AcrÃ©scimo"," ",k("vl_acrescimo")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("vl_desconto"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Desconto"," ",k("vl_desconto")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("vl_pago"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Pago"," ",k("vl_pago")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("in_aceite"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Aceite"," ",k("in_aceite")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("nr_parcela"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["Parcela"," ",k("nr_parcela")]})}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",children:"Rateio"}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px]",children:"ObservaÃ§Ã£o"}),e.jsx("th",{className:"px-0.5 py-0.5 text-center text-[8px] cursor-pointer hover:bg-[#000638]/80 transition-colors",onClick:()=>F("tp_previsaoreal"),children:e.jsxs("div",{className:"flex items-center justify-center",children:["PrevisÃ£o"," ",k("tp_previsaoreal")]})})]})}),e.jsx("tbody",{children:u.itens.map((N,Ce)=>{const He=N.indiceOriginal,Ae=c.has(He),w=N.grupo.item;return e.jsxs("tr",{className:`text-[8px] border-b transition-colors cursor-pointer ${Ae?"bg-blue-100 hover:bg-blue-200":Ce%2===0?"bg-white hover:bg-gray-100":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>nt(w),title:"Clique para ver detalhes da conta",children:[e.jsx("td",{className:"px-0.5 py-0.5 text-center",style:{width:"30px",minWidth:"30px",position:"sticky",left:0,zIndex:10,background:Ae?"#dbeafe":"inherit"},children:e.jsx("input",{type:"checkbox",checked:Ae,onChange:Se=>{Se.stopPropagation(),m(He)},className:"rounded w-3 h-3",onClick:Se=>Se.stopPropagation()})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(w.dt_vencimento)}),e.jsx("td",{className:"px-0.5 py-0.5 text-right font-medium text-green-600",children:parseFloat(w.vl_duplicata||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.cd_fornecedor||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-32 truncate",title:w.nm_fornecedor,children:w.nm_fornecedor||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-48 truncate min-w-32",title:w.ds_despesaitem,children:w.ds_despesaitem||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-48 truncate min-w-32",title:w.ds_ccusto,children:w.ds_ccusto||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.cd_empresa||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.nr_duplicata||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.nr_portador||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(w.dt_emissao)}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(w.dt_entrada)}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:J(w.dt_liq)}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.tp_situacao||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.tp_estagio||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(w.vl_juros||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(w.vl_acrescimo||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(w.vl_desconto||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(w.vl_pago||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.in_aceite||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.nr_parcela||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-right",children:parseFloat(w.vl_rateio||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("td",{className:"px-0.5 py-0.5 text-left max-w-32 truncate",title:w.ds_observacao,children:w.ds_observacao||""}),e.jsx("td",{className:"px-0.5 py-0.5 text-center",children:w.tp_previsaoreal||""})]},`${w.cd_empresa}-${w.nr_duplicata}-${Ce}`)})})]})})})]},`fornecedor-${y}-${$}-${K}-${u.nome}-${u.nrDuplicata}-${u.nrParcela}`)})})]},`despesa-${y}-${$}-${S.nome}`)})})]},`categoria-${y}-${n.nome}`)}),E.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma despesa encontrada para os filtros selecionados"})]})]})},uo=Os;export{uo as default};
